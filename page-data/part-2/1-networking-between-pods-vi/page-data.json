{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-2/1-networking-between-pods-vi","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mục tiêu học tập"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau phần này"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Bạn biết về DNS của Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gửi yêu cầu từ một pod đến một pod khác trong cùng cụm"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ở phần 1, chúng ta đã cấu hình mạng để cho phép định tuyến lưu lượng từ bên ngoài cụm vào một container bên trong pod. Ở Phần 2, chúng ta sẽ tập trung vào giao tiếp giữa các pod."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kubernetes bao gồm một dịch vụ DNS nên việc giao tiếp giữa các pod và container trong Kubernetes khá giống với các container trong Docker compose. Các container trong một pod chia sẻ cùng mạng. Do đó, mọi container khác trong cùng một pod đều có thể truy cập qua "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":". Để giao tiếp giữa các Pod, một "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Service"}]},{"type":"text","value":" được sử dụng vì nó sẽ expose các Pod như một dịch vụ mạng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Service sau đây, lấy từ một bài tập ở phần trước, tạo một IP nội bộ cụm cho phép các pod khác trong cụm truy cập cổng 3000 của ứng dụng "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"todo-backend"}]},{"type":"text","value":" tại "},{"type":"element","tagName":"a","properties":{"href":"http://todo-backend-svc:2345","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"http://todo-backend-svc:2345"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"service.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Service\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" todo"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"backend"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"svc\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"type"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ClusterIP\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" todo"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"backend\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ports"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"port"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2345"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"protocol"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" TCP\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"targetPort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3000"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ngoài ra, mỗi Pod cũng có một địa chỉ IP được Kubernetes tạo ra."}]},{"type":"element","tagName":"h3","properties":{"id":"một-pod-dể-debug","style":"position:relative;"},"children":[{"type":"text","value":"Một pod để debug"},{"type":"element","tagName":"a","properties":{"href":"#m%E1%BB%99t-pod-d%E1%BB%83-debug","ariaLabel":"một pod dể debug permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đôi khi, cách tốt nhất để debug là kiểm tra thủ công xem điều gì đang xảy ra. Bạn có thể vào bên trong một pod hoặc gửi yêu cầu thủ công từ một pod khác. Bạn có thể sử dụng "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/BusyBox","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"busybox"}]},{"type":"text","value":", một bản phân phối Linux nhẹ dùng cho debug."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy khởi động một pod busybox bằng cách apply file yaml sau:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"podfordebugging.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"busybox\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"busybox\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" busybox\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"command"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" sleep\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"3600\""}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"imagePullPolicy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" IfNotPresent\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" busybox\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"restartPolicy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Always"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bây giờ chúng ta có thể thực thi một lệnh:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"exec"}]},{"type":"text","value":" -it my-busybox -- "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" -qO - http://todo-backend-svc:2345"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta sử dụng lệnh "},{"type":"element","tagName":"a","properties":{"href":"https://www.gnu.org/software/wget/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" vì công cụ thường dùng là curl không có sẵn trong busybox."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta cũng có thể mở một shell vào pod với lệnh "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubectl exec"}]},{"type":"text","value":" để chạy nhiều lệnh:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"$ kubectl exec "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"it my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"busybox "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" sh\n/ "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# wget -qO - http://todo-backend-svc:2345"}]},{"type":"text","value":"\n<html"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n   <body"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n      <h1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"Kube todo</h1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n      <img src=\"/picture.jpg\" alt=\"rndpic\" width=\"200\" height=\"200\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n      <form action=\"/create"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"todo\" method=\"POST\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n         <input type=\"text\" name=\"todo\" maxlength=\"140\" placeholder=\"Enter todo\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n         <button type=\"submit\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"Create</button"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n      </form"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n      <ul"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n            <li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"Mua sữa</li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n            <li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"Gửi thư</li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n            <li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"Thanh toán hóa đơn</li"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n      </ul"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n   </body"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n</html"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"/ "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"#"}]},{"type":"text","value":"\n$ exit"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn cũng có thể nhận kết quả tương tự bằng cách sử dụng địa chỉ IP nội bộ của service. Hãy kiểm tra địa chỉ:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl get svc\nNAME               TYPE        CLUSTER-IP     EXTERNAL-IP   PORT"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"S"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"    AGE\ntodo-backend-svc   ClusterIP   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10.43"}]},{"type":"text","value":".89.182   "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"none"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"        "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2345"}]},{"type":"text","value":"/TCP   2d1h"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lệnh sau sẽ hiển thị trang chính của ứng dụng todo-app:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"exec"}]},{"type":"text","value":" -it my-busybox -- "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" -qO - http://10.43.89.182:2345"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy thử truy cập trực tiếp một pod. Chúng ta có thể lấy địa chỉ IP bằng lệnh "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubectl describe"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl describe pod todo-backend-dep-84fcdff4cc-2x9wl\nName:             todo-backend-dep-84fcdff4cc-2x9wl\nNamespace:        default\nPriority:         "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"\nService Account:  default\nNode:             k3d-k3s-default-agent-0/192.168.176.5\nStart Time:       Mon, 08 Apr "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2024"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"23"}]},{"type":"text","value":":27:00 +0300\nLabels:           "},{"type":"element","tagName":"span","properties":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"todo-backend\n                  pod-template-hash"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"84fcdff4cc\nAnnotations:      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"none"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\nStatus:           Running\nIP:               "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10.42"}]},{"type":"text","value":".0.63"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vậy một trong các pod đang chạy ứng dụng todo-app có địa chỉ IP nội bộ cụm là "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"10.42.0.63"}]},{"type":"text","value":". Chúng ta có thể wget đến địa chỉ này, nhưng lần này cần nhớ rằng cổng trong pod là 3000:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"exec"}]},{"type":"text","value":" -it my-busybox "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" -qO - http://10.42.0.63:3000"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lưu ý rằng khác với phần trước, lần này chúng ta đã tạo một pod độc lập trong cụm, không có đối tượng deployment nào cả. Khi xong, bạn nên xóa pod này, ví dụ bằng lệnh"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"$ kubectl delete pod/my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"busybox"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nói chung, các pod \"độc lập\" kiểu này chỉ nên dùng để debug, còn các pod ứng dụng nên được tạo qua deployment. Lý do là nếu node chứa pod bị crash, các pod độc lập sẽ biến mất. Khi pod được quản lý bởi deployment, Kubernetes sẽ tự động triển khai lại nếu node gặp sự cố."}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 2.01: Kết nối các pod"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kết nối ứng dụng \"Log output\" và ứng dụng \"Ping-pong\". Thay vì chia sẻ dữ liệu qua file, hãy sử dụng các HTTP endpoint để trả về số lượng pong. Tạm thời loại bỏ tất cả các volume giữa hai ứng dụng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kết quả đầu ra sẽ giữ nguyên:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43.\nPing / Pongs: 3"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 2.02: Project v1.0"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy quay lại Project của chúng ta. Ở "},{"type":"element","tagName":"a","properties":{"href":"/part-1/4-introduction-to-storage"},"children":[{"type":"text","value":"phần trước"}]},{"type":"text","value":" chúng ta đã thêm một ảnh ngẫu nhiên và một form để tạo todo vào ứng dụng. Bước tiếp theo là tạo một container mới để xử lý việc lưu các todo."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dịch vụ mới này, hãy gọi là todo-backend, nên có endpoint GET /todos để lấy danh sách todo và endpoint POST /todos để tạo một todo mới. Các todo có thể lưu vào bộ nhớ, sau này chúng ta sẽ thêm cơ sở dữ liệu."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sử dụng ingress routing để cho phép truy cập vào todo-backend."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau bài tập này, project của bạn sẽ trông như sau:"}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 401px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 47.82608695652174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz32S26rCQAxF5/9/yqeCDxaqoGgpWMVbi71ar6iRFUhPK3ICIWkms7uzJ07+sff7rXG73cpms5GmaeR8PmvM81yiKJLn89nrdd0P4rdjWZbJ/X6XsixlOp3KbrfTepIkvwG7hV92OBwU9Ha7KbPT6aT5arXqAeI9hhw+Ho+2wfLL5aKAVVUpECPzDfC3ue5ojDSfz8X3fRkOhzKbzVpQAGzUoih0XOJkMpHFYqH+er3+AA0UgDAMJY7j3p+v16vs93vNj8ejpGmqPh6PtX80Gin7nobdx2FMXhQnhz2AnKHpcrnUOgR4MH6IO9DX67XUdd2yAcSEJ6IZF8k5A9x6cO4CjgRuMBiI53mqjzXYfnEJbdCVOqDGGpbU6WWVbD9dEASCIzoXENZWxManZq9tzL5lwtiCD3xxAZMM0UYzAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/bc4bed9387ebafa11912ae48b2339d14/a0b58/p2-2.webp 230w","/static/bc4bed9387ebafa11912ae48b2339d14/b3c31/p2-2.webp 401w"],"sizes":["(max-width:","401px)","100vw,","401px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/bc4bed9387ebafa11912ae48b2339d14/81c8e/p2-2.png 230w","/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png 401w"],"sizes":["(max-width:","401px)","100vw,","401px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png","alt":"p2 2","title":"p2 2","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vai trò của dịch vụ mà chúng ta đã tạo ở các bài tập trước (Todo-app trong hình) là phục vụ HTML và có thể cả JavaScript cho trình duyệt. Ngoài ra, logic phục vụ ảnh ngẫu nhiên và cache ảnh vẫn nằm ở dịch vụ này."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dịch vụ mới sẽ xử lý các mục todo."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau bài tập này, bạn sẽ có thể tạo các todo mới bằng form, và các todo đã tạo sẽ được hiển thị trên trình duyệt."}]}]}]},"html":"<div><text-box variant='learningObjectives' name='Mục tiêu học tập'><p>Sau phần này</p><ul>\n<li>Bạn biết về DNS của Kubernetes</li>\n<li>Gửi yêu cầu từ một pod đến một pod khác trong cùng cụm</li>\n</ul></text-box><p>Ở phần 1, chúng ta đã cấu hình mạng để cho phép định tuyến lưu lượng từ bên ngoài cụm vào một container bên trong pod. Ở Phần 2, chúng ta sẽ tập trung vào giao tiếp giữa các pod.</p><p>Kubernetes bao gồm một dịch vụ DNS nên việc giao tiếp giữa các pod và container trong Kubernetes khá giống với các container trong Docker compose. Các container trong một pod chia sẻ cùng mạng. Do đó, mọi container khác trong cùng một pod đều có thể truy cập qua <code class=\"language-text\">localhost</code>. Để giao tiếp giữa các Pod, một <em>Service</em> được sử dụng vì nó sẽ expose các Pod như một dịch vụ mạng.</p><p>Service sau đây, lấy từ một bài tập ở phần trước, tạo một IP nội bộ cụm cho phép các pod khác trong cụm truy cập cổng 3000 của ứng dụng <em>todo-backend</em> tại <a href=\"http://todo-backend-svc:2345\" target=\"_blank\" rel=\"noopener noreferrer\">http://todo-backend-svc:2345</a>.</p><p><strong>service.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">-</span>backend<span class=\"token punctuation\">-</span>svc\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">-</span>backend\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2345</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span></code></pre></div><p>Ngoài ra, mỗi Pod cũng có một địa chỉ IP được Kubernetes tạo ra.</p><h3 id=\"một-pod-dể-debug\" style=\"position:relative;\">Một pod để debug<a href=\"#m%E1%BB%99t-pod-d%E1%BB%83-debug\" aria-label=\"một pod dể debug permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Đôi khi, cách tốt nhất để debug là kiểm tra thủ công xem điều gì đang xảy ra. Bạn có thể vào bên trong một pod hoặc gửi yêu cầu thủ công từ một pod khác. Bạn có thể sử dụng <a href=\"https://en.wikipedia.org/wiki/BusyBox\" target=\"_blank\" rel=\"noopener noreferrer\">busybox</a>, một bản phân phối Linux nhẹ dùng cho debug.</p><p>Hãy khởi động một pod busybox bằng cách apply file yaml sau:</p><p><strong>podfordebugging.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>busybox\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>busybox\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> busybox\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> sleep\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3600\"</span>\n      <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> busybox\n  <span class=\"token key atrule\">restartPolicy</span><span class=\"token punctuation\">:</span> Always</code></pre></div><p>Bây giờ chúng ta có thể thực thi một lệnh:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl <span class=\"token builtin class-name\">exec</span> -it my-busybox -- <span class=\"token function\">wget</span> -qO - http://todo-backend-svc:2345</code></pre></div><p>Chúng ta sử dụng lệnh <a href=\"https://www.gnu.org/software/wget/\" target=\"_blank\" rel=\"noopener noreferrer\">wget</a> vì công cụ thường dùng là curl không có sẵn trong busybox.</p><p>Chúng ta cũng có thể mở một shell vào pod với lệnh <a href=\"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl exec</a> để chạy nhiều lệnh:</p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">$ kubectl exec <span class=\"token punctuation\">-</span>it my<span class=\"token punctuation\">-</span>busybox <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span> sh\n/ <span class=\"token comment\"># wget -qO - http://todo-backend-svc:2345</span>\n&lt;html<span class=\"token punctuation\">></span>\n   &lt;body<span class=\"token punctuation\">></span>\n      &lt;h1<span class=\"token punctuation\">></span>Kube todo&lt;/h1<span class=\"token punctuation\">></span>\n      &lt;img src=\"/picture.jpg\" alt=\"rndpic\" width=\"200\" height=\"200\"<span class=\"token punctuation\">></span>\n\n      &lt;form action=\"/create<span class=\"token punctuation\">-</span>todo\" method=\"POST\"<span class=\"token punctuation\">></span>\n         &lt;input type=\"text\" name=\"todo\" maxlength=\"140\" placeholder=\"Enter todo\"<span class=\"token punctuation\">></span>\n         &lt;button type=\"submit\"<span class=\"token punctuation\">></span>Create&lt;/button<span class=\"token punctuation\">></span>\n      &lt;/form<span class=\"token punctuation\">></span>\n\n      &lt;ul<span class=\"token punctuation\">></span>\n            &lt;li<span class=\"token punctuation\">></span>Mua sữa&lt;/li<span class=\"token punctuation\">></span>\n            &lt;li<span class=\"token punctuation\">></span>Gửi thư&lt;/li<span class=\"token punctuation\">></span>\n            &lt;li<span class=\"token punctuation\">></span>Thanh toán hóa đơn&lt;/li<span class=\"token punctuation\">></span>\n      &lt;/ul<span class=\"token punctuation\">></span>\n   &lt;/body<span class=\"token punctuation\">></span>\n&lt;/html<span class=\"token punctuation\">></span>/ <span class=\"token comment\">#</span>\n$ exit</code></pre></div><p>Bạn cũng có thể nhận kết quả tương tự bằng cách sử dụng địa chỉ IP nội bộ của service. Hãy kiểm tra địa chỉ:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl get svc\nNAME               TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>    AGE\ntodo-backend-svc   ClusterIP   <span class=\"token number\">10.43</span>.89.182   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">2345</span>/TCP   2d1h</code></pre></div><p>Lệnh sau sẽ hiển thị trang chính của ứng dụng todo-app:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl <span class=\"token builtin class-name\">exec</span> -it my-busybox -- <span class=\"token function\">wget</span> -qO - http://10.43.89.182:2345</code></pre></div><p>Hãy thử truy cập trực tiếp một pod. Chúng ta có thể lấy địa chỉ IP bằng lệnh <em>kubectl describe</em>:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl describe pod todo-backend-dep-84fcdff4cc-2x9wl\nName:             todo-backend-dep-84fcdff4cc-2x9wl\nNamespace:        default\nPriority:         <span class=\"token number\">0</span>\nService Account:  default\nNode:             k3d-k3s-default-agent-0/192.168.176.5\nStart Time:       Mon, 08 Apr <span class=\"token number\">2024</span> <span class=\"token number\">23</span>:27:00 +0300\nLabels:           <span class=\"token assign-left variable\">app</span><span class=\"token operator\">=</span>todo-backend\n                  pod-template-hash<span class=\"token operator\">=</span>84fcdff4cc\nAnnotations:      <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>\nStatus:           Running\nIP:               <span class=\"token number\">10.42</span>.0.63</code></pre></div><p>Vậy một trong các pod đang chạy ứng dụng todo-app có địa chỉ IP nội bộ cụm là <em>10.42.0.63</em>. Chúng ta có thể wget đến địa chỉ này, nhưng lần này cần nhớ rằng cổng trong pod là 3000:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl <span class=\"token builtin class-name\">exec</span> -it my-busybox <span class=\"token function\">wget</span> -qO - http://10.42.0.63:3000</code></pre></div><p>Lưu ý rằng khác với phần trước, lần này chúng ta đã tạo một pod độc lập trong cụm, không có đối tượng deployment nào cả. Khi xong, bạn nên xóa pod này, ví dụ bằng lệnh</p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">$ kubectl delete pod/my<span class=\"token punctuation\">-</span>busybox</code></pre></div><p>Nói chung, các pod \"độc lập\" kiểu này chỉ nên dùng để debug, còn các pod ứng dụng nên được tạo qua deployment. Lý do là nếu node chứa pod bị crash, các pod độc lập sẽ biến mất. Khi pod được quản lý bởi deployment, Kubernetes sẽ tự động triển khai lại nếu node gặp sự cố.</p></text-box><exercise name='Exercise 2.01: Kết nối các pod'><p>Kết nối ứng dụng \"Log output\" và ứng dụng \"Ping-pong\". Thay vì chia sẻ dữ liệu qua file, hãy sử dụng các HTTP endpoint để trả về số lượng pong. Tạm thời loại bỏ tất cả các volume giữa hai ứng dụng.</p><p>Kết quả đầu ra sẽ giữ nguyên:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43.\nPing / Pongs: 3</code></pre></div></exercise><exercise name='Exercise 2.02: Project v1.0'><p>Hãy quay lại Project của chúng ta. Ở <a href=\"/part-1/4-introduction-to-storage\">phần trước</a> chúng ta đã thêm một ảnh ngẫu nhiên và một form để tạo todo vào ứng dụng. Bước tiếp theo là tạo một container mới để xử lý việc lưu các todo.</p><p>Dịch vụ mới này, hãy gọi là todo-backend, nên có endpoint GET /todos để lấy danh sách todo và endpoint POST /todos để tạo một todo mới. Các todo có thể lưu vào bộ nhớ, sau này chúng ta sẽ thêm cơ sở dữ liệu.</p><p>Sử dụng ingress routing để cho phép truy cập vào todo-backend.</p><p>Sau bài tập này, project của bạn sẽ trông như sau:</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 401px; margin-bottom: 1rem;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.82608695652174%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz32S26rCQAxF5/9/yqeCDxaqoGgpWMVbi71ar6iRFUhPK3ICIWkms7uzJ07+sff7rXG73cpms5GmaeR8PmvM81yiKJLn89nrdd0P4rdjWZbJ/X6XsixlOp3KbrfTepIkvwG7hV92OBwU9Ha7KbPT6aT5arXqAeI9hhw+Ho+2wfLL5aKAVVUpECPzDfC3ue5ojDSfz8X3fRkOhzKbzVpQAGzUoih0XOJkMpHFYqH+er3+AA0UgDAMJY7j3p+v16vs93vNj8ejpGmqPh6PtX80Gin7nobdx2FMXhQnhz2AnKHpcrnUOgR4MH6IO9DX67XUdd2yAcSEJ6IZF8k5A9x6cO4CjgRuMBiI53mqjzXYfnEJbdCVOqDGGpbU6WWVbD9dEASCIzoXENZWxManZq9tzL5lwtiCD3xxAZMM0UYzAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/bc4bed9387ebafa11912ae48b2339d14/a0b58/p2-2.webp 230w,\n/static/bc4bed9387ebafa11912ae48b2339d14/b3c31/p2-2.webp 401w\" sizes=\"(max-width: 401px) 100vw, 401px\" type=\"image/webp\">\n        <source srcset=\"/static/bc4bed9387ebafa11912ae48b2339d14/81c8e/p2-2.png 230w,\n/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png 401w\" sizes=\"(max-width: 401px) 100vw, 401px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/bc4bed9387ebafa11912ae48b2339d14/9144d/p2-2.png\" alt=\"p2 2\" title=\"p2 2\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span><p>Vai trò của dịch vụ mà chúng ta đã tạo ở các bài tập trước (Todo-app trong hình) là phục vụ HTML và có thể cả JavaScript cho trình duyệt. Ngoài ra, logic phục vụ ảnh ngẫu nhiên và cache ảnh vẫn nằm ở dịch vụ này.</p><p>Dịch vụ mới sẽ xử lý các mục todo.</p><p>Sau bài tập này, bạn sẽ có thể tạo các todo mới bằng form, và các todo đã tạo sẽ được hiển thị trên trình duyệt.</p></exercise></div>","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"},"fileAbsolutePath":"/home/runner/work/dwk2024/dwk2024/data/part-2/1-networking-between-pods-vi.md"},"allPages":{"edges":[{"node":{"id":"5225f2a2-20f9-50ce-93ac-7b38f3105103","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"e1ed6713-5992-5f7f-95a1-17efd97f57d8","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"7e706a38-3828-5118-bdec-3705a319a1b0","frontmatter":{"path":"/faq-vi","title":"Câu hỏi thường gặp"}}},{"node":{"id":"52d4cd1d-eb14-54f3-a18a-ef84b67c320d","frontmatter":{"path":"/index-en","title":"Homepage"}}},{"node":{"id":"04c5ddbd-7839-580f-82da-bc9fdbb49f84","frontmatter":{"path":"/known-problems-solutions-vi","title":"Các vấn đề bạn có thể gặp phải"}}},{"node":{"id":"3102d88f-7297-56fb-af03-27d1079fffd1","frontmatter":{"path":"/","title":"Trang chủ"}}},{"node":{"id":"c92ea568-3384-5ff8-8dfa-b9015597780d","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"5e6b6ee0-b381-53f0-b84c-af378792b131","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"58688080-4aa8-54e6-8b8b-02de1c4f6410","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"d9c993b6-f6b4-59a1-b119-f3b7218eec6b","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"8a3ee5be-7557-5fcd-954b-2351e74cd585","frontmatter":{"path":"/part-0/1-intro-vi","title":"Giới thiệu khóa học"}}},{"node":{"id":"23082016-7bbd-5215-8485-4ffccbf3ea1a","frontmatter":{"path":"/part-0/1-intro","title":"Course Introduction"}}},{"node":{"id":"771eaa93-2ef2-5e0f-9e1e-55914c67c4ac","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"1c236933-7ad5-5b61-8c07-07db3822d55a","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"fe0342aa-a4c5-5b44-8591-71eb27f1a287","frontmatter":{"path":"/part-1/2-introduction-to-debugging-vi","title":"Giới thiệu về Debugging"}}},{"node":{"id":"7fc5c062-6b94-53ec-9aaa-adca66ce672e","frontmatter":{"path":"/part-1/5-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"3c788edf-62db-5e86-9366-17b53eda9244","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"8ed3365b-b788-5806-8ec5-bec3cb0f94c8","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"46a4a0e4-d131-537d-aa72-5b6726163a7d","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"}}},{"node":{"id":"fd467661-6b24-545f-904c-52f4a7ade6b7","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"56110eda-875d-5bd9-a400-5bd5a009df7f","frontmatter":{"path":"/part-2/5-monitoring-vi","title":"Giám sát"}}},{"node":{"id":"8f3387b0-ec6e-5a86-982a-e52780d911f9","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"06173ac4-c2f8-57df-8dc8-450b5c2bb695","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"79f1cddb-6995-51c2-bf98-2adc13de9b13","frontmatter":{"path":"/part-2/6-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8c3d747d-4f87-5a46-99ac-dfd0af5a893b","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"8d9fd774-9dbe-5cca-8395-9226fcf82c4a","frontmatter":{"path":"/part-3/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"b98b2895-6c9d-5234-939d-2f547cbf8a06","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"29bec4f5-8a0b-580d-ac84-9dbbd1d7152e","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"0045695d-e541-5acc-b4b8-551023d01733","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"a917b24d-df2b-5199-ac98-cd0f7560c63f","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"4dd8302d-d170-5d38-8198-4d0947322bbc","frontmatter":{"path":"/part-4/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"eb339401-26c8-594c-98fd-2f30a95275cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"}}},{"node":{"id":"2318c18f-86e6-5a4e-958a-d1c38f8615cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"1d8ff75c-065b-565d-9ceb-01b9a276ae7a","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"781bd207-902e-59a2-a752-4958c2c93fb0","frontmatter":{"path":"/part-5/5-summary-vi","title":"Tóm tắt và kết thúc"}}},{"node":{"id":"829fd216-f995-5a77-b201-bb971aec73b4","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams-vi","title":"Kubernetes qua ba sơ đồ"}}},{"node":{"id":"98132cca-4dc3-5942-a6f4-1da87bc81a23","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams","title":"Kubernetes in three diagrams"}}},{"node":{"id":"8931bcb7-c40e-5d57-aa80-c4333972fbb8","frontmatter":{"path":"/part-1/3-introduction-to-networking-vi","title":"Giới thiệu về Mạng"}}},{"node":{"id":"90b8e83a-9d55-550a-908a-316708ce7f8c","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"4fe00c0a-bb17-5d4c-8202-750493a755c9","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"}}},{"node":{"id":"6cc3be66-6091-58fc-bcbd-1f27f9473f85","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"d5206d16-d2fe-51fd-8acd-d85ecf0be257","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"b53df746-c24f-57e3-a9f3-d6d621697689","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"}}},{"node":{"id":"e4534a9d-fb84-5d1f-83f0-35055feb0da7","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"15be3d7c-b0b7-5bce-b3bf-8cec39d54630","frontmatter":{"path":"/part-2/3-configuring-applications-vi","title":"Cấu hình ứng dụng"}}},{"node":{"id":"02389078-a12f-561a-8a54-fa99a6950b92","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs-vi","title":"StatefulSet và Job"}}},{"node":{"id":"466aa711-527b-55a0-871b-13468e65d344","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"bea18f34-dcdc-59b8-ba24-3011680a0c58","frontmatter":{"path":"/part-3/1-introduction-to-gke-vi","title":"Giới thiệu về Google Kubernetes Engine"}}},{"node":{"id":"0049e57f-0bc7-5689-9169-43848a972877","frontmatter":{"path":"/part-3/2-deployment-pipeline-vi","title":"Quy trình Triển khai (Deployment Pipeline)"}}},{"node":{"id":"61f18dc7-1abf-5c75-9b54-0cee11c76a40","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"84db9628-b3df-5ca1-9d3d-5924e02ae549","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"7dfec8c7-8ccb-50da-949d-ebd1de395dc4","frontmatter":{"path":"/part-3/3-gke-features-vi","title":"Các tính năng của GKE"}}},{"node":{"id":"423cbc46-2dfa-57e6-9dc5-761a93729600","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"6df9c7be-f930-5827-a39c-0c1698b23600","frontmatter":{"path":"/part-4/3-gitops-vi","title":"Triển khai GitOps"}}},{"node":{"id":"46f9ce68-5ccd-5787-bd59-03852ad6fdcb","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"da1f8069-17bc-5c8e-9310-117bcedf5acf","frontmatter":{"path":"/part-5/2-custom-resource-definitions-vi","title":"Định nghĩa Tài nguyên Tùy chỉnh (Custom Resource Definitions)"}}},{"node":{"id":"31927db3-2182-55c7-b680-663754461d14","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"68c64f9f-c9a5-544b-bafb-b061665cacd0","frontmatter":{"path":"/part-5/3-service-mesh-vi","title":"Service Mesh"}}},{"node":{"id":"0e981ec1-99e0-5005-ba9f-4f626a81b7ce","frontmatter":{"path":"/part-5/1-kubernetes-internals-vi","title":"Bên trong Kubernetes"}}},{"node":{"id":"20ceed4e-761d-54d4-9acf-2669eac533c6","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"ccefb04a-5790-57f6-869b-d255b2203667","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"306c87f3-9adb-5d8b-a3ce-072f8e6cfa43","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"97ead58a-8493-5fdd-808e-d4a56de573b0","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"c179c521-bb62-52bd-808b-d4869df5302a","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus-vi","title":"Chiến lược cập nhật và Prometheus"}}},{"node":{"id":"6f4f18ce-5aa9-5bb5-9d74-0a631a78e6b3","frontmatter":{"path":"/part-4/2-messaging-systems-vi","title":"Hệ thống nhắn tin"}}},{"node":{"id":"898b0354-f1a2-5664-97de-d84b16018395","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"6981a9d7-619d-51a9-9490-74bc77c0f55b","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}},{"node":{"id":"a17c4c44-7396-543f-b6b4-7adf57808aa8","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}