{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-2/2-organizing-a-cluster-vi","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mục tiêu học tập"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau phần này bạn"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"biết các phương pháp tổ chức một cụm"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"biết cách giới hạn pod vào các node cụ thể"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Như bạn có thể tưởng tượng, có thể sẽ có rất nhiều tài nguyên bên trong một cụm. Thực tế, tại thời điểm viết tài liệu này, Kubernetes hỗ trợ hơn 100.000 pod trong một cụm duy nhất."}]},{"type":"element","tagName":"h3","properties":{"id":"namespace","style":"position:relative;"},"children":[{"type":"text","value":"Namespace"},{"type":"element","tagName":"a","properties":{"href":"#namespace","ariaLabel":"namespace permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Namespace"}]},{"type":"text","value":" được sử dụng để tách biệt các tài nguyên. Một công ty sử dụng một cụm nhưng có nhiều dự án có thể dùng namespace để chia cụm thành các cụm ảo, mỗi dự án một namespace. Thông thường nhất, namespace được dùng để tách các môi trường như production, testing, staging. Bản ghi DNS cho service sẽ bao gồm namespace nên bạn vẫn có thể cho các project giao tiếp với nhau nếu cần thông qua địa chỉ service.namespace. Ví dụ, nếu một service tên là "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"cat-pictures"}]},{"type":"text","value":" nằm trong namespace "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ns-test"}]},{"type":"text","value":", nó có thể được tìm thấy từ các namespace khác qua "},{"type":"element","tagName":"a","properties":{"href":"http://cat-pictures.ns-test","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"http://cat-pictures.ns-test"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Truy cập namespace với kubectl được thực hiện bằng cờ "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-n"}]},{"type":"text","value":". Ví dụ, bạn có thể xem namespace kube-system có gì với"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get pods -n kube-system"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để xem tất cả mọi thứ, bạn có thể dùng "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--all-namespaces"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get all --all-namespaces"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Namespace nên được giữ tách biệt - ví dụ bạn có thể chạy tất cả các ví dụ và làm bài tập của khóa học này trong một cụm dùng chung với phần mềm quan trọng, nhưng đó không phải là ý hay. Quản trị viên nên đặt "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/policy/resource-quotas/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"ResourceQuota"}]},{"type":"text","value":" cho namespace đó để bạn có thể chạy mọi thứ an toàn ở đó. Chúng ta sẽ tìm hiểu về giới hạn và yêu cầu tài nguyên sau."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo một namespace chỉ cần một dòng lệnh ("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl create namespace example-namespace"}]},{"type":"text","value":"). Bạn có thể chỉ định namespace sử dụng bằng cách thêm vào phần metadata của file yaml."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# ..."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" example"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"namespace\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" example\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# ..."}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu bạn thường xuyên sử dụng một namespace cụ thể, bạn có thể đặt namespace mặc định với "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl config set-context --current --namespace=<name>"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Việc thay đổi namespace mặc định với lệnh trên khá bất tiện. May mắn thay, có một công cụ cộng đồng là "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubens"}]},{"type":"text","value":", giúp liệt kê các namespace hiện có và chuyển đổi namespace mặc định dễ dàng. Hãy cài đặt ngay "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ahmetb/kubectx","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubectx + kubens"}]},{"type":"text","value":", ngoài "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubens"}]},{"type":"text","value":" còn có lệnh "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubectx"}]},{"type":"text","value":" để chuyển đổi cụm bạn đang sử dụng. Lệnh "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubectx"}]},{"type":"text","value":" sẽ rất hữu ích khi chúng ta tạo thêm một cụm ở phần 3 trên Google Kubernetes Engine."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Kubernetes Best Practices - Tổ chức Kubernetes với Namespace"}]}]},{"type":"element","tagName":"iframe","properties":{"width":560,"height":315,"src":"https://www.youtube-nocookie.com/embed/xpnZX3if9Tc","frameBorder":"0","allow":"accelerometer; encrypted-media; gyroscope; picture-in-picture","allowFullScreen":true},"children":[]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 2.03: Giữ chúng tách biệt"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo một namespace cho các ứng dụng trong các bài tập. Di chuyển \"Log output\" và \"Ping-pong\" vào namespace đó và sử dụng namespace này cho tất cả các bài tập sau. Bạn có thể làm theo tài liệu trong namespace mặc định."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 2.04: Project v1.1"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo một namespace cho project và di chuyển tất cả những gì liên quan đến project vào namespace đó."}]}]},{"type":"element","tagName":"h3","properties":{"id":"label","style":"position:relative;"},"children":[{"type":"text","value":"Label"},{"type":"element","tagName":"a","properties":{"href":"#label","ariaLabel":"label permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Label"}]},{"type":"text","value":" được sử dụng để tách biệt một ứng dụng với các ứng dụng khác trong cùng một namespace và để nhóm các tài nguyên khác nhau lại với nhau. Label là các cặp key-value và có thể được chỉnh sửa, thêm hoặc xóa bất cứ lúc nào. Label cũng có thể được thêm vào hầu hết mọi thứ."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Label giúp chúng ta (con người) nhận diện tài nguyên và Kubernetes có thể sử dụng chúng để thao tác trên một nhóm tài nguyên. Bạn có thể truy vấn các tài nguyên có một label nhất định. Label cũng được dùng bởi "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"selector"}]},{"type":"text","value":" để chọn một tập hợp đối tượng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy xem label trong file yaml "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Deployment"}]},{"type":"text","value":". Đây là file yaml đầu tiên chúng ta tạo ở đầu "},{"type":"element","tagName":"a","properties":{"href":"/part-1/1-first-deploy"},"children":[{"type":"text","value":"phần 1"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"deployment.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" apps/v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Deployment\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"dep\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"replicas"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matchLabels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"template"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong trường hợp này, file yaml bao gồm cả selector và label. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"selector"}]},{"type":"text","value":" và "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"matchLabels"}]},{"type":"text","value":" cho biết các chỉ dẫn của deployment sẽ áp dụng cho các pod có label "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"app: hashgenerator"}]},{"type":"text","value":". Như vậy, label là các cặp key-value. Phần metadata của template cũng bao gồm label với cặp "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"app: hashgenerator"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta có thể sử dụng cùng một label trên nhiều namespace và namespace sẽ giúp chúng không ảnh hưởng lẫn nhau."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nhóm các đối tượng bằng label rất đơn giản. Chúng ta chỉ cần thêm label vào file yaml hoặc dùng lệnh "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_label/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubectl label"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ví dụ, chúng ta có thể thêm label "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"importance=great"}]},{"type":"text","value":" cho một pod như sau:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl label po hashgenerator-dep-7b9b88f8bf-lvcv4 "},{"type":"element","tagName":"span","properties":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"importance"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"great\n  pod/hashgenerator-dep-7b9b88f8bf-lvcv4 labeled"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Label có thể được dùng để giới hạn kết quả của lệnh "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubectl get"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get pod -l "},{"type":"element","tagName":"span","properties":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"importance"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"great\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-7b9b88f8bf-lvcv4   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"/1     Running   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"          17m"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Với label, chúng ta thậm chí có thể di chuyển pod lên các node đã được gán label. Giả sử chúng ta có một số node có đặc điểm mà ta muốn tránh, ví dụ như mạng chậm hơn. Với label và "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"nodeSelector"}]},{"type":"text","value":" cấu hình trong deployment, chúng ta có thể làm điều đó. Đầu tiên, thêm "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"nodeSelector"}]},{"type":"text","value":" vào deployment rồi gán label cho node:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"deployment.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"..."}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodeSelector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"networkquality"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" excellent"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu pod đã chạy rồi, nó sẽ không tự động dừng pod để tránh thay đổi không mong muốn, thay vào đó một pod mới sẽ được lên lịch:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get po\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-548d4d6c8d-mbblj   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"/1     Running   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"          107s\n  hashgenerator-dep-7586cb6456-mktcl   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     Pending   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"          23s"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trạng thái của pod mới là \"Pending\" vì chưa có node nào có network quality là excellent."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tiếp theo, gán label cho "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"agent-1"}]},{"type":"text","value":" là node có network quality excellent và Kubernetes sẽ biết pod có thể chạy ở đâu:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$ kubectl label nodes k3d-k3s-default-agent-1 networkquality=excellent\n  node/k3d-k3s-default-agent-1 labeled\n\n$ kubectl get po\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-7b9b88f8bf-mktcl   1/1     Running   0          5m30s"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"nodeSelector"}]},{"type":"text","value":" là một công cụ khá thô. Nó rất phù hợp khi bạn muốn xác định các thuộc tính nhị phân, ví dụ "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"\"đừng chạy ứng dụng này nếu node đang dùng HDD thay vì SSD\""}]},{"type":"text","value":" bằng cách gán label cho node theo loại ổ đĩa. Có những công cụ tinh vi hơn mà bạn nên dùng khi có một cụm gồm nhiều loại máy khác nhau, từ "},{"type":"element","tagName":"a","properties":{"href":"https://gcn.com/articles/2020/01/07/af-kubernetes-f16.aspx","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"máy bay chiến đấu"}]},{"type":"text","value":" đến máy nướng bánh mì hoặc siêu máy tính. Kubernetes có thể dùng "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"affinity"}]},{"type":"text","value":" và "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"anti-affinity"}]},{"type":"text","value":" để ưu tiên node cho ứng dụng nào và "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"taint với toleration"}]},{"type":"text","value":" để pod có thể tránh một số node nhất định. Ví dụ, nếu một máy có độ trễ mạng cao và bạn không muốn nó chạy các tác vụ cần độ trễ thấp."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Xem thêm "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"affinity và anti-affinity"}]},{"type":"text","value":" và "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"taint và toleration"}]},{"type":"text","value":" để biết thêm chi tiết. Chúng ta sẽ không gán pod vào node cụ thể trong khóa học này vì cụm của chúng ta là đồng nhất."}]}]},"html":"<div><text-box variant='learningObjectives' name='Mục tiêu học tập'><p>Sau phần này bạn</p><ul>\n<li>biết các phương pháp tổ chức một cụm</li>\n<li>biết cách giới hạn pod vào các node cụ thể</li>\n</ul></text-box><p>Như bạn có thể tưởng tượng, có thể sẽ có rất nhiều tài nguyên bên trong một cụm. Thực tế, tại thời điểm viết tài liệu này, Kubernetes hỗ trợ hơn 100.000 pod trong một cụm duy nhất.</p><h3 id=\"namespace\" style=\"position:relative;\">Namespace<a href=\"#namespace\" aria-label=\"namespace permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p><a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\" target=\"_blank\" rel=\"noopener noreferrer\">Namespace</a> được sử dụng để tách biệt các tài nguyên. Một công ty sử dụng một cụm nhưng có nhiều dự án có thể dùng namespace để chia cụm thành các cụm ảo, mỗi dự án một namespace. Thông thường nhất, namespace được dùng để tách các môi trường như production, testing, staging. Bản ghi DNS cho service sẽ bao gồm namespace nên bạn vẫn có thể cho các project giao tiếp với nhau nếu cần thông qua địa chỉ service.namespace. Ví dụ, nếu một service tên là <em>cat-pictures</em> nằm trong namespace <em>ns-test</em>, nó có thể được tìm thấy từ các namespace khác qua <a href=\"http://cat-pictures.ns-test\" target=\"_blank\" rel=\"noopener noreferrer\">http://cat-pictures.ns-test</a>.</p><p>Truy cập namespace với kubectl được thực hiện bằng cờ <code class=\"language-text\">-n</code>. Ví dụ, bạn có thể xem namespace kube-system có gì với</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get pods -n kube-system</code></pre></div><p>Để xem tất cả mọi thứ, bạn có thể dùng <code class=\"language-text\">--all-namespaces</code>.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get all --all-namespaces</code></pre></div><p>Namespace nên được giữ tách biệt - ví dụ bạn có thể chạy tất cả các ví dụ và làm bài tập của khóa học này trong một cụm dùng chung với phần mềm quan trọng, nhưng đó không phải là ý hay. Quản trị viên nên đặt <a href=\"https://kubernetes.io/docs/concepts/policy/resource-quotas/\" target=\"_blank\" rel=\"noopener noreferrer\">ResourceQuota</a> cho namespace đó để bạn có thể chạy mọi thứ an toàn ở đó. Chúng ta sẽ tìm hiểu về giới hạn và yêu cầu tài nguyên sau.</p><p>Tạo một namespace chỉ cần một dòng lệnh (<code class=\"language-text\">kubectl create namespace example-namespace</code>). Bạn có thể chỉ định namespace sử dụng bằng cách thêm vào phần metadata của file yaml.</p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ...</span>\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> example<span class=\"token punctuation\">-</span>namespace\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> example\n<span class=\"token comment\"># ...</span></code></pre></div><p>Nếu bạn thường xuyên sử dụng một namespace cụ thể, bạn có thể đặt namespace mặc định với <code class=\"language-text\">kubectl config set-context --current --namespace=&lt;name&gt;</code>.</p><p>Việc thay đổi namespace mặc định với lệnh trên khá bất tiện. May mắn thay, có một công cụ cộng đồng là <em>kubens</em>, giúp liệt kê các namespace hiện có và chuyển đổi namespace mặc định dễ dàng. Hãy cài đặt ngay <a href=\"https://github.com/ahmetb/kubectx\" target=\"_blank\" rel=\"noopener noreferrer\">kubectx + kubens</a>, ngoài <em>kubens</em> còn có lệnh <em>kubectx</em> để chuyển đổi cụm bạn đang sử dụng. Lệnh <em>kubectx</em> sẽ rất hữu ích khi chúng ta tạo thêm một cụm ở phần 3 trên Google Kubernetes Engine.</p><p><strong>Kubernetes Best Practices - Tổ chức Kubernetes với Namespace</strong></p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/xpnZX3if9Tc\" frameborder=\"0\" allow=\"accelerometer; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe><exercise name='Exercise 2.03: Giữ chúng tách biệt'><p>Tạo một namespace cho các ứng dụng trong các bài tập. Di chuyển \"Log output\" và \"Ping-pong\" vào namespace đó và sử dụng namespace này cho tất cả các bài tập sau. Bạn có thể làm theo tài liệu trong namespace mặc định.</p></exercise><exercise name='Exercise 2.04: Project v1.1'><p>Tạo một namespace cho project và di chuyển tất cả những gì liên quan đến project vào namespace đó.</p></exercise><h3 id=\"label\" style=\"position:relative;\">Label<a href=\"#label\" aria-label=\"label permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p><a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/\" target=\"_blank\" rel=\"noopener noreferrer\">Label</a> được sử dụng để tách biệt một ứng dụng với các ứng dụng khác trong cùng một namespace và để nhóm các tài nguyên khác nhau lại với nhau. Label là các cặp key-value và có thể được chỉnh sửa, thêm hoặc xóa bất cứ lúc nào. Label cũng có thể được thêm vào hầu hết mọi thứ.</p><p>Label giúp chúng ta (con người) nhận diện tài nguyên và Kubernetes có thể sử dụng chúng để thao tác trên một nhóm tài nguyên. Bạn có thể truy vấn các tài nguyên có một label nhất định. Label cũng được dùng bởi <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors\" target=\"_blank\" rel=\"noopener noreferrer\">selector</a> để chọn một tập hợp đối tượng.</p><p>Hãy xem label trong file yaml <em>Deployment</em>. Đây là file yaml đầu tiên chúng ta tạo ở đầu <a href=\"/part-1/1-first-deploy\">phần 1</a>:</p><p><strong>deployment.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hashgenerator<span class=\"token punctuation\">-</span>dep\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hashgenerator\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hashgenerator\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hashgenerator\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app1<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64</code></pre></div><p>Trong trường hợp này, file yaml bao gồm cả selector và label. <em>selector</em> và <em>matchLabels</em> cho biết các chỉ dẫn của deployment sẽ áp dụng cho các pod có label <em>app: hashgenerator</em>. Như vậy, label là các cặp key-value. Phần metadata của template cũng bao gồm label với cặp <em>app: hashgenerator</em>.</p><p>Chúng ta có thể sử dụng cùng một label trên nhiều namespace và namespace sẽ giúp chúng không ảnh hưởng lẫn nhau.</p><p>Nhóm các đối tượng bằng label rất đơn giản. Chúng ta chỉ cần thêm label vào file yaml hoặc dùng lệnh <a href=\"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_label/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl label</a>.</p><p>Ví dụ, chúng ta có thể thêm label <em>importance=great</em> cho một pod như sau:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl label po hashgenerator-dep-7b9b88f8bf-lvcv4 <span class=\"token assign-left variable\">importance</span><span class=\"token operator\">=</span>great\n  pod/hashgenerator-dep-7b9b88f8bf-lvcv4 labeled</code></pre></div><p>Label có thể được dùng để giới hạn kết quả của lệnh <em>kubectl get</em>:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get pod -l <span class=\"token assign-left variable\">importance</span><span class=\"token operator\">=</span>great\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-7b9b88f8bf-lvcv4   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          17m</code></pre></div><p>Với label, chúng ta thậm chí có thể di chuyển pod lên các node đã được gán label. Giả sử chúng ta có một số node có đặc điểm mà ta muốn tránh, ví dụ như mạng chậm hơn. Với label và <a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector\" target=\"_blank\" rel=\"noopener noreferrer\">nodeSelector</a> cấu hình trong deployment, chúng ta có thể làm điều đó. Đầu tiên, thêm <em>nodeSelector</em> vào deployment rồi gán label cho node:</p><p><strong>deployment.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token punctuation\">...</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hashgenerator\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app1<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      <span class=\"token key atrule\">nodeSelector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">networkquality</span><span class=\"token punctuation\">:</span> excellent</code></pre></div><p>Nếu pod đã chạy rồi, nó sẽ không tự động dừng pod để tránh thay đổi không mong muốn, thay vào đó một pod mới sẽ được lên lịch:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get po\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-548d4d6c8d-mbblj   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          107s\n  hashgenerator-dep-7586cb6456-mktcl   <span class=\"token number\">0</span>/1     Pending   <span class=\"token number\">0</span>          23s</code></pre></div><p>Trạng thái của pod mới là \"Pending\" vì chưa có node nào có network quality là excellent.</p><p>Tiếp theo, gán label cho <em>agent-1</em> là node có network quality excellent và Kubernetes sẽ biết pod có thể chạy ở đâu:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ kubectl label nodes k3d-k3s-default-agent-1 networkquality=excellent\n  node/k3d-k3s-default-agent-1 labeled\n\n$ kubectl get po\n  NAME                                 READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-7b9b88f8bf-mktcl   1/1     Running   0          5m30s</code></pre></div><p><em>nodeSelector</em> là một công cụ khá thô. Nó rất phù hợp khi bạn muốn xác định các thuộc tính nhị phân, ví dụ <em>\"đừng chạy ứng dụng này nếu node đang dùng HDD thay vì SSD\"</em> bằng cách gán label cho node theo loại ổ đĩa. Có những công cụ tinh vi hơn mà bạn nên dùng khi có một cụm gồm nhiều loại máy khác nhau, từ <a href=\"https://gcn.com/articles/2020/01/07/af-kubernetes-f16.aspx\" target=\"_blank\" rel=\"noopener noreferrer\">máy bay chiến đấu</a> đến máy nướng bánh mì hoặc siêu máy tính. Kubernetes có thể dùng <a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/\" target=\"_blank\" rel=\"noopener noreferrer\">affinity</a> và <em>anti-affinity</em> để ưu tiên node cho ứng dụng nào và <a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/\" target=\"_blank\" rel=\"noopener noreferrer\">taint với toleration</a> để pod có thể tránh một số node nhất định. Ví dụ, nếu một máy có độ trễ mạng cao và bạn không muốn nó chạy các tác vụ cần độ trễ thấp.</p><p>Xem thêm <a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity\" target=\"_blank\" rel=\"noopener noreferrer\">affinity và anti-affinity</a> và <a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/\" target=\"_blank\" rel=\"noopener noreferrer\">taint và toleration</a> để biết thêm chi tiết. Chúng ta sẽ không gán pod vào node cụ thể trong khóa học này vì cụm của chúng ta là đồng nhất.</p></div>","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"},"fileAbsolutePath":"/home/runner/work/dwk2024/dwk2024/data/part-2/2-organizing-a-cluster-vi.md"},"allPages":{"edges":[{"node":{"id":"7e706a38-3828-5118-bdec-3705a319a1b0","frontmatter":{"path":"/faq-vi","title":"Câu hỏi thường gặp"}}},{"node":{"id":"5225f2a2-20f9-50ce-93ac-7b38f3105103","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"e1ed6713-5992-5f7f-95a1-17efd97f57d8","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"52d4cd1d-eb14-54f3-a18a-ef84b67c320d","frontmatter":{"path":"/index-en","title":"Homepage"}}},{"node":{"id":"3102d88f-7297-56fb-af03-27d1079fffd1","frontmatter":{"path":"/","title":"Trang chủ"}}},{"node":{"id":"c92ea568-3384-5ff8-8dfa-b9015597780d","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"5e6b6ee0-b381-53f0-b84c-af378792b131","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"58688080-4aa8-54e6-8b8b-02de1c4f6410","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"04c5ddbd-7839-580f-82da-bc9fdbb49f84","frontmatter":{"path":"/known-problems-solutions","title":"Các vấn đề bạn có thể gặp phải"}}},{"node":{"id":"d9c993b6-f6b4-59a1-b119-f3b7218eec6b","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"8a3ee5be-7557-5fcd-954b-2351e74cd585","frontmatter":{"path":"/part-0/1-intro-vi","title":"Giới thiệu khóa học"}}},{"node":{"id":"23082016-7bbd-5215-8485-4ffccbf3ea1a","frontmatter":{"path":"/part-0/1-intro","title":"Course Introduction"}}},{"node":{"id":"771eaa93-2ef2-5e0f-9e1e-55914c67c4ac","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"fe0342aa-a4c5-5b44-8591-71eb27f1a287","frontmatter":{"path":"/part-1/2-introduction-to-debugging-vi","title":"Giới thiệu về Debugging"}}},{"node":{"id":"1c236933-7ad5-5b61-8c07-07db3822d55a","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"7fc5c062-6b94-53ec-9aaa-adca66ce672e","frontmatter":{"path":"/part-1/5-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"3c788edf-62db-5e86-9366-17b53eda9244","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"46a4a0e4-d131-537d-aa72-5b6726163a7d","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"}}},{"node":{"id":"fd467661-6b24-545f-904c-52f4a7ade6b7","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"56110eda-875d-5bd9-a400-5bd5a009df7f","frontmatter":{"path":"/part-2/5-monitoring-vi","title":"Giám sát"}}},{"node":{"id":"8f3387b0-ec6e-5a86-982a-e52780d911f9","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"06173ac4-c2f8-57df-8dc8-450b5c2bb695","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"8c3d747d-4f87-5a46-99ac-dfd0af5a893b","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"79f1cddb-6995-51c2-bf98-2adc13de9b13","frontmatter":{"path":"/part-2/6-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8ed3365b-b788-5806-8ec5-bec3cb0f94c8","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"8d9fd774-9dbe-5cca-8395-9226fcf82c4a","frontmatter":{"path":"/part-3/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"b98b2895-6c9d-5234-939d-2f547cbf8a06","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"4dd8302d-d170-5d38-8198-4d0947322bbc","frontmatter":{"path":"/part-4/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"0045695d-e541-5acc-b4b8-551023d01733","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"29bec4f5-8a0b-580d-ac84-9dbbd1d7152e","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"a917b24d-df2b-5199-ac98-cd0f7560c63f","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"eb339401-26c8-594c-98fd-2f30a95275cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"}}},{"node":{"id":"2318c18f-86e6-5a4e-958a-d1c38f8615cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"1d8ff75c-065b-565d-9ceb-01b9a276ae7a","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"781bd207-902e-59a2-a752-4958c2c93fb0","frontmatter":{"path":"/part-5/5-summary-vi","title":"Tóm tắt và kết thúc"}}},{"node":{"id":"306c87f3-9adb-5d8b-a3ce-072f8e6cfa43","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"829fd216-f995-5a77-b201-bb971aec73b4","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams-vi","title":"Kubernetes qua ba sơ đồ"}}},{"node":{"id":"98132cca-4dc3-5942-a6f4-1da87bc81a23","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams","title":"Kubernetes in three diagrams"}}},{"node":{"id":"8931bcb7-c40e-5d57-aa80-c4333972fbb8","frontmatter":{"path":"/part-1/3-introduction-to-networking-vi","title":"Giới thiệu về Mạng"}}},{"node":{"id":"90b8e83a-9d55-550a-908a-316708ce7f8c","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"4fe00c0a-bb17-5d4c-8202-750493a755c9","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"}}},{"node":{"id":"6cc3be66-6091-58fc-bcbd-1f27f9473f85","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"b53df746-c24f-57e3-a9f3-d6d621697689","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"}}},{"node":{"id":"d5206d16-d2fe-51fd-8acd-d85ecf0be257","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"15be3d7c-b0b7-5bce-b3bf-8cec39d54630","frontmatter":{"path":"/part-2/3-configuring-applications-vi","title":"Cấu hình ứng dụng"}}},{"node":{"id":"e4534a9d-fb84-5d1f-83f0-35055feb0da7","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"02389078-a12f-561a-8a54-fa99a6950b92","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs-vi","title":"StatefulSet và Job"}}},{"node":{"id":"466aa711-527b-55a0-871b-13468e65d344","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"bea18f34-dcdc-59b8-ba24-3011680a0c58","frontmatter":{"path":"/part-3/1-introduction-to-gke-vi","title":"Giới thiệu về Google Kubernetes Engine"}}},{"node":{"id":"0049e57f-0bc7-5689-9169-43848a972877","frontmatter":{"path":"/part-3/2-deployment-pipeline-vi","title":"Quy trình Triển khai (Deployment Pipeline)"}}},{"node":{"id":"61f18dc7-1abf-5c75-9b54-0cee11c76a40","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"7dfec8c7-8ccb-50da-949d-ebd1de395dc4","frontmatter":{"path":"/part-3/3-gke-features-vi","title":"Các tính năng của GKE"}}},{"node":{"id":"423cbc46-2dfa-57e6-9dc5-761a93729600","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"84db9628-b3df-5ca1-9d3d-5924e02ae549","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"46f9ce68-5ccd-5787-bd59-03852ad6fdcb","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"6df9c7be-f930-5827-a39c-0c1698b23600","frontmatter":{"path":"/part-4/3-gitops-vi","title":"Triển khai GitOps"}}},{"node":{"id":"0e981ec1-99e0-5005-ba9f-4f626a81b7ce","frontmatter":{"path":"/part-5/1-kubernetes-internals-vi","title":"Bên trong Kubernetes"}}},{"node":{"id":"31927db3-2182-55c7-b680-663754461d14","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"da1f8069-17bc-5c8e-9310-117bcedf5acf","frontmatter":{"path":"/part-5/2-custom-resource-definitions-vi","title":"Định nghĩa Tài nguyên Tùy chỉnh (Custom Resource Definitions)"}}},{"node":{"id":"ccefb04a-5790-57f6-869b-d255b2203667","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"68c64f9f-c9a5-544b-bafb-b061665cacd0","frontmatter":{"path":"/part-5/3-service-mesh-vi","title":"Service Mesh"}}},{"node":{"id":"20ceed4e-761d-54d4-9acf-2669eac533c6","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"97ead58a-8493-5fdd-808e-d4a56de573b0","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"6f4f18ce-5aa9-5bb5-9d74-0a631a78e6b3","frontmatter":{"path":"/part-4/2-messaging-systems-vi","title":"Hệ thống nhắn tin"}}},{"node":{"id":"c179c521-bb62-52bd-808b-d4869df5302a","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus-vi","title":"Chiến lược cập nhật và Prometheus"}}},{"node":{"id":"898b0354-f1a2-5664-97de-d84b16018395","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"6981a9d7-619d-51a9-9490-74bc77c0f55b","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}},{"node":{"id":"a17c4c44-7396-543f-b6b4-7adf57808aa8","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}