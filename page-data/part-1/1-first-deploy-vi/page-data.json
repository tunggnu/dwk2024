{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-1/1-first-deploy-vi","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mục tiêu học tập"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau phần này bạn"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"có thể tạo và chạy một cụm Kubernetes cục bộ với k3d"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"có thể triển khai một ứng dụng đơn giản lên Kubernetes"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"h2","properties":{"id":"microservices-la-gi","style":"position:relative;"},"children":[{"type":"text","value":"Microservices là gì?"},{"type":"element","tagName":"a","properties":{"href":"#microservices-la-gi","ariaLabel":"microservices la gi permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong khóa học này, chúng ta sẽ nói về microservices và tạo ra các microservices. Trước khi bắt đầu với bất cứ điều gì khác, chúng ta cần định nghĩa microservice là gì. Hiện tại, có rất nhiều định nghĩa khác nhau về microservices."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đối với khóa học này, chúng ta sẽ chọn định nghĩa của Sam Newman trong "},{"type":"element","tagName":"a","properties":{"href":"https://www.oreilly.com/library/view/building-microservices/9781491950340/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Building Microservices"}]},{"type":"text","value":": \""},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Microservices là các dịch vụ nhỏ, tự trị, phối hợp cùng nhau"}]},{"type":"text","value":"\". Đối lập với microservice là một dịch vụ tự chứa và độc lập gọi là "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Monolithic_application","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Monolith"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi nào nên sử dụng microservices? Trong video dưới đây, nơi Sam Newman và Martin Fowler thảo luận về microservices, câu trả lời là: \"Khi bạn thực sự có lý do chính đáng\"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nó cũng bao gồm 3 lý do hàng đầu để sử dụng microservices:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Triển khai độc lập không downtime"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Cô lập dữ liệu và xử lý xung quanh dữ liệu đó"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Sử dụng microservices để phản ánh cấu trúc tổ chức"}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Khi nào nên sử dụng Microservices (và khi nào không nên!)"}]}]},{"type":"element","tagName":"iframe","properties":{"width":560,"height":315,"src":"https://www.youtube-nocookie.com/embed/GBTdnfD6s5Q","frameBorder":"0","allow":"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowFullScreen":true},"children":[]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một ứng dụng theo kiến trúc microservices được cấu thành từ nhiều, thậm chí hàng chục, dịch vụ hoạt động độc lập. Việc quản lý và vận hành một hệ thống phức tạp như vậy là một thách thức. Đây chính là lúc Kubernetes phát huy vai trò của mình."}]},{"type":"element","tagName":"h2","properties":{"id":"kubernetes-la-gi","style":"position:relative;"},"children":[{"type":"text","value":"Kubernetes là gì?"},{"type":"element","tagName":"a","properties":{"href":"#kubernetes-la-gi","ariaLabel":"kubernetes la gi permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Giả sử bạn có 3 tiến trình và 2 máy tính không thể chạy cùng lúc cả 3 tiến trình. Bạn sẽ giải quyết vấn đề này như thế nào?"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn sẽ phải bắt đầu bằng việc quyết định 2 tiến trình nào sẽ chạy cùng một máy và tiến trình nào sẽ chạy ở máy khác. Làm thế nào để phân bổ chúng? Bằng cách cho tiến trình tốn nhiều tài nguyên nhất và ít tài nguyên nhất cùng một máy, hay để tiến trình tốn nhiều tài nguyên nhất chạy riêng? Có thể bạn muốn thêm một tiến trình và giờ phải tổ chức lại tất cả. Điều gì xảy ra khi bạn có nhiều hơn 2 máy và nhiều hơn 3 tiến trình? Một trong các tiến trình đang chiếm hết bộ nhớ và bạn cần tách nó ra khỏi \"ứng dụng ngân hàng quan trọng\". Chúng ta nên ảo hóa mọi thứ? Containers sẽ giải quyết vấn đề đó, đúng không? Bạn sẽ chuyển tiến trình quan trọng nhất sang máy mới? Có thể một số tiến trình cần giao tiếp với nhau và giờ bạn phải xử lý mạng lưới. Nếu một máy bị hỏng thì sao? Còn kế hoạch đi uống bia thủ công vào thứ Sáu của bạn thì sao?"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sẽ thế nào nếu bạn chỉ cần định nghĩa \"Tiến trình này nên có 6 bản sao sử dụng X lượng tài nguyên.\" và có 2..N máy tính hoạt động như một thực thể duy nhất để đáp ứng yêu cầu của bạn? Đó chỉ là một trong những điều mà Kubernetes làm được."}]},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"element","tagName":"p","properties":{"lang":"en","dir":"ltr"},"children":[{"type":"text","value":"Về bản chất, Kubernetes là tổng hợp tất cả các bash script và các best practice mà hầu hết các quản trị viên hệ thống sẽ tự xây dựng theo thời gian, được trình bày như một hệ thống duy nhất phía sau một tập hợp API khai báo."}]},{"type":"text","value":"— Kelsey Hightower (@kelseyhightower) "},{"type":"element","tagName":"a","properties":{"href":"https://twitter.com/kelseyhightower/status/1125440400355782657?ref_src=twsrc%5Etfw"},"children":[{"type":"text","value":"Ngày 6 tháng 5, 2019"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hoặc chính thức hơn:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"“Kubernetes (K8s) là một hệ thống mã nguồn mở để tự động hóa việc triển khai, mở rộng và quản lý các ứng dụng container hóa. Nó nhóm các container tạo thành một ứng dụng thành các đơn vị logic để dễ dàng quản lý và khám phá.” - "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubernetes.io"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một hệ thống điều phối container như Kubernetes thường là cần thiết khi duy trì các ứng dụng container hóa. Trách nhiệm chính của một hệ thống điều phối là khởi động và dừng các container. Ngoài ra, chúng còn cung cấp mạng lưới giữa các container và giám sát sức khỏe. Thay vì phải thủ công chạy "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker run critical-bank-application"}]},{"type":"text","value":" mỗi khi ứng dụng bị crash, hoặc khởi động lại nếu nó không phản hồi, chúng ta muốn hệ thống tự động giữ cho ứng dụng luôn khỏe mạnh."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn có thể đã biết một hệ thống điều phối, "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"docker compose"}]},{"type":"text","value":", cũng thực hiện các nhiệm vụ tương tự: khởi động và dừng, mạng lưới và giám sát sức khỏe. Điều làm cho Kubernetes đặc biệt là bộ tính năng mạnh mẽ để tự động hóa tất cả những điều đó."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy đọc "},{"type":"element","tagName":"a","properties":{"href":"https://cloud.google.com/kubernetes-engine/kubernetes-comic/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"truyện tranh này"}]},{"type":"text","value":" và xem video dưới đây để có cái nhìn nhanh. Bạn có thể muốn xem lại chúng sau phần này!"}]},{"type":"element","tagName":"iframe","properties":{"width":560,"height":315,"src":"https://www.youtube-nocookie.com/embed/Q4W8Z-D-gcQ","frameBorder":"0","allow":"accelerometer; encrypted-media; gyroscope; picture-in-picture","allowFullScreen":true},"children":[]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta sẽ bắt đầu với một bản phân phối Kubernetes nhẹ. "},{"type":"element","tagName":"a","properties":{"href":"https://k3s.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"K3s - 5 nhỏ hơn K8s"}]},{"type":"text","value":", cung cấp cho chúng ta một cụm Kubernetes thực sự có thể chạy trong các container bằng "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/rancher/k3d","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"k3d"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"h3","properties":{"id":"cụm-kubernetes-với-k3d","style":"position:relative;"},"children":[{"type":"text","value":"Cụm Kubernetes với k3d"},{"type":"element","tagName":"a","properties":{"href":"#c%E1%BB%A5m-kubernetes-v%E1%BB%9Bi-k3d","ariaLabel":"cụm kubernetes với k3d permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"h4","properties":{"id":"cụm-la-gi","style":"position:relative;"},"children":[{"type":"text","value":"Cụm là gì?"},{"type":"element","tagName":"a","properties":{"href":"#c%E1%BB%A5m-la-gi","ariaLabel":"cụm la gi permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cụm là một nhóm các máy, "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":", làm việc cùng nhau - trong trường hợp này, chúng là một phần của cụm Kubernetes. Cụm Kubernetes có thể có bất kỳ kích thước nào - một cụm một node sẽ bao gồm một máy chủ chứa control-plane của Kubernetes (cung cấp API và duy trì cụm) và cụm đó có thể mở rộng lên đến 5000 node, tính đến Kubernetes v1.18."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta sẽ sử dụng thuật ngữ \"server node\" để chỉ các node có control-plane và \"agent node\" để chỉ các node không có vai trò đó. Một cụm kubernetes cơ bản có thể trông như sau:"}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 501px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 25.65217391304348%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvElEQVQY002QyQqFUAxD/f9Pc6NbBxAVNy6cZ9E8TqHyLhTa3CZNG7Rtq33ftSyLxbquFp5v26ayLFUUheX/f57P86z7vpUkiQIAGs/z1PM8Oo7D6vd9DfNh0zSZABiPHnrhgF3XZYODYRiMRBFFkcZx/EQ94jhWlmVGRBQyHLYLw1BN05iBPM8VIMBn3/dmGTcIQkaMVVi3rusPw5Wvn6apuq4z7BP0m0Dwm7gLVmUAQe5D/Obumt6qqvQD7GV+0ueMkqYAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/c328f2e874d20b6c24ce9a902820cdcc/a0b58/without_k3d.webp 230w","/static/c328f2e874d20b6c24ce9a902820cdcc/bc10c/without_k3d.webp 460w","/static/c328f2e874d20b6c24ce9a902820cdcc/52d01/without_k3d.webp 501w"],"sizes":["(max-width:","501px)","100vw,","501px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/c328f2e874d20b6c24ce9a902820cdcc/81c8e/without_k3d.png 230w","/static/c328f2e874d20b6c24ce9a902820cdcc/08a84/without_k3d.png 460w","/static/c328f2e874d20b6c24ce9a902820cdcc/55811/without_k3d.png 501w"],"sizes":["(max-width:","501px)","100vw,","501px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/c328f2e874d20b6c24ce9a902820cdcc/55811/without_k3d.png","alt":"without k3d","title":"without k3d","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"h4","properties":{"id":"khởi-tạo-cụm-với-k3d","style":"position:relative;"},"children":[{"type":"text","value":"Khởi tạo cụm với k3d"},{"type":"element","tagName":"a","properties":{"href":"#kh%E1%BB%9Fi-t%E1%BA%A1o-c%E1%BB%A5m-v%E1%BB%9Bi-k3d","ariaLabel":"khởi tạo cụm với k3d permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta sẽ sử dụng k3d để tạo một nhóm các container Docker chạy k3s. Hướng dẫn cài đặt, hoặc ít nhất là liên kết đến chúng, nằm ở "},{"type":"element","tagName":"a","properties":{"href":"/part-0#installing-k3d"},"children":[{"type":"text","value":"phần 0"}]},{"type":"text","value":". Lý do sử dụng k3d là nó cho phép chúng ta tạo một cụm mà không cần lo lắng về máy ảo hay máy vật lý. Với k3d, cụm cơ bản của chúng ta sẽ trông như sau:"}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 501px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 45.21739130434783%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQoz52R6YqDUAyFff+XE1RaEbeCuBVr627VZvhSBId2/kwgJPfm5GQzyrKUcRyl7/sP5Z/45XIR3/elKIqv2K7rZFkW8TxPjPv9rqBhGD6U/7ZtJUkSJX08Hl+xkK7rKmEYikEH27bJ6/X6ZQFgkev1qp0ix9gRi5zPZzEY43a7aSdUa5pGFRBvJpimSbWua/1DdtyeQ5eO47wJqR4EgViWpRYABICyLFOgbduSpqkSUIzxGZGY67qao4R5nmt3aBzHSkLSPM/qP59PJdoPQowxdxy7ZQpwFNUOCdARlUnCJ4nLEcOSgI9ld2DA7jnY0+n0vjIglK6O/v7+yz++Eb1yFEW6Q0b/r7LnqqrENE35AVu/r5efOrC5AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/94502863777ec6cc601ad486f6de63b4/a0b58/with_k3d.webp 230w","/static/94502863777ec6cc601ad486f6de63b4/bc10c/with_k3d.webp 460w","/static/94502863777ec6cc601ad486f6de63b4/52d01/with_k3d.webp 501w"],"sizes":["(max-width:","501px)","100vw,","501px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/94502863777ec6cc601ad486f6de63b4/81c8e/with_k3d.png 230w","/static/94502863777ec6cc601ad486f6de63b4/08a84/with_k3d.png 460w","/static/94502863777ec6cc601ad486f6de63b4/55811/with_k3d.png 501w"],"sizes":["(max-width:","501px)","100vw,","501px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/94502863777ec6cc601ad486f6de63b4/55811/with_k3d.png","alt":"with k3d","title":"with k3d","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vì các node là container nên chúng ta sẽ cần cấu hình một chút để chúng hoạt động như mong muốn. Chúng ta sẽ làm điều đó sau. Việc tạo cụm Kubernetes của riêng chúng ta với k3d chỉ cần một lệnh duy nhất."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ k3d cluster create -a "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lệnh này tạo ra một cụm Kubernetes với 2 agent node. Vì chúng nằm trong Docker, bạn có thể xác nhận sự tồn tại của chúng bằng "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ docker "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ps"}]},{"type":"text","value":"\n  CONTAINER ID   IMAGE                            COMMAND                  CREATED          STATUS          PORTS                             NAMES\n  b25a9bb6c42f   ghcr.io/k3d-io/k3d-tools:5.4.1   "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/app/k3d-tools noop\""}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"56"}]},{"type":"text","value":" seconds ago   Up "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"55"}]},{"type":"text","value":" seconds                                     k3d-k3s-default-tools\n  19f992606131   ghcr.io/k3d-io/k3d-proxy:5.4.1   "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/bin/sh -c nginx-pr…\""}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"56"}]},{"type":"text","value":" seconds ago   Up "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"32"}]},{"type":"text","value":" seconds   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]},{"type":"text","value":"/tcp, "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"text","value":".0.0:50122-"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"6443"}]},{"type":"text","value":"/tcp   k3d-k3s-default-serverlb\n  7a8bf6a44099   rancher/k3s:v1.22.7-k3s1         "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/bin/k3d-entrypoint…\""}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"56"}]},{"type":"text","value":" seconds ago   Up "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"43"}]},{"type":"text","value":" seconds                                     k3d-k3s-default-agent-1\n  c85fbcbcf9b2   rancher/k3s:v1.22.7-k3s1         "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/bin/k3d-entrypoint…\""}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"56"}]},{"type":"text","value":" seconds ago   Up "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"43"}]},{"type":"text","value":" seconds                                     k3d-k3s-default-agent-0\n  7191a3bdae7a   rancher/k3s:v1.22.7-k3s1         "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/bin/k3d-entrypoint…\""}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"56"}]},{"type":"text","value":" seconds ago   Up "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"52"}]},{"type":"text","value":" seconds                                     k3d-k3s-default-server-0"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kéo sang trái một chút, bạn cũng sẽ thấy cổng 6443 được mở cho \"k3d-k3s-default-serverlb\", một proxy \"load balancer\" hữu ích, sẽ chuyển tiếp kết nối đến 6443 vào server node, và đó là cách chúng ta truy cập nội dung của cụm. Cổng trên máy của chúng ta, ví dụ 50122, được chọn ngẫu nhiên. Chúng ta có thể bỏ qua load balancer với "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"k3d cluster create -a 2 --no-lb"}]},{"type":"text","value":" và cổng sẽ mở trực tiếp đến server node. Có load balancer sẽ cung cấp cho chúng ta một số tính năng mà nếu không sẽ không có, nên hãy giữ nó."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"K3d cũng đã thiết lập một "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubeconfig"}]},{"type":"text","value":", một file dùng để tổ chức thông tin về các cụm, người dùng, namespace và cơ chế xác thực. Nội dung của file có thể xem bằng lệnh "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"k3d kubeconfig get k3s-default"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Công cụ khác mà chúng ta sẽ sử dụng trong khóa học này là "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":". Kubectl là công cụ dòng lệnh của Kubernetes và cho phép chúng ta tương tác với cụm. Kubectl sẽ đọc kubeconfig từ biến môi trường KUBECONFIG hoặc mặc định từ "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"~/.kube/config"}]},{"type":"text","value":" và sử dụng thông tin để kết nối với cụm. Nội dung bao gồm chứng chỉ, mật khẩu và địa chỉ API của cụm. Bạn có thể đặt context bằng "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl config use-context k3d-k3s-default"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Giờ kubectl sẽ có thể truy cập cụm"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl cluster-info\n  Kubernetes control plane is running at https://0.0.0.0:50122\n  CoreDNS is running at https://0.0.0.0:50122/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n  Metrics-server is running at https://0.0.0.0:50122/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta có thể thấy kubectl đang kết nối đến container "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"k3d-k3s-default-serverlb"}]},{"type":"text","value":" qua (trong trường hợp này) cổng 50122."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu bạn muốn dừng / khởi động lại cụm, chỉ cần chạy"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ k3d cluster stop\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0000"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Stopping cluster "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3s-default'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0011"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Stopped cluster "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3s-default'"}]},{"type":"text","value":"\n\n$ k3d cluster start\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0000"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Using the k3d-tools node to gather environment information\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0000"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting existing tools node k3d-k3s-default-tools"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0000"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-tools'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0001"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting new tools node"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0001"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-tools'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0003"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting cluster "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3s-default'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0003"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting servers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0003"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-server-0'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0010"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting agents"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0010"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-agent-1'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0011"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-agent-0'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0027"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting helpers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0027"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-serverlb'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0027"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Starting Node "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3d-k3s-default-tools'"}]},{"type":"text","value":"\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0035"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Injecting records "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" hostAliases "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"incl. host.k3d.internal"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" and "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"text","value":" network members into CoreDNS configmap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":".."}]},{"type":"text","value":".\n  INFO"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"0038"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" Started cluster "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'k3s-default'"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hiện tại, "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"chúng ta cần cụm đang chạy"}]},{"type":"text","value":", nhưng nếu muốn xóa cụm, bạn có thể chạy "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"k3d cluster delete"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"h2","properties":{"id":"triển-khai-dầu-tien","style":"position:relative;"},"children":[{"type":"text","value":"Triển khai đầu tiên"},{"type":"element","tagName":"a","properties":{"href":"#tri%E1%BB%83n-khai-d%E1%BA%A7u-tien","ariaLabel":"triển khai dầu tien permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"h3","properties":{"id":"chuẩn-bị-cho-lần-triển-khai-dầu-tien","style":"position:relative;"},"children":[{"type":"text","value":"Chuẩn bị cho lần triển khai đầu tiên"},{"type":"element","tagName":"a","properties":{"href":"#chu%E1%BA%A9n-b%E1%BB%8B-cho-l%E1%BA%A7n-tri%E1%BB%83n-khai-d%E1%BA%A7u-tien","ariaLabel":"chuẩn bị cho lần triển khai dầu tien permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trước khi có thể triển khai bất cứ thứ gì, chúng ta cần một ứng dụng nhỏ để triển khai. Trong suốt khóa học, bạn sẽ phát triển ứng dụng của riêng mình. Công nghệ sử dụng cho ứng dụng không quan trọng - trong ví dụ này chúng ta sẽ dùng "},{"type":"element","tagName":"a","properties":{"href":"https://nodejs.org/en/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Node.js"}]},{"type":"text","value":" nhưng ứng dụng mẫu cũng sẽ được cung cấp qua GitHub cũng như Docker Hub."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy khởi chạy một ứng dụng tạo và xuất ra một hash mỗi 5 giây."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tôi đã chuẩn bị sẵn một ứng dụng "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes-hy/material-example/tree/master/app1","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tại đây"}]},{"type":"text","value":", bạn có thể thử với "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker run jakousa/dwk-app1"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để triển khai một image, chúng ta cần cụm có thể truy cập image đó. Mặc định, Kubernetes được thiết kế để sử dụng với một registry. Chúng ta sẽ sử dụng registry quen thuộc "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Docker Hub"}]},{"type":"text","value":", mà chúng ta cũng đã dùng trong "},{"type":"element","tagName":"a","properties":{"href":"http://devopswithdocker.com/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"DevOps with Docker"}]},{"type":"text","value":". Nếu bạn chưa từng dùng Docker Hub, đó là nơi mà Docker client mặc định truy cập. Ví dụ khi bạn chạy "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker pull nginx"}]},{"type":"text","value":", image nginx đến từ Docker Hub. Xem khóa học "},{"type":"element","tagName":"a","properties":{"href":"https://devopswithdocker.com/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"DevOps for Docker"}]},{"type":"text","value":" để biết thêm chi tiết, ví dụ về việc push image lên Docker Hub nếu cần."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cũng có thể sử dụng image local với k3d, nhưng điều đó sẽ không hoạt động với các giải pháp không phải k3d. Nếu muốn thử dùng image local, hãy dùng "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"k3d image import <image-name>"}]},{"type":"text","value":". Sau đó bạn phải chỉnh sửa "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"imagePullPolicy"}]},{"type":"text","value":" của deployment từ mặc định "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Always"}]},{"type":"text","value":" thành "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"IfNotPresent"}]},{"type":"text","value":" hoặc "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Never"}]},{"type":"text","value":" để cho phép sử dụng image local. Deployment có thể chỉnh sửa sau khi tạo bằng "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl edit deployment <deployment-name>"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"text-box","properties":{"name":"Ứng dụng ví dụ","variant":"hint"},"children":[{"type":"text","value":"\nTrong tương lai, tài liệu sẽ sử dụng các ứng dụng được cung cấp trong các lệnh. Bạn có thể làm theo bằng cách thay đổi image thành ứng dụng của bạn. Hầu hết mọi thứ đều có trong cùng một repository "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes-hy/material-example"},"children":[{"type":"text","value":"https://github.com/kubernetes-hy/material-example"}]},{"type":"text","value":".\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Giờ chúng ta đã sẵn sàng để triển khai ứng dụng đầu tiên vào Kubernetes!"}]},{"type":"element","tagName":"h3","properties":{"id":"triển-khai","style":"position:relative;"},"children":[{"type":"text","value":"Triển khai"},{"type":"element","tagName":"a","properties":{"href":"#tri%E1%BB%83n-khai","ariaLabel":"triển khai permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để triển khai một ứng dụng, chúng ta cần tạo một đối tượng "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"deployment"}]},{"type":"text","value":" với image."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl create deployment hashgenerator-dep --image"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"jakousa/dwk-app1\n  deployment.apps/hashgenerator-dep created"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lệnh này tạo ra một vài thứ để chúng ta xem xét"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"một resource "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"deployment"}]},{"type":"text","value":" và"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"một resource "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/pods/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"pod"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"h4","properties":{"id":"pod-la-gi","style":"position:relative;"},"children":[{"type":"text","value":"Pod là gì?"},{"type":"element","tagName":"a","properties":{"href":"#pod-la-gi","ariaLabel":"pod la gi permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Pod"}]},{"type":"text","value":" là một lớp trừu tượng bao quanh một hoặc nhiều container. Pod cung cấp một ngữ cảnh cho 1..N container để chúng có thể chia sẻ lưu trữ và mạng. Nó rất giống với cách bạn đã sử dụng container để định nghĩa môi trường cho một tiến trình đơn. Có thể coi nó như một container của các container. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Hầu hết"}]},{"type":"text","value":" các quy tắc tương tự đều áp dụng: nó sẽ bị xóa nếu các container bên trong dừng chạy và các file chứa trong đó sẽ bị mất cùng với nó."}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 731px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 24.782608695652172%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVQY02WQS66DMAxFWWV30qp6k66jnbSrQUwRE4YIEEH8P+KnNHZ9U+jkRXJk5zrXJ3HCMKSmabiqKqrrmpVSXJYlS05y9tZac5IkF8/zzvM8o0+LDo3zPEfNRVGYrus4jmPlyMZS0DiOjICA6PsetWZZ67q+giD44+/S27bZ4VmW2TvGGJzTMAzsRFFkJCyRTCJpxkRO0xTkmoh4WZa77/vXwxC9ojMMQCjkBKFtW3KAjSfABDkMMRW5PP8gfAjh7TCcpsn2I/BdIP4ZypNDy0sEbtrxUdvLu+HTdd3Trv3rO3J81Qdh3Hh1gJHqOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/44b180d0bf8c0d75212b5e04fdb8f487/a0b58/pods.webp 230w","/static/44b180d0bf8c0d75212b5e04fdb8f487/bc10c/pods.webp 460w","/static/44b180d0bf8c0d75212b5e04fdb8f487/feeb6/pods.webp 731w"],"sizes":["(max-width:","731px)","100vw,","731px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/44b180d0bf8c0d75212b5e04fdb8f487/81c8e/pods.png 230w","/static/44b180d0bf8c0d75212b5e04fdb8f487/08a84/pods.png 460w","/static/44b180d0bf8c0d75212b5e04fdb8f487/6e9ba/pods.png 731w"],"sizes":["(max-width:","731px)","100vw,","731px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/44b180d0bf8c0d75212b5e04fdb8f487/6e9ba/pods.png","alt":"pods","title":"pods","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đọc tài liệu hoặc tìm kiếm trên internet không phải là cách duy nhất để tìm thông tin về các resource khác nhau của Kubernetes. Chúng ta có thể truy cập các giải thích đơn giản ngay từ dòng lệnh bằng lệnh "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl explain RESOURCE"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ví dụ, để có mô tả về Pod và các trường bắt buộc, chúng ta có thể dùng lệnh sau."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl explain pod\n  KIND:     Pod\n  VERSION:  v1\n\n  DESCRIPTION:\n       Pod là một tập hợp các container có thể chạy trên một host. Resource này được tạo bởi client và được lên lịch trên các host."}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong Kubernetes, tất cả các thực thể tồn tại đều được gọi là "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/overview/working-with-objects/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"object"}]},{"type":"text","value":". Bạn có thể liệt kê tất cả object của một resource với "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl get RESOURCE"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get pods\n  NAME                               READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-6965c5c7-2pkxc   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"/1     Running   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"          2m1s"}]}]}]},{"type":"element","tagName":"h4","properties":{"id":"deployment-resource-la-gi","style":"position:relative;"},"children":[{"type":"text","value":"Deployment resource là gì?"},{"type":"element","tagName":"a","properties":{"href":"#deployment-resource-la-gi","ariaLabel":"deployment resource la gi permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một resource "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"deployment"}]},{"type":"text","value":" chịu trách nhiệm triển khai. Nó là cách để nói với Kubernetes bạn muốn container nào, chúng nên chạy như thế nào và bao nhiêu bản sao nên chạy."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi chúng ta tạo Deployment, chúng ta cũng tạo một object "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"ReplicaSet"}]},{"type":"text","value":". ReplicaSet dùng để chỉ định số lượng bản sao của một Pod bạn muốn. Nó sẽ xóa hoặc tạo Pod cho đến khi số lượng Pod bạn muốn đang chạy. ReplicaSet được quản lý bởi Deployment và bạn không cần phải tự định nghĩa hay chỉnh sửa chúng. Nếu muốn quản lý số lượng replica, bạn có thể chỉnh sửa Deployment và nó sẽ tự động cập nhật ReplicaSet."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn có thể xem các deployment như sau:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl get deployments\n  NAME                READY   UP-TO-DATE   AVAILABLE   AGE\n  hashgenerator-dep   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"/1     "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"            "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"           54s"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"1/1 replica đã sẵn sàng! Chúng ta sẽ thử nhiều replica hơn sau. Nếu trạng thái của bạn không giống như vậy, hãy kiểm tra "},{"type":"element","tagName":"a","properties":{"href":"/known-problems-solutions#first-deployment"},"children":[{"type":"text","value":"trang này"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để xem output, chúng ta có thể chạy "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl logs -f hashgenerator-dep-6965c5c7-2pkxc"}]}]},{"type":"element","tagName":"text-box","properties":{"name":"Tự động hoàn thành","variant":"hint"},"children":[{"type":"text","value":"\nBạn có thể dùng `source <(kubectl completion bash)` để tiết kiệm rất nhiều thời gian. Thêm nó vào .bashrc để tự động tải. (Cũng có cho zsh với `source <(kubectl completion zsh)`). Nếu bạn chưa từng dùng completion, hãy đọc "},{"type":"element","tagName":"a","properties":{"href":"https://iridakos.com/programming/2018/03/01/bash-programmable-completion-tutorial"},"children":[{"type":"text","value":"hướng dẫn này"}]},{"type":"text","value":". Thông tin thêm về lệnh kubectl completion có thể tìm thấy "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_completion/"},"children":[{"type":"text","value":"tại đây"}]},{"type":"text","value":".\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một danh sách hữu ích các lệnh docker-cli được chuyển sang kubectl có tại "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/docker-cli-to-kubectl/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://kubernetes.io/docs/reference/kubectl/docker-cli-to-kubectl/"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 1.01: Bắt đầu"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Bài tập có thể làm với bất kỳ ngôn ngữ và framework nào bạn muốn."}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo một ứng dụng sinh ra một chuỗi ngẫu nhiên khi khởi động, lưu chuỗi này vào bộ nhớ, và xuất ra mỗi 5 giây kèm timestamp. Ví dụ:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43\n2020-03-30T12:15:22.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Triển khai nó vào cụm Kubernetes của bạn và xác nhận rằng nó đang chạy với "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl logs ..."}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn sẽ tiếp tục xây dựng ứng dụng này trong các bài tập tiếp theo. Ứng dụng này sẽ được gọi là \"Log output\"."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 1.02: Dự án v0.1"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Dự án có thể làm với bất kỳ ngôn ngữ và framework nào bạn muốn"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dự án sẽ là một ứng dụng todo đơn giản với các tính năng quen thuộc: tạo, đọc, cập nhật và xóa (CRUD). Chúng ta sẽ phát triển nó trong suốt các phần của khóa học. Kiểm tra tiêu đề bài tập để biết \"Project vX.Y\" là về xây dựng dự án."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Todo là một đoạn văn bản như \"Tôi cần dọn nhà\" có thể ở trạng thái chưa hoàn thành hoặc đã hoàn thành."}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 453px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 110.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADZElEQVQ4y5VUSUyTQRQeW1yOLlfsUWxsI/GAidGQEImcDE20WG8QjcDJiHjhwHIR9Wh6ElNTLGkpiknTJi490YYDS1nLTiiUnbb0L9CmYMbvjX+bRv0RJnmZ5e3fe28Y+8daW1tT0760tGTb2NjgQ0NDqcHBwRTuHDwn8TjnanbUtbi4KITX19e/7O3t8UAgICgajfJYLOY5tkEIn6A9FAo9W1lZ+ToyMtKFCLuWl5e/4f4iV+Z/S5UhjUajUhLS6/WqXNnDDOZlqLCw8KSSUGlpaV6u7JFTBpZPd3Z2PMDRsbu768DuWV1dfX6clMWKx+PCayKRcEORp1IpDsNcPv84tCgNDQ2svr6eDQ8PZ98kSRLCiMYs/V4hOAkhwsTW1tY72aBKrVZnMmJ1dXXCFoOQirzlUjgcFkB3d3ef9/v9mt7e3nwin8+ncblcF4iH9vlLj2wppl1cXHxGiWcwGE4rKqLH7iC1J5iISkxBJaahGm+3iDcxMVGCt1pQFREavXZubu428cbHx28gk+rt7e1KUBX68zH07hJePgIbDxwMAXwkEnGQ0tjYmCuZTNKdRk7wJicnvcTb3NxspztSz+phD1JFvel0ms/Pz/OpqSkuC7WT0ujo6CeaX0TKg8EgR4S0e+SxfE+yKJJwSAujGWD9/f03EboRAgZ4LUfvGTG310hpenq6CApGUDnxoFixsLBwXXZ2FWcjvQMuA873BgYGShSxLSsrUwTeZDKdUlR0u92X0BIFwKagp6dHi7bQtbW1nSOezWbLx5sOWWj7+vq0aBud3W6/SDyLxXIWslfwpsX3dplseL3eAgYgJQAv4WeRgEHk4OCAA4IHpIRUrQQ6cIyiaFEUkPC1Ew8pVkDvJ6YpBr04RlPa39+XqMs5FQVGspWEoUfyxHynOxUGX5fgwYCfeDMzMzV0hxFOjjKL/jwzQDUDXDMK8xaRfED6RaQ0OztbgUK0wlgjHDYiuleQN8kGdQjgJWa8ERPShEybEUjzoZ8E+vA+lF7DaBMRHL6Bs4fEA256pN2Kt2bItGA4WpBJixjyPwlpiL8Q2HgoDWruzG+DSHzEQ9/WZOAiyqZstVqZ0+lkDoeDdXZ2so6ODgJcLffhR2pm7Ek0fZIaGKP3WY7eBJhoIJJIPw0o0rinfwEP3Vesugk5lwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/42cd00819d1db5789826b38bb7f95328/a0b58/project.webp 230w","/static/42cd00819d1db5789826b38bb7f95328/2430e/project.webp 453w"],"sizes":["(max-width:","453px)","100vw,","453px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/42cd00819d1db5789826b38bb7f95328/81c8e/project.png 230w","/static/42cd00819d1db5789826b38bb7f95328/2108e/project.png 453w"],"sizes":["(max-width:","453px)","100vw,","453px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/42cd00819d1db5789826b38bb7f95328/2108e/project.png","alt":"Quá trình phát triển dự án","title":"Quá trình phát triển dự án","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Các đường nét đứt phân tách các khác biệt lớn qua các phần của khóa học. Một số bài tập không được đưa vào hình. Kết nối giữa hầu hết các pod cũng không được đưa vào. Bạn có thể làm theo cách bạn muốn."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy nhớ điều này nếu bạn muốn tránh làm nhiều việc hơn cần thiết."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bắt đầu thôi!"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo một web server xuất ra \"Server started in port NNNN\" khi khởi động và triển khai nó vào cụm Kubernetes của bạn. Hãy đảm bảo rằng biến môi trường PORT có thể được sử dụng để chọn port đó. Bạn sẽ chưa thể truy cập port khi nó chạy trong Kubernetes. Chúng ta sẽ cấu hình truy cập khi đến phần networking."}]}]},{"type":"element","tagName":"h2","properties":{"id":"cấu-hinh-khai-bao-với-yaml","style":"position:relative;"},"children":[{"type":"text","value":"Cấu hình khai báo với YAML"},{"type":"element","tagName":"a","properties":{"href":"#c%E1%BA%A5u-hinh-khai-bao-v%E1%BB%9Bi-yaml","ariaLabel":"cấu hinh khai bao với yaml permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chúng ta đã tạo deployment với"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl create deployment hashgenerator-dep --image"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"jakousa/dwk-app1"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu muốn scale lên 4 lần và cập nhật image:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl scale deployment/hashgenerator-dep --replicas"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4"}]},{"type":"text","value":"\n\n$ kubectl "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" image deployment/hashgenerator-dep dwk-app1"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"jakousa/dwk-app1:b7fc18de2376da80ff0cfc72cf581a9f94d10e64"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Mọi thứ bắt đầu trở nên rất rối rắm. Thật khó tưởng tượng ai đó có thể duy trì nhiều ứng dụng như vậy bằng cách này. May mắn thay, chúng ta sẽ sử dụng cách "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"khai báo"}]},{"type":"text","value":" nơi chúng ta định nghĩa trạng thái mong muốn thay vì cách thay đổi từng bước. Cách này bền vững hơn về lâu dài và giúp chúng ta giữ được sự tỉnh táo."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trước khi làm lại các bước trước bằng cách khai báo, hãy xóa deployment hiện tại."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl delete deployment hashgenerator-dep\n  deployment.apps "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"hashgenerator-dep\""}]},{"type":"text","value":" deleted"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"và tạo một thư mục mới tên là "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"manifests"}]},{"type":"text","value":" và đặt một file tên là deployment.yaml với nội dung sau (bạn có thể xem ví dụ "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes-hy/material-example/tree/master/app1","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tại đây"}]},{"type":"text","value":"):"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"deployment.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" apps/v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Deployment\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"dep\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"replicas"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matchLabels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"template"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" hashgenerator\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64"}]}]}]},{"type":"element","tagName":"text-box","properties":{"name":"Trình soạn thảo văn bản yêu thích","variant":"hint"},"children":[{"type":"text","value":"\n  Cá nhân tôi sử dụng Visual Studio Code để tạo các file yaml này. Nó có tính năng autofill, định nghĩa và kiểm tra cú pháp hữu ích cho Kubernetes với extension Kubernetes của Microsoft. Ngay cả bây giờ nó cũng cảnh báo rằng chúng ta chưa định nghĩa giới hạn tài nguyên. Tôi sẽ chưa quan tâm đến cảnh báo đó, nhưng bạn có thể tự tìm hiểu nếu muốn.\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"File này trông rất giống với các file docker-compose.yaml mà chúng ta đã từng viết. Hãy bỏ qua những gì chúng ta chưa biết, chủ yếu là labels, và tập trung vào những gì chúng ta biết:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chúng ta khai báo loại resource (kind: Deployment)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chúng ta khai báo tên trong metadata (name: hashgenerator-dep)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chúng ta khai báo số lượng (replicas: 1)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chúng ta khai báo container sử dụng image nào và tên gì"}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Áp dụng deployment với lệnh apply:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl apply -f manifests/deployment.yaml\n  deployment.apps/hashgenerator-dep created"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vậy là xong, nhưng để ôn lại, hãy xóa và tạo lại:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl delete -f manifests/deployment.yaml\n  deployment.apps "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"hashgenerator-dep\""}]},{"type":"text","value":" deleted\n\n$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app1/manifests/deployment.yaml\n  deployment.apps/hashgenerator-dep created"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Wow! Việc bạn có thể apply manifest từ internet như vậy sẽ rất hữu ích."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thay vì xóa deployment, chúng ta chỉ cần apply một deployment đã chỉnh sửa lên cái đang có. Kubernetes sẽ tự động rollout phiên bản mới. Bằng cách sử dụng tag (ví dụ "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"dwk/image:tag"}]},{"type":"text","value":") trong deployment, mỗi lần cập nhật image bạn chỉ cần chỉnh sửa và apply lại file deployment yaml. Trước đây bạn có thể luôn dùng tag 'latest', hoặc không quan tâm đến tag. Từ tag, Kubernetes sẽ biết image là mới và pull về."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi cập nhật bất cứ thứ gì trong Kubernetes, việc sử dụng delete thực ra là một anti-pattern và chỉ nên dùng khi không còn cách nào khác. Miễn là bạn không xóa resource, Kubernetes sẽ thực hiện rolling update, đảm bảo downtime tối thiểu (hoặc không có) cho ứng dụng. Nói về anti-pattern: bạn cũng nên tránh làm mọi thứ theo kiểu imperative! Nếu file của bạn không nói cho Kubernetes và nhóm của bạn biết trạng thái nên là gì mà thay vào đó bạn chạy các lệnh chỉnh sửa trạng thái, bạn chỉ đang làm giảm "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Bus_factor","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"bus factor"}]},{"type":"text","value":" cho cụm và ứng dụng của mình."}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 1.03: Cách tiếp cận khai báo"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong ứng dụng \"Log output\" của bạn, hãy tạo một thư mục cho manifests và chuyển deployment sang file khai báo."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đảm bảo mọi thứ vẫn hoạt động bằng cách khởi động lại và theo dõi logs."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 1.04: Dự án v0.2"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tạo deployment.yaml cho dự án."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn sẽ chưa thể truy cập port nhưng điều đó sẽ đến sớm thôi."}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lưu ý việc apply một deployment mới sẽ không cập nhật ứng dụng trừ khi tag được cập nhật. Bạn sẽ không cần xóa deployment nếu luôn dùng tag mới."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Quy trình cơ bản của bạn có thể như sau:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ docker build -t "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":":"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"new_tag"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n$ docker push "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":":"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"new_tag"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau đó chỉnh sửa deployment.yaml để tag được cập nhật thành <new_tag> và chạy lệnh sau"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl apply -f manifests/deployment.yaml"}]}]}]}]},"html":"<div><text-box variant='learningObjectives' name='Mục tiêu học tập'><p>Sau phần này bạn</p><ul>\n<li>có thể tạo và chạy một cụm Kubernetes cục bộ với k3d</li>\n<li>có thể triển khai một ứng dụng đơn giản lên Kubernetes</li>\n</ul></text-box><h2 id=\"microservices-la-gi\" style=\"position:relative;\">Microservices là gì?<a href=\"#microservices-la-gi\" aria-label=\"microservices la gi permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Trong khóa học này, chúng ta sẽ nói về microservices và tạo ra các microservices. Trước khi bắt đầu với bất cứ điều gì khác, chúng ta cần định nghĩa microservice là gì. Hiện tại, có rất nhiều định nghĩa khác nhau về microservices.</p><p>Đối với khóa học này, chúng ta sẽ chọn định nghĩa của Sam Newman trong <a href=\"https://www.oreilly.com/library/view/building-microservices/9781491950340/\" target=\"_blank\" rel=\"noopener noreferrer\">Building Microservices</a>: \"<strong>Microservices là các dịch vụ nhỏ, tự trị, phối hợp cùng nhau</strong>\". Đối lập với microservice là một dịch vụ tự chứa và độc lập gọi là <a href=\"https://en.wikipedia.org/wiki/Monolithic_application\" target=\"_blank\" rel=\"noopener noreferrer\">Monolith</a>.</p><p>Khi nào nên sử dụng microservices? Trong video dưới đây, nơi Sam Newman và Martin Fowler thảo luận về microservices, câu trả lời là: \"Khi bạn thực sự có lý do chính đáng\".</p><p>Nó cũng bao gồm 3 lý do hàng đầu để sử dụng microservices:</p><ul>\n<li>Triển khai độc lập không downtime</li>\n<li>Cô lập dữ liệu và xử lý xung quanh dữ liệu đó</li>\n<li>Sử dụng microservices để phản ánh cấu trúc tổ chức</li>\n</ul><p><strong>Khi nào nên sử dụng Microservices (và khi nào không nên!)</strong></p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/GBTdnfD6s5Q\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe><p>Một ứng dụng theo kiến trúc microservices được cấu thành từ nhiều, thậm chí hàng chục, dịch vụ hoạt động độc lập. Việc quản lý và vận hành một hệ thống phức tạp như vậy là một thách thức. Đây chính là lúc Kubernetes phát huy vai trò của mình.</p><h2 id=\"kubernetes-la-gi\" style=\"position:relative;\">Kubernetes là gì?<a href=\"#kubernetes-la-gi\" aria-label=\"kubernetes la gi permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Giả sử bạn có 3 tiến trình và 2 máy tính không thể chạy cùng lúc cả 3 tiến trình. Bạn sẽ giải quyết vấn đề này như thế nào?</p><p>Bạn sẽ phải bắt đầu bằng việc quyết định 2 tiến trình nào sẽ chạy cùng một máy và tiến trình nào sẽ chạy ở máy khác. Làm thế nào để phân bổ chúng? Bằng cách cho tiến trình tốn nhiều tài nguyên nhất và ít tài nguyên nhất cùng một máy, hay để tiến trình tốn nhiều tài nguyên nhất chạy riêng? Có thể bạn muốn thêm một tiến trình và giờ phải tổ chức lại tất cả. Điều gì xảy ra khi bạn có nhiều hơn 2 máy và nhiều hơn 3 tiến trình? Một trong các tiến trình đang chiếm hết bộ nhớ và bạn cần tách nó ra khỏi \"ứng dụng ngân hàng quan trọng\". Chúng ta nên ảo hóa mọi thứ? Containers sẽ giải quyết vấn đề đó, đúng không? Bạn sẽ chuyển tiến trình quan trọng nhất sang máy mới? Có thể một số tiến trình cần giao tiếp với nhau và giờ bạn phải xử lý mạng lưới. Nếu một máy bị hỏng thì sao? Còn kế hoạch đi uống bia thủ công vào thứ Sáu của bạn thì sao?</p><p>Sẽ thế nào nếu bạn chỉ cần định nghĩa \"Tiến trình này nên có 6 bản sao sử dụng X lượng tài nguyên.\" và có 2..N máy tính hoạt động như một thực thể duy nhất để đáp ứng yêu cầu của bạn? Đó chỉ là một trong những điều mà Kubernetes làm được.</p><blockquote><p lang=\"en\" dir=\"ltr\">Về bản chất, Kubernetes là tổng hợp tất cả các bash script và các best practice mà hầu hết các quản trị viên hệ thống sẽ tự xây dựng theo thời gian, được trình bày như một hệ thống duy nhất phía sau một tập hợp API khai báo.</p>&mdash; Kelsey Hightower (@kelseyhightower) <a href=\"https://twitter.com/kelseyhightower/status/1125440400355782657?ref_src=twsrc%5Etfw\">Ngày 6 tháng 5, 2019</a></blockquote><p>Hoặc chính thức hơn:</p><p>“Kubernetes (K8s) là một hệ thống mã nguồn mở để tự động hóa việc triển khai, mở rộng và quản lý các ứng dụng container hóa. Nó nhóm các container tạo thành một ứng dụng thành các đơn vị logic để dễ dàng quản lý và khám phá.” - <a href=\"https://kubernetes.io/\" target=\"_blank\" rel=\"noopener noreferrer\">kubernetes.io</a></p><p>Một hệ thống điều phối container như Kubernetes thường là cần thiết khi duy trì các ứng dụng container hóa. Trách nhiệm chính của một hệ thống điều phối là khởi động và dừng các container. Ngoài ra, chúng còn cung cấp mạng lưới giữa các container và giám sát sức khỏe. Thay vì phải thủ công chạy <code class=\"language-text\">docker run critical-bank-application</code> mỗi khi ứng dụng bị crash, hoặc khởi động lại nếu nó không phản hồi, chúng ta muốn hệ thống tự động giữ cho ứng dụng luôn khỏe mạnh.</p><p>Bạn có thể đã biết một hệ thống điều phối, <em>docker compose</em>, cũng thực hiện các nhiệm vụ tương tự: khởi động và dừng, mạng lưới và giám sát sức khỏe. Điều làm cho Kubernetes đặc biệt là bộ tính năng mạnh mẽ để tự động hóa tất cả những điều đó.</p><p>Hãy đọc <a href=\"https://cloud.google.com/kubernetes-engine/kubernetes-comic/\" target=\"_blank\" rel=\"noopener noreferrer\">truyện tranh này</a> và xem video dưới đây để có cái nhìn nhanh. Bạn có thể muốn xem lại chúng sau phần này!</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/Q4W8Z-D-gcQ\" frameborder=\"0\" allow=\"accelerometer; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe><p>Chúng ta sẽ bắt đầu với một bản phân phối Kubernetes nhẹ. <a href=\"https://k3s.io/\" target=\"_blank\" rel=\"noopener noreferrer\">K3s - 5 nhỏ hơn K8s</a>, cung cấp cho chúng ta một cụm Kubernetes thực sự có thể chạy trong các container bằng <a href=\"https://github.com/rancher/k3d\" target=\"_blank\" rel=\"noopener noreferrer\">k3d</a>.</p><h3 id=\"cụm-kubernetes-với-k3d\" style=\"position:relative;\">Cụm Kubernetes với k3d<a href=\"#c%E1%BB%A5m-kubernetes-v%E1%BB%9Bi-k3d\" aria-label=\"cụm kubernetes với k3d permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><h4 id=\"cụm-la-gi\" style=\"position:relative;\">Cụm là gì?<a href=\"#c%E1%BB%A5m-la-gi\" aria-label=\"cụm la gi permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4><p>Cụm là một nhóm các máy, <em>node</em>, làm việc cùng nhau - trong trường hợp này, chúng là một phần của cụm Kubernetes. Cụm Kubernetes có thể có bất kỳ kích thước nào - một cụm một node sẽ bao gồm một máy chủ chứa control-plane của Kubernetes (cung cấp API và duy trì cụm) và cụm đó có thể mở rộng lên đến 5000 node, tính đến Kubernetes v1.18.</p><p>Chúng ta sẽ sử dụng thuật ngữ \"server node\" để chỉ các node có control-plane và \"agent node\" để chỉ các node không có vai trò đó. Một cụm kubernetes cơ bản có thể trông như sau:</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 501px; margin-bottom: 1rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25.65217391304348%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvElEQVQY002QyQqFUAxD/f9Pc6NbBxAVNy6cZ9E8TqHyLhTa3CZNG7Rtq33ftSyLxbquFp5v26ayLFUUheX/f57P86z7vpUkiQIAGs/z1PM8Oo7D6vd9DfNh0zSZABiPHnrhgF3XZYODYRiMRBFFkcZx/EQ94jhWlmVGRBQyHLYLw1BN05iBPM8VIMBn3/dmGTcIQkaMVVi3rusPw5Wvn6apuq4z7BP0m0Dwm7gLVmUAQe5D/Obumt6qqvQD7GV+0ueMkqYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/c328f2e874d20b6c24ce9a902820cdcc/a0b58/without_k3d.webp 230w,\n/static/c328f2e874d20b6c24ce9a902820cdcc/bc10c/without_k3d.webp 460w,\n/static/c328f2e874d20b6c24ce9a902820cdcc/52d01/without_k3d.webp 501w\" sizes=\"(max-width: 501px) 100vw, 501px\" type=\"image/webp\">\n        <source srcset=\"/static/c328f2e874d20b6c24ce9a902820cdcc/81c8e/without_k3d.png 230w,\n/static/c328f2e874d20b6c24ce9a902820cdcc/08a84/without_k3d.png 460w,\n/static/c328f2e874d20b6c24ce9a902820cdcc/55811/without_k3d.png 501w\" sizes=\"(max-width: 501px) 100vw, 501px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/c328f2e874d20b6c24ce9a902820cdcc/55811/without_k3d.png\" alt=\"without k3d\" title=\"without k3d\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span><h4 id=\"khởi-tạo-cụm-với-k3d\" style=\"position:relative;\">Khởi tạo cụm với k3d<a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-c%E1%BB%A5m-v%E1%BB%9Bi-k3d\" aria-label=\"khởi tạo cụm với k3d permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4><p>Chúng ta sẽ sử dụng k3d để tạo một nhóm các container Docker chạy k3s. Hướng dẫn cài đặt, hoặc ít nhất là liên kết đến chúng, nằm ở <a href=\"/part-0#installing-k3d\">phần 0</a>. Lý do sử dụng k3d là nó cho phép chúng ta tạo một cụm mà không cần lo lắng về máy ảo hay máy vật lý. Với k3d, cụm cơ bản của chúng ta sẽ trông như sau:</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 501px; margin-bottom: 1rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.21739130434783%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQoz52R6YqDUAyFff+XE1RaEbeCuBVr627VZvhSBId2/kwgJPfm5GQzyrKUcRyl7/sP5Z/45XIR3/elKIqv2K7rZFkW8TxPjPv9rqBhGD6U/7ZtJUkSJX08Hl+xkK7rKmEYikEH27bJ6/X6ZQFgkev1qp0ix9gRi5zPZzEY43a7aSdUa5pGFRBvJpimSbWua/1DdtyeQ5eO47wJqR4EgViWpRYABICyLFOgbduSpqkSUIzxGZGY67qao4R5nmt3aBzHSkLSPM/qP59PJdoPQowxdxy7ZQpwFNUOCdARlUnCJ4nLEcOSgI9ld2DA7jnY0+n0vjIglK6O/v7+yz++Eb1yFEW6Q0b/r7LnqqrENE35AVu/r5efOrC5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/94502863777ec6cc601ad486f6de63b4/a0b58/with_k3d.webp 230w,\n/static/94502863777ec6cc601ad486f6de63b4/bc10c/with_k3d.webp 460w,\n/static/94502863777ec6cc601ad486f6de63b4/52d01/with_k3d.webp 501w\" sizes=\"(max-width: 501px) 100vw, 501px\" type=\"image/webp\">\n        <source srcset=\"/static/94502863777ec6cc601ad486f6de63b4/81c8e/with_k3d.png 230w,\n/static/94502863777ec6cc601ad486f6de63b4/08a84/with_k3d.png 460w,\n/static/94502863777ec6cc601ad486f6de63b4/55811/with_k3d.png 501w\" sizes=\"(max-width: 501px) 100vw, 501px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/94502863777ec6cc601ad486f6de63b4/55811/with_k3d.png\" alt=\"with k3d\" title=\"with k3d\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span><p>Vì các node là container nên chúng ta sẽ cần cấu hình một chút để chúng hoạt động như mong muốn. Chúng ta sẽ làm điều đó sau. Việc tạo cụm Kubernetes của riêng chúng ta với k3d chỉ cần một lệnh duy nhất.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ k3d cluster create -a <span class=\"token number\">2</span></code></pre></div><p>Lệnh này tạo ra một cụm Kubernetes với 2 agent node. Vì chúng nằm trong Docker, bạn có thể xác nhận sự tồn tại của chúng bằng <code class=\"language-text\">docker ps</code>.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ docker <span class=\"token function\">ps</span>\n  CONTAINER ID   IMAGE                            COMMAND                  CREATED          STATUS          PORTS                             NAMES\n  b25a9bb6c42f   ghcr.io/k3d-io/k3d-tools:5.4.1   <span class=\"token string\">\"/app/k3d-tools noop\"</span>    <span class=\"token number\">56</span> seconds ago   Up <span class=\"token number\">55</span> seconds                                     k3d-k3s-default-tools\n  19f992606131   ghcr.io/k3d-io/k3d-proxy:5.4.1   <span class=\"token string\">\"/bin/sh -c nginx-pr…\"</span>   <span class=\"token number\">56</span> seconds ago   Up <span class=\"token number\">32</span> seconds   <span class=\"token number\">80</span>/tcp, <span class=\"token number\">0.0</span>.0.0:50122-<span class=\"token operator\">></span><span class=\"token number\">6443</span>/tcp   k3d-k3s-default-serverlb\n  7a8bf6a44099   rancher/k3s:v1.22.7-k3s1         <span class=\"token string\">\"/bin/k3d-entrypoint…\"</span>   <span class=\"token number\">56</span> seconds ago   Up <span class=\"token number\">43</span> seconds                                     k3d-k3s-default-agent-1\n  c85fbcbcf9b2   rancher/k3s:v1.22.7-k3s1         <span class=\"token string\">\"/bin/k3d-entrypoint…\"</span>   <span class=\"token number\">56</span> seconds ago   Up <span class=\"token number\">43</span> seconds                                     k3d-k3s-default-agent-0\n  7191a3bdae7a   rancher/k3s:v1.22.7-k3s1         <span class=\"token string\">\"/bin/k3d-entrypoint…\"</span>   <span class=\"token number\">56</span> seconds ago   Up <span class=\"token number\">52</span> seconds                                     k3d-k3s-default-server-0</code></pre></div><p>Kéo sang trái một chút, bạn cũng sẽ thấy cổng 6443 được mở cho \"k3d-k3s-default-serverlb\", một proxy \"load balancer\" hữu ích, sẽ chuyển tiếp kết nối đến 6443 vào server node, và đó là cách chúng ta truy cập nội dung của cụm. Cổng trên máy của chúng ta, ví dụ 50122, được chọn ngẫu nhiên. Chúng ta có thể bỏ qua load balancer với <code class=\"language-text\">k3d cluster create -a 2 --no-lb</code> và cổng sẽ mở trực tiếp đến server node. Có load balancer sẽ cung cấp cho chúng ta một số tính năng mà nếu không sẽ không có, nên hãy giữ nó.</p><p>K3d cũng đã thiết lập một <a href=\"https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/\" target=\"_blank\" rel=\"noopener noreferrer\">kubeconfig</a>, một file dùng để tổ chức thông tin về các cụm, người dùng, namespace và cơ chế xác thực. Nội dung của file có thể xem bằng lệnh <code class=\"language-text\">k3d kubeconfig get k3s-default</code>.</p><p>Công cụ khác mà chúng ta sẽ sử dụng trong khóa học này là <a href=\"https://kubernetes.io/docs/reference/kubectl/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl</a>. Kubectl là công cụ dòng lệnh của Kubernetes và cho phép chúng ta tương tác với cụm. Kubectl sẽ đọc kubeconfig từ biến môi trường KUBECONFIG hoặc mặc định từ <code class=\"language-text\">~/.kube/config</code> và sử dụng thông tin để kết nối với cụm. Nội dung bao gồm chứng chỉ, mật khẩu và địa chỉ API của cụm. Bạn có thể đặt context bằng <code class=\"language-text\">kubectl config use-context k3d-k3s-default</code>.</p><p>Giờ kubectl sẽ có thể truy cập cụm</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl cluster-info\n  Kubernetes control plane is running at https://0.0.0.0:50122\n  CoreDNS is running at https://0.0.0.0:50122/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n  Metrics-server is running at https://0.0.0.0:50122/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy</code></pre></div><p>Chúng ta có thể thấy kubectl đang kết nối đến container <em>k3d-k3s-default-serverlb</em> qua (trong trường hợp này) cổng 50122.</p><p>Nếu bạn muốn dừng / khởi động lại cụm, chỉ cần chạy</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ k3d cluster stop\n  INFO<span class=\"token punctuation\">[</span>0000<span class=\"token punctuation\">]</span> Stopping cluster <span class=\"token string\">'k3s-default'</span>\n  INFO<span class=\"token punctuation\">[</span>0011<span class=\"token punctuation\">]</span> Stopped cluster <span class=\"token string\">'k3s-default'</span>\n\n$ k3d cluster start\n  INFO<span class=\"token punctuation\">[</span>0000<span class=\"token punctuation\">]</span> Using the k3d-tools node to gather environment information\n  INFO<span class=\"token punctuation\">[</span>0000<span class=\"token punctuation\">]</span> Starting existing tools node k3d-k3s-default-tools<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0000<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-tools'</span>\n  INFO<span class=\"token punctuation\">[</span>0001<span class=\"token punctuation\">]</span> Starting new tools node<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0001<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-tools'</span>\n  INFO<span class=\"token punctuation\">[</span>0003<span class=\"token punctuation\">]</span> Starting cluster <span class=\"token string\">'k3s-default'</span>\n  INFO<span class=\"token punctuation\">[</span>0003<span class=\"token punctuation\">]</span> Starting servers<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0003<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-server-0'</span>\n  INFO<span class=\"token punctuation\">[</span>0010<span class=\"token punctuation\">]</span> Starting agents<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0010<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-agent-1'</span>\n  INFO<span class=\"token punctuation\">[</span>0011<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-agent-0'</span>\n  INFO<span class=\"token punctuation\">[</span>0027<span class=\"token punctuation\">]</span> Starting helpers<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0027<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-serverlb'</span>\n  INFO<span class=\"token punctuation\">[</span>0027<span class=\"token punctuation\">]</span> Starting Node <span class=\"token string\">'k3d-k3s-default-tools'</span>\n  INFO<span class=\"token punctuation\">[</span>0035<span class=\"token punctuation\">]</span> Injecting records <span class=\"token keyword\">for</span> hostAliases <span class=\"token punctuation\">(</span>incl. host.k3d.internal<span class=\"token punctuation\">)</span> and <span class=\"token keyword\">for</span> <span class=\"token number\">5</span> network members into CoreDNS configmap<span class=\"token punctuation\">..</span>.\n  INFO<span class=\"token punctuation\">[</span>0038<span class=\"token punctuation\">]</span> Started cluster <span class=\"token string\">'k3s-default'</span></code></pre></div><p>Hiện tại, <strong>chúng ta cần cụm đang chạy</strong>, nhưng nếu muốn xóa cụm, bạn có thể chạy <code class=\"language-text\">k3d cluster delete</code>.</p><h2 id=\"triển-khai-dầu-tien\" style=\"position:relative;\">Triển khai đầu tiên<a href=\"#tri%E1%BB%83n-khai-d%E1%BA%A7u-tien\" aria-label=\"triển khai dầu tien permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><h3 id=\"chuẩn-bị-cho-lần-triển-khai-dầu-tien\" style=\"position:relative;\">Chuẩn bị cho lần triển khai đầu tiên<a href=\"#chu%E1%BA%A9n-b%E1%BB%8B-cho-l%E1%BA%A7n-tri%E1%BB%83n-khai-d%E1%BA%A7u-tien\" aria-label=\"chuẩn bị cho lần triển khai dầu tien permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Trước khi có thể triển khai bất cứ thứ gì, chúng ta cần một ứng dụng nhỏ để triển khai. Trong suốt khóa học, bạn sẽ phát triển ứng dụng của riêng mình. Công nghệ sử dụng cho ứng dụng không quan trọng - trong ví dụ này chúng ta sẽ dùng <a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"noopener noreferrer\">Node.js</a> nhưng ứng dụng mẫu cũng sẽ được cung cấp qua GitHub cũng như Docker Hub.</p><p>Hãy khởi chạy một ứng dụng tạo và xuất ra một hash mỗi 5 giây.</p><p>Tôi đã chuẩn bị sẵn một ứng dụng <a href=\"https://github.com/kubernetes-hy/material-example/tree/master/app1\" target=\"_blank\" rel=\"noopener noreferrer\">tại đây</a>, bạn có thể thử với <code class=\"language-text\">docker run jakousa/dwk-app1</code>.</p><p>Để triển khai một image, chúng ta cần cụm có thể truy cập image đó. Mặc định, Kubernetes được thiết kế để sử dụng với một registry. Chúng ta sẽ sử dụng registry quen thuộc <em>Docker Hub</em>, mà chúng ta cũng đã dùng trong <a href=\"http://devopswithdocker.com/\" target=\"_blank\" rel=\"noopener noreferrer\">DevOps with Docker</a>. Nếu bạn chưa từng dùng Docker Hub, đó là nơi mà Docker client mặc định truy cập. Ví dụ khi bạn chạy <code class=\"language-text\">docker pull nginx</code>, image nginx đến từ Docker Hub. Xem khóa học <a href=\"https://devopswithdocker.com/\" target=\"_blank\" rel=\"noopener noreferrer\">DevOps for Docker</a> để biết thêm chi tiết, ví dụ về việc push image lên Docker Hub nếu cần.</p><p>Cũng có thể sử dụng image local với k3d, nhưng điều đó sẽ không hoạt động với các giải pháp không phải k3d. Nếu muốn thử dùng image local, hãy dùng <code class=\"language-text\">k3d image import &lt;image-name&gt;</code>. Sau đó bạn phải chỉnh sửa <a href=\"https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy\" target=\"_blank\" rel=\"noopener noreferrer\">imagePullPolicy</a> của deployment từ mặc định <code class=\"language-text\">Always</code> thành <code class=\"language-text\">IfNotPresent</code> hoặc <code class=\"language-text\">Never</code> để cho phép sử dụng image local. Deployment có thể chỉnh sửa sau khi tạo bằng <code class=\"language-text\">kubectl edit deployment &lt;deployment-name&gt;</code>.</p><text-box name=\"Ứng dụng ví dụ\" variant=\"hint\">\nTrong tương lai, tài liệu sẽ sử dụng các ứng dụng được cung cấp trong các lệnh. Bạn có thể làm theo bằng cách thay đổi image thành ứng dụng của bạn. Hầu hết mọi thứ đều có trong cùng một repository <a href=\"https://github.com/kubernetes-hy/material-example\">https://github.com/kubernetes-hy/material-example</a>.\n</text-box><p>Giờ chúng ta đã sẵn sàng để triển khai ứng dụng đầu tiên vào Kubernetes!</p><h3 id=\"triển-khai\" style=\"position:relative;\">Triển khai<a href=\"#tri%E1%BB%83n-khai\" aria-label=\"triển khai permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Để triển khai một ứng dụng, chúng ta cần tạo một đối tượng <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\" target=\"_blank\" rel=\"noopener noreferrer\">deployment</a> với image.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl create deployment hashgenerator-dep --image<span class=\"token operator\">=</span>jakousa/dwk-app1\n  deployment.apps/hashgenerator-dep created</code></pre></div><p>Lệnh này tạo ra một vài thứ để chúng ta xem xét</p><ul>\n<li>một resource <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\" target=\"_blank\" rel=\"noopener noreferrer\">deployment</a> và</li>\n<li>một resource <a href=\"https://kubernetes.io/docs/concepts/workloads/pods/\" target=\"_blank\" rel=\"noopener noreferrer\">pod</a>.</li>\n</ul><h4 id=\"pod-la-gi\" style=\"position:relative;\">Pod là gì?<a href=\"#pod-la-gi\" aria-label=\"pod la gi permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4><p><em>Pod</em> là một lớp trừu tượng bao quanh một hoặc nhiều container. Pod cung cấp một ngữ cảnh cho 1..N container để chúng có thể chia sẻ lưu trữ và mạng. Nó rất giống với cách bạn đã sử dụng container để định nghĩa môi trường cho một tiến trình đơn. Có thể coi nó như một container của các container. <em>Hầu hết</em> các quy tắc tương tự đều áp dụng: nó sẽ bị xóa nếu các container bên trong dừng chạy và các file chứa trong đó sẽ bị mất cùng với nó.</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 731px; margin-bottom: 1rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 24.782608695652172%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVQY02WQS66DMAxFWWV30qp6k66jnbSrQUwRE4YIEEH8P+KnNHZ9U+jkRXJk5zrXJ3HCMKSmabiqKqrrmpVSXJYlS05y9tZac5IkF8/zzvM8o0+LDo3zPEfNRVGYrus4jmPlyMZS0DiOjICA6PsetWZZ67q+giD44+/S27bZ4VmW2TvGGJzTMAzsRFFkJCyRTCJpxkRO0xTkmoh4WZa77/vXwxC9ojMMQCjkBKFtW3KAjSfABDkMMRW5PP8gfAjh7TCcpsn2I/BdIP4ZypNDy0sEbtrxUdvLu+HTdd3Trv3rO3J81Qdh3Hh1gJHqOQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/44b180d0bf8c0d75212b5e04fdb8f487/a0b58/pods.webp 230w,\n/static/44b180d0bf8c0d75212b5e04fdb8f487/bc10c/pods.webp 460w,\n/static/44b180d0bf8c0d75212b5e04fdb8f487/feeb6/pods.webp 731w\" sizes=\"(max-width: 731px) 100vw, 731px\" type=\"image/webp\">\n        <source srcset=\"/static/44b180d0bf8c0d75212b5e04fdb8f487/81c8e/pods.png 230w,\n/static/44b180d0bf8c0d75212b5e04fdb8f487/08a84/pods.png 460w,\n/static/44b180d0bf8c0d75212b5e04fdb8f487/6e9ba/pods.png 731w\" sizes=\"(max-width: 731px) 100vw, 731px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/44b180d0bf8c0d75212b5e04fdb8f487/6e9ba/pods.png\" alt=\"pods\" title=\"pods\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span><p>Đọc tài liệu hoặc tìm kiếm trên internet không phải là cách duy nhất để tìm thông tin về các resource khác nhau của Kubernetes. Chúng ta có thể truy cập các giải thích đơn giản ngay từ dòng lệnh bằng lệnh <code class=\"language-text\">kubectl explain RESOURCE</code>.</p><p>Ví dụ, để có mô tả về Pod và các trường bắt buộc, chúng ta có thể dùng lệnh sau.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl explain pod\n  KIND:     Pod\n  VERSION:  v1\n\n  DESCRIPTION:\n       Pod là một tập hợp các container có thể chạy trên một host. Resource này được tạo bởi client và được lên lịch trên các host.</code></pre></div><p>Trong Kubernetes, tất cả các thực thể tồn tại đều được gọi là <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/\" target=\"_blank\" rel=\"noopener noreferrer\">object</a>. Bạn có thể liệt kê tất cả object của một resource với <code class=\"language-text\">kubectl get RESOURCE</code>.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get pods\n  NAME                               READY   STATUS    RESTARTS   AGE\n  hashgenerator-dep-6965c5c7-2pkxc   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          2m1s</code></pre></div><h4 id=\"deployment-resource-la-gi\" style=\"position:relative;\">Deployment resource là gì?<a href=\"#deployment-resource-la-gi\" aria-label=\"deployment resource la gi permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4><p>Một resource <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\" target=\"_blank\" rel=\"noopener noreferrer\">deployment</a> chịu trách nhiệm triển khai. Nó là cách để nói với Kubernetes bạn muốn container nào, chúng nên chạy như thế nào và bao nhiêu bản sao nên chạy.</p><p>Khi chúng ta tạo Deployment, chúng ta cũng tạo một object <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/\" target=\"_blank\" rel=\"noopener noreferrer\">ReplicaSet</a>. ReplicaSet dùng để chỉ định số lượng bản sao của một Pod bạn muốn. Nó sẽ xóa hoặc tạo Pod cho đến khi số lượng Pod bạn muốn đang chạy. ReplicaSet được quản lý bởi Deployment và bạn không cần phải tự định nghĩa hay chỉnh sửa chúng. Nếu muốn quản lý số lượng replica, bạn có thể chỉnh sửa Deployment và nó sẽ tự động cập nhật ReplicaSet.</p><p>Bạn có thể xem các deployment như sau:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl get deployments\n  NAME                READY   UP-TO-DATE   AVAILABLE   AGE\n  hashgenerator-dep   <span class=\"token number\">1</span>/1     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           54s</code></pre></div><p>1/1 replica đã sẵn sàng! Chúng ta sẽ thử nhiều replica hơn sau. Nếu trạng thái của bạn không giống như vậy, hãy kiểm tra <a href=\"/known-problems-solutions#first-deployment\">trang này</a>.</p><p>Để xem output, chúng ta có thể chạy <code class=\"language-text\">kubectl logs -f hashgenerator-dep-6965c5c7-2pkxc</code></p><text-box name=\"Tự động hoàn thành\" variant=\"hint\">\nBạn có thể dùng `source <(kubectl completion bash)` để tiết kiệm rất nhiều thời gian. Thêm nó vào .bashrc để tự động tải. (Cũng có cho zsh với `source <(kubectl completion zsh)`). Nếu bạn chưa từng dùng completion, hãy đọc <a href=\"https://iridakos.com/programming/2018/03/01/bash-programmable-completion-tutorial\">hướng dẫn này</a>. Thông tin thêm về lệnh kubectl completion có thể tìm thấy <a href=\"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_completion/\">tại đây</a>.\n</text-box><p>Một danh sách hữu ích các lệnh docker-cli được chuyển sang kubectl có tại <a href=\"https://kubernetes.io/docs/reference/kubectl/docker-cli-to-kubectl/\" target=\"_blank\" rel=\"noopener noreferrer\">https://kubernetes.io/docs/reference/kubectl/docker-cli-to-kubectl/</a></p><exercise name='Bài tập 1.01: Bắt đầu'><p><strong>Bài tập có thể làm với bất kỳ ngôn ngữ và framework nào bạn muốn.</strong></p><p>Tạo một ứng dụng sinh ra một chuỗi ngẫu nhiên khi khởi động, lưu chuỗi này vào bộ nhớ, và xuất ra mỗi 5 giây kèm timestamp. Ví dụ:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43\n2020-03-30T12:15:22.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43</code></pre></div><p>Triển khai nó vào cụm Kubernetes của bạn và xác nhận rằng nó đang chạy với <code class=\"language-text\">kubectl logs ...</code></p><p>Bạn sẽ tiếp tục xây dựng ứng dụng này trong các bài tập tiếp theo. Ứng dụng này sẽ được gọi là \"Log output\".</p></exercise><exercise name='Bài tập 1.02: Dự án v0.1'><p><strong>Dự án có thể làm với bất kỳ ngôn ngữ và framework nào bạn muốn</strong></p><p>Dự án sẽ là một ứng dụng todo đơn giản với các tính năng quen thuộc: tạo, đọc, cập nhật và xóa (CRUD). Chúng ta sẽ phát triển nó trong suốt các phần của khóa học. Kiểm tra tiêu đề bài tập để biết \"Project vX.Y\" là về xây dựng dự án.</p><p>Todo là một đoạn văn bản như \"Tôi cần dọn nhà\" có thể ở trạng thái chưa hoàn thành hoặc đã hoàn thành.</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 453px; margin-bottom: 1rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 110.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADZElEQVQ4y5VUSUyTQRQeW1yOLlfsUWxsI/GAidGQEImcDE20WG8QjcDJiHjhwHIR9Wh6ElNTLGkpiknTJi490YYDS1nLTiiUnbb0L9CmYMbvjX+bRv0RJnmZ5e3fe28Y+8daW1tT0760tGTb2NjgQ0NDqcHBwRTuHDwn8TjnanbUtbi4KITX19e/7O3t8UAgICgajfJYLOY5tkEIn6A9FAo9W1lZ+ToyMtKFCLuWl5e/4f4iV+Z/S5UhjUajUhLS6/WqXNnDDOZlqLCw8KSSUGlpaV6u7JFTBpZPd3Z2PMDRsbu768DuWV1dfX6clMWKx+PCayKRcEORp1IpDsNcPv84tCgNDQ2svr6eDQ8PZ98kSRLCiMYs/V4hOAkhwsTW1tY72aBKrVZnMmJ1dXXCFoOQirzlUjgcFkB3d3ef9/v9mt7e3nwin8+ncblcF4iH9vlLj2wppl1cXHxGiWcwGE4rKqLH7iC1J5iISkxBJaahGm+3iDcxMVGCt1pQFREavXZubu428cbHx28gk+rt7e1KUBX68zH07hJePgIbDxwMAXwkEnGQ0tjYmCuZTNKdRk7wJicnvcTb3NxspztSz+phD1JFvel0ms/Pz/OpqSkuC7WT0ujo6CeaX0TKg8EgR4S0e+SxfE+yKJJwSAujGWD9/f03EboRAgZ4LUfvGTG310hpenq6CApGUDnxoFixsLBwXXZ2FWcjvQMuA873BgYGShSxLSsrUwTeZDKdUlR0u92X0BIFwKagp6dHi7bQtbW1nSOezWbLx5sOWWj7+vq0aBud3W6/SDyLxXIWslfwpsX3dplseL3eAgYgJQAv4WeRgEHk4OCAA4IHpIRUrQQ6cIyiaFEUkPC1Ew8pVkDvJ6YpBr04RlPa39+XqMs5FQVGspWEoUfyxHynOxUGX5fgwYCfeDMzMzV0hxFOjjKL/jwzQDUDXDMK8xaRfED6RaQ0OztbgUK0wlgjHDYiuleQN8kGdQjgJWa8ERPShEybEUjzoZ8E+vA+lF7DaBMRHL6Bs4fEA256pN2Kt2bItGA4WpBJixjyPwlpiL8Q2HgoDWruzG+DSHzEQ9/WZOAiyqZstVqZ0+lkDoeDdXZ2so6ODgJcLffhR2pm7Ek0fZIaGKP3WY7eBJhoIJJIPw0o0rinfwEP3Vesugk5lwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/42cd00819d1db5789826b38bb7f95328/a0b58/project.webp 230w,\n/static/42cd00819d1db5789826b38bb7f95328/2430e/project.webp 453w\" sizes=\"(max-width: 453px) 100vw, 453px\" type=\"image/webp\">\n        <source srcset=\"/static/42cd00819d1db5789826b38bb7f95328/81c8e/project.png 230w,\n/static/42cd00819d1db5789826b38bb7f95328/2108e/project.png 453w\" sizes=\"(max-width: 453px) 100vw, 453px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/42cd00819d1db5789826b38bb7f95328/2108e/project.png\" alt=\"Qu&#xE1; tr&#xEC;nh ph&#xE1;t tri&#x1EC3;n d&#x1EF1; &#xE1;n\" title=\"Qu&#xE1; tr&#xEC;nh ph&#xE1;t tri&#x1EC3;n d&#x1EF1; &#xE1;n\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span><p>Các đường nét đứt phân tách các khác biệt lớn qua các phần của khóa học. Một số bài tập không được đưa vào hình. Kết nối giữa hầu hết các pod cũng không được đưa vào. Bạn có thể làm theo cách bạn muốn.</p><p>Hãy nhớ điều này nếu bạn muốn tránh làm nhiều việc hơn cần thiết.</p><p>Bắt đầu thôi!</p><p>Tạo một web server xuất ra \"Server started in port NNNN\" khi khởi động và triển khai nó vào cụm Kubernetes của bạn. Hãy đảm bảo rằng biến môi trường PORT có thể được sử dụng để chọn port đó. Bạn sẽ chưa thể truy cập port khi nó chạy trong Kubernetes. Chúng ta sẽ cấu hình truy cập khi đến phần networking.</p></exercise><h2 id=\"cấu-hinh-khai-bao-với-yaml\" style=\"position:relative;\">Cấu hình khai báo với YAML<a href=\"#c%E1%BA%A5u-hinh-khai-bao-v%E1%BB%9Bi-yaml\" aria-label=\"cấu hinh khai bao với yaml permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Chúng ta đã tạo deployment với</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl create deployment hashgenerator-dep --image<span class=\"token operator\">=</span>jakousa/dwk-app1</code></pre></div><p>Nếu muốn scale lên 4 lần và cập nhật image:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl scale deployment/hashgenerator-dep --replicas<span class=\"token operator\">=</span><span class=\"token number\">4</span>\n\n$ kubectl <span class=\"token builtin class-name\">set</span> image deployment/hashgenerator-dep dwk-app1<span class=\"token operator\">=</span>jakousa/dwk-app1:b7fc18de2376da80ff0cfc72cf581a9f94d10e64</code></pre></div><p>Mọi thứ bắt đầu trở nên rất rối rắm. Thật khó tưởng tượng ai đó có thể duy trì nhiều ứng dụng như vậy bằng cách này. May mắn thay, chúng ta sẽ sử dụng cách <em>khai báo</em> nơi chúng ta định nghĩa trạng thái mong muốn thay vì cách thay đổi từng bước. Cách này bền vững hơn về lâu dài và giúp chúng ta giữ được sự tỉnh táo.</p><p>Trước khi làm lại các bước trước bằng cách khai báo, hãy xóa deployment hiện tại.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl delete deployment hashgenerator-dep\n  deployment.apps <span class=\"token string\">\"hashgenerator-dep\"</span> deleted</code></pre></div><p>và tạo một thư mục mới tên là <code class=\"language-text\">manifests</code> và đặt một file tên là deployment.yaml với nội dung sau (bạn có thể xem ví dụ <a href=\"https://github.com/kubernetes-hy/material-example/tree/master/app1\" target=\"_blank\" rel=\"noopener noreferrer\">tại đây</a>):</p><p><strong>deployment.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hashgenerator<span class=\"token punctuation\">-</span>dep\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hashgenerator\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hashgenerator\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hashgenerator\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app1<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64</code></pre></div><text-box name=\"Trình soạn thảo văn bản yêu thích\" variant=\"hint\">\n  Cá nhân tôi sử dụng Visual Studio Code để tạo các file yaml này. Nó có tính năng autofill, định nghĩa và kiểm tra cú pháp hữu ích cho Kubernetes với extension Kubernetes của Microsoft. Ngay cả bây giờ nó cũng cảnh báo rằng chúng ta chưa định nghĩa giới hạn tài nguyên. Tôi sẽ chưa quan tâm đến cảnh báo đó, nhưng bạn có thể tự tìm hiểu nếu muốn.\n</text-box><p>File này trông rất giống với các file docker-compose.yaml mà chúng ta đã từng viết. Hãy bỏ qua những gì chúng ta chưa biết, chủ yếu là labels, và tập trung vào những gì chúng ta biết:</p><ul>\n<li>Chúng ta khai báo loại resource (kind: Deployment)</li>\n<li>Chúng ta khai báo tên trong metadata (name: hashgenerator-dep)</li>\n<li>Chúng ta khai báo số lượng (replicas: 1)</li>\n<li>Chúng ta khai báo container sử dụng image nào và tên gì</li>\n</ul><p>Áp dụng deployment với lệnh apply:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl apply -f manifests/deployment.yaml\n  deployment.apps/hashgenerator-dep created</code></pre></div><p>Vậy là xong, nhưng để ôn lại, hãy xóa và tạo lại:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl delete -f manifests/deployment.yaml\n  deployment.apps <span class=\"token string\">\"hashgenerator-dep\"</span> deleted\n\n$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app1/manifests/deployment.yaml\n  deployment.apps/hashgenerator-dep created</code></pre></div><p>Wow! Việc bạn có thể apply manifest từ internet như vậy sẽ rất hữu ích.</p><p>Thay vì xóa deployment, chúng ta chỉ cần apply một deployment đã chỉnh sửa lên cái đang có. Kubernetes sẽ tự động rollout phiên bản mới. Bằng cách sử dụng tag (ví dụ <code class=\"language-text\">dwk/image:tag</code>) trong deployment, mỗi lần cập nhật image bạn chỉ cần chỉnh sửa và apply lại file deployment yaml. Trước đây bạn có thể luôn dùng tag 'latest', hoặc không quan tâm đến tag. Từ tag, Kubernetes sẽ biết image là mới và pull về.</p><p>Khi cập nhật bất cứ thứ gì trong Kubernetes, việc sử dụng delete thực ra là một anti-pattern và chỉ nên dùng khi không còn cách nào khác. Miễn là bạn không xóa resource, Kubernetes sẽ thực hiện rolling update, đảm bảo downtime tối thiểu (hoặc không có) cho ứng dụng. Nói về anti-pattern: bạn cũng nên tránh làm mọi thứ theo kiểu imperative! Nếu file của bạn không nói cho Kubernetes và nhóm của bạn biết trạng thái nên là gì mà thay vào đó bạn chạy các lệnh chỉnh sửa trạng thái, bạn chỉ đang làm giảm <a href=\"https://en.wikipedia.org/wiki/Bus_factor\" target=\"_blank\" rel=\"noopener noreferrer\">bus factor</a> cho cụm và ứng dụng của mình.</p><exercise name='Bài tập 1.03: Cách tiếp cận khai báo'><p>Trong ứng dụng \"Log output\" của bạn, hãy tạo một thư mục cho manifests và chuyển deployment sang file khai báo.</p><p>Đảm bảo mọi thứ vẫn hoạt động bằng cách khởi động lại và theo dõi logs.</p></exercise><exercise name='Bài tập 1.04: Dự án v0.2'><p>Tạo deployment.yaml cho dự án.</p><p>Bạn sẽ chưa thể truy cập port nhưng điều đó sẽ đến sớm thôi.</p></exercise><p>Lưu ý việc apply một deployment mới sẽ không cập nhật ứng dụng trừ khi tag được cập nhật. Bạn sẽ không cần xóa deployment nếu luôn dùng tag mới.</p><p>Quy trình cơ bản của bạn có thể như sau:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ docker build -t <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>new_tag<span class=\"token operator\">></span>\n\n$ docker push <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>new_tag<span class=\"token operator\">></span></code></pre></div><p>Sau đó chỉnh sửa deployment.yaml để tag được cập nhật thành &#x3C;new_tag> và chạy lệnh sau</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl apply -f manifests/deployment.yaml</code></pre></div></div>","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"},"fileAbsolutePath":"/home/runner/work/dwk2024/dwk2024/data/part-1/1-first-deploy-vi.md"},"allPages":{"edges":[{"node":{"id":"7e706a38-3828-5118-bdec-3705a319a1b0","frontmatter":{"path":"/faq-vi","title":"Câu hỏi thường gặp"}}},{"node":{"id":"e1ed6713-5992-5f7f-95a1-17efd97f57d8","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"5225f2a2-20f9-50ce-93ac-7b38f3105103","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"3102d88f-7297-56fb-af03-27d1079fffd1","frontmatter":{"path":"/","title":"Homepage"}}},{"node":{"id":"04c5ddbd-7839-580f-82da-bc9fdbb49f84","frontmatter":{"path":"/known-problems-solutions","title":"Các vấn đề bạn có thể gặp phải"}}},{"node":{"id":"c92ea568-3384-5ff8-8dfa-b9015597780d","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"d9c993b6-f6b4-59a1-b119-f3b7218eec6b","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"5e6b6ee0-b381-53f0-b84c-af378792b131","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"58688080-4aa8-54e6-8b8b-02de1c4f6410","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"8a3ee5be-7557-5fcd-954b-2351e74cd585","frontmatter":{"path":"/part-0/1-intro-vi","title":"Giới thiệu khóa học"}}},{"node":{"id":"23082016-7bbd-5215-8485-4ffccbf3ea1a","frontmatter":{"path":"/part-0/1-intro","title":"Course Introduction"}}},{"node":{"id":"771eaa93-2ef2-5e0f-9e1e-55914c67c4ac","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"fe0342aa-a4c5-5b44-8591-71eb27f1a287","frontmatter":{"path":"/part-1/2-introduction-to-debugging-vi","title":"Giới thiệu về Debugging"}}},{"node":{"id":"1c236933-7ad5-5b61-8c07-07db3822d55a","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"7fc5c062-6b94-53ec-9aaa-adca66ce672e","frontmatter":{"path":"/part-1/5-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8ed3365b-b788-5806-8ec5-bec3cb0f94c8","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"46a4a0e4-d131-537d-aa72-5b6726163a7d","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"}}},{"node":{"id":"3c788edf-62db-5e86-9366-17b53eda9244","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"fd467661-6b24-545f-904c-52f4a7ade6b7","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"56110eda-875d-5bd9-a400-5bd5a009df7f","frontmatter":{"path":"/part-2/5-monitoring-vi","title":"Giám sát"}}},{"node":{"id":"79f1cddb-6995-51c2-bf98-2adc13de9b13","frontmatter":{"path":"/part-2/6-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8f3387b0-ec6e-5a86-982a-e52780d911f9","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"06173ac4-c2f8-57df-8dc8-450b5c2bb695","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"8c3d747d-4f87-5a46-99ac-dfd0af5a893b","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"8d9fd774-9dbe-5cca-8395-9226fcf82c4a","frontmatter":{"path":"/part-3/4-summary","title":"Tóm tắt"}}},{"node":{"id":"b98b2895-6c9d-5234-939d-2f547cbf8a06","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"29bec4f5-8a0b-580d-ac84-9dbbd1d7152e","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"781bd207-902e-59a2-a752-4958c2c93fb0","frontmatter":{"path":"/part-5/5-summary-vi","title":"Tóm tắt và kết thúc"}}},{"node":{"id":"2318c18f-86e6-5a4e-958a-d1c38f8615cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"eb339401-26c8-594c-98fd-2f30a95275cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"}}},{"node":{"id":"1d8ff75c-065b-565d-9ceb-01b9a276ae7a","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"306c87f3-9adb-5d8b-a3ce-072f8e6cfa43","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"4dd8302d-d170-5d38-8198-4d0947322bbc","frontmatter":{"path":"/part-4/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"0045695d-e541-5acc-b4b8-551023d01733","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"829fd216-f995-5a77-b201-bb971aec73b4","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams-vi","title":"Kubernetes qua ba sơ đồ"}}},{"node":{"id":"98132cca-4dc3-5942-a6f4-1da87bc81a23","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams","title":"Kubernetes in three diagrams"}}},{"node":{"id":"90b8e83a-9d55-550a-908a-316708ce7f8c","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"8931bcb7-c40e-5d57-aa80-c4333972fbb8","frontmatter":{"path":"/part-1/3-introduction-to-networking-vi","title":"Giới thiệu về Mạng"}}},{"node":{"id":"4fe00c0a-bb17-5d4c-8202-750493a755c9","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"}}},{"node":{"id":"6cc3be66-6091-58fc-bcbd-1f27f9473f85","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"b53df746-c24f-57e3-a9f3-d6d621697689","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"}}},{"node":{"id":"02389078-a12f-561a-8a54-fa99a6950b92","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs-vi","title":"StatefulSet và Job"}}},{"node":{"id":"15be3d7c-b0b7-5bce-b3bf-8cec39d54630","frontmatter":{"path":"/part-2/3-configuring-applications-vi","title":"Cấu hình ứng dụng"}}},{"node":{"id":"e4534a9d-fb84-5d1f-83f0-35055feb0da7","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"d5206d16-d2fe-51fd-8acd-d85ecf0be257","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"466aa711-527b-55a0-871b-13468e65d344","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"bea18f34-dcdc-59b8-ba24-3011680a0c58","frontmatter":{"path":"/part-3/1-introduction-to-gke-vi","title":"Giới thiệu về Google Kubernetes Engine"}}},{"node":{"id":"84db9628-b3df-5ca1-9d3d-5924e02ae549","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"0049e57f-0bc7-5689-9169-43848a972877","frontmatter":{"path":"/part-3/2-deployment-pipeline-vi","title":"Quy trình Triển khai (Deployment Pipeline)"}}},{"node":{"id":"7dfec8c7-8ccb-50da-949d-ebd1de395dc4","frontmatter":{"path":"/part-3/3-gke-features-vi","title":"Các tính năng của GKE"}}},{"node":{"id":"61f18dc7-1abf-5c75-9b54-0cee11c76a40","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"0e981ec1-99e0-5005-ba9f-4f626a81b7ce","frontmatter":{"path":"/part-5/1-kubernetes-internals-vi","title":"Bên trong Kubernetes"}}},{"node":{"id":"31927db3-2182-55c7-b680-663754461d14","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"da1f8069-17bc-5c8e-9310-117bcedf5acf","frontmatter":{"path":"/part-5/2-custom-resource-definitions-vi","title":"Định nghĩa Tài nguyên Tùy chỉnh (Custom Resource Definitions)"}}},{"node":{"id":"20ceed4e-761d-54d4-9acf-2669eac533c6","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"ccefb04a-5790-57f6-869b-d255b2203667","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"423cbc46-2dfa-57e6-9dc5-761a93729600","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"68c64f9f-c9a5-544b-bafb-b061665cacd0","frontmatter":{"path":"/part-5/3-service-mesh-vi","title":"Service Mesh"}}},{"node":{"id":"6df9c7be-f930-5827-a39c-0c1698b23600","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"46f9ce68-5ccd-5787-bd59-03852ad6fdcb","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"a917b24d-df2b-5199-ac98-cd0f7560c63f","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"97ead58a-8493-5fdd-808e-d4a56de573b0","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"c179c521-bb62-52bd-808b-d4869df5302a","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Chiến lược cập nhật và Prometheus"}}},{"node":{"id":"6f4f18ce-5aa9-5bb5-9d74-0a631a78e6b3","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Hệ thống nhắn tin"}}},{"node":{"id":"898b0354-f1a2-5664-97de-d84b16018395","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"6981a9d7-619d-51a9-9490-74bc77c0f55b","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}},{"node":{"id":"a17c4c44-7396-543f-b6b4-7adf57808aa8","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}