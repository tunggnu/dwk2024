{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-1/4-introduction-to-storage-vi","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mục tiêu học tập"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau phần này bạn"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"có thể sử dụng volume để chia sẻ dữ liệu giữa hai container trong một pod"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"biết về persistent volume để lưu dữ liệu trên ổ đĩa của một node"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Có hai điều được biết là khó khăn với Kubernetes. Đầu tiên là mạng. May mắn thay, chúng ta có thể tránh được hầu hết các khó khăn về mạng trừ khi bạn muốn tự thiết lập một cụm riêng. Nếu bạn quan tâm, bạn có thể xem Webinar \""},{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=GgCA2USI5iQ","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Kubernetes and Networks: Why is This So Dang Hard?"}]},{"type":"text","value":"\" nhưng chúng ta sẽ bỏ qua hầu hết các chủ đề được thảo luận trong video. Điều khó khăn còn lại là "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"lưu trữ"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong phần 1, chúng ta sẽ tìm hiểu một phương pháp rất cơ bản để sử dụng lưu trữ và sẽ quay lại chủ đề này sau. Trong khi hầu hết mọi thứ khác trong Kubernetes đều rất linh hoạt, có thể di chuyển giữa các node và sao chép dễ dàng, thì lưu trữ lại không có những khả năng như vậy. \""},{"type":"element","tagName":"a","properties":{"href":"https://softwareengineeringdaily.com/2019/01/11/why-is-storage-on-kubernetes-is-so-hard/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Why Is Storage On Kubernetes So Hard?"}]},{"type":"text","value":"\" cung cấp cho chúng ta một góc nhìn rộng về những khó khăn và các lựa chọn khác nhau để vượt qua chúng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Có nhiều loại volume khác nhau và chúng ta sẽ bắt đầu với hai loại."}]},{"type":"element","tagName":"h3","properties":{"id":"volume","style":"position:relative;"},"children":[{"type":"text","value":"Volume"},{"type":"element","tagName":"a","properties":{"href":"#volume","ariaLabel":"volume permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/storage/volumes/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"volume"}]},{"type":"text","value":" trong Docker và Docker compose là cách để lưu trữ dữ liệu mà các container sử dụng. Với Kubernetes, "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"các volume đơn giản"}]},{"type":"text","value":" lại không hoàn toàn như vậy."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Các volume trong Kubernetes, về mặt kỹ thuật là "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"emptyDir"}]},{"type":"text","value":", là các hệ thống file chia sẻ "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"bên trong một pod"}]},{"type":"text","value":", nghĩa là vòng đời của chúng gắn liền với pod. Khi pod bị xóa thì dữ liệu cũng mất. Ngoài ra, chỉ cần di chuyển pod sang node khác cũng sẽ làm mất dữ liệu trong volume vì không gian lưu trữ được lấy từ node mà pod đang chạy. Vì vậy, bạn chắc chắn không nên dùng "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/volumes/#emptydir","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"emptyDir"}]},{"type":"text","value":" để sao lưu cơ sở dữ liệu. Dù có hạn chế, nó vẫn có thể dùng làm cache vì dữ liệu tồn tại giữa các lần khởi động lại container hoặc dùng để chia sẻ file giữa hai container trong một pod."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trước khi bắt đầu, chúng ta cần một ứng dụng chia sẻ dữ liệu với ứng dụng khác. Trong trường hợp này, nó sẽ hoạt động như một phương pháp để chia sẻ file log đơn giản với nhau. Chúng ta cần phát triển:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Ứng dụng 1 sẽ kiểm tra xem /usr/src/app/files/image.jpg có tồn tại không, nếu không thì tải một ảnh ngẫu nhiên và lưu thành image.jpg. Bất kỳ yêu cầu HTTP nào cũng sẽ tạo ảnh mới."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Ứng dụng 2 sẽ kiểm tra file /usr/src/app/files/image.jpg và hiển thị nó nếu có."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hai ứng dụng này dùng chung một deployment để cả hai "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"nằm trong cùng một pod"}]},{"type":"text","value":". Phiên bản mẫu của tôi có sẵn cho bạn dùng "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes-hy/material-example/blob/b9ff709b4af7ca13643635e07df7367b54f5c575/app3/manifests/deployment.yaml","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tại đây"}]},{"type":"text","value":". Ví dụ này bao gồm cả ingress và service để truy cập ứng dụng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"deployment.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" apps/v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Deployment\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" images"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"dep\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"replicas"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matchLabels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" images\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"template"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" images\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Định nghĩa volume"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"emptyDir"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"finder\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"finder"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumeMounts"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Gắn volume"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n              "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"mountPath"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /usr/src/app/files\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"response\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"response"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumeMounts"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Gắn volume"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n              "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"mountPath"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /usr/src/app/files"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vì việc hiển thị phụ thuộc vào volume nên chúng ta có thể xác nhận nó hoạt động bằng cách truy cập image-response và lấy ảnh. Ingress cung cấp sẵn sử dụng cổng 8081 đã mở "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:8081","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"http://localhost:8081"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lưu ý rằng tất cả dữ liệu sẽ mất khi pod bị tắt."}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.10: Even more services"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tách ứng dụng \"Log output\" thành hai container khác nhau trong cùng một pod:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một container tạo timestamp mới mỗi 5 giây và lưu vào file."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Container còn lại đọc file đó và xuất ra cùng với hash cho người dùng xem."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bất kỳ ứng dụng nào cũng có thể tạo hash, có thể là reader hoặc writer."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn có thể thấy "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_logs/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"hướng dẫn này"}]},{"type":"text","value":" hữu ích vì bây giờ có nhiều hơn một container chạy trong pod."}]}]},{"type":"element","tagName":"h3","properties":{"id":"persistent-volume","style":"position:relative;"},"children":[{"type":"text","value":"Persistent Volume"},{"type":"element","tagName":"a","properties":{"href":"#persistent-volume","ariaLabel":"persistent volume permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khác với emptyDir, một "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/persistent-volumes/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Persistent Volume"}]},{"type":"text","value":" (PV) là thứ mà bạn có thể nghĩ đến khi nói về volume."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Persistent Volume (PV) là tài nguyên ở cấp cụm, đại diện cho một phần lưu trữ trong cụm được quản trị viên cung cấp hoặc được "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tạo động"}]},{"type":"text","value":". PV có thể dựa trên nhiều loại lưu trữ như ổ đĩa cục bộ, NFS, lưu trữ đám mây, v.v."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"PV có vòng đời độc lập với bất kỳ pod nào sử dụng nó. Điều này nghĩa là dữ liệu trong PV có thể tồn tại lâu hơn pod đã gắn nó."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi sử dụng nhà cung cấp đám mây như Google Kubernetes Engine (chúng ta sẽ dùng ở phần 3 và 4), nhà cung cấp đám mây sẽ lo việc lưu trữ và các Persistent Volume mà bạn có thể dùng. Nếu bạn tự vận hành cụm hoặc dùng cụm cục bộ như k3s để phát triển, bạn cần tự lo hệ thống lưu trữ và Persistent Volume."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Một lựa chọn dễ dàng với K3s là "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/volumes/#local","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"local"}]},{"type":"text","value":" PersistentVolume sử dụng một đường dẫn trên node làm nơi lưu trữ. Cách này gắn volume với một node cụ thể và nếu node đó không khả dụng thì lưu trữ cũng không dùng được."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vì vậy local Persistent Volume "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"không"}]},{"type":"text","value":" phải là giải pháp cho môi trường production!"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"PersistentVolume"}]},{"type":"text","value":" hoạt động, trước tiên bạn cần tạo đường dẫn local trên node mà bạn sẽ gắn nó vào. Vì cụm của chúng ta chạy qua Docker nên hãy tạo thư mục "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/tmp/kube"}]},{"type":"text","value":" trong container "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"k3d-k3s-default-agent-0"}]},{"type":"text","value":". Có thể thực hiện đơn giản bằng lệnh "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker exec k3d-k3s-default-agent-0 mkdir -p /tmp/kube"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Định nghĩa Persistent Volume như sau:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"persistentvolume.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" PersistentVolume\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" example"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pv\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"storageClassName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"example"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pv "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# tên này sẽ dùng để claim volume sau"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"capacity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"storage"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" 1Gi "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Có thể là 500Gi. Dùng dung lượng nhỏ để tiết kiệm không gian khi test cục bộ"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumeMode"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Filesystem "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Khai báo sẽ mount vào pod như một thư mục"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"accessModes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ReadWriteOnce\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"local"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"path"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /tmp/kube\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodeAffinity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"## Chỉ cần cho local, xác định node nào có thể truy cập"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"required"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodeSelectorTerms"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matchExpressions"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"key"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" kubernetes.io/hostname\n              "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"operator"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" In\n              "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"values"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n                "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" k3d"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"k3s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"default"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"agent"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/storage/persistent-volumes/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Persistent Volume Claim"}]},{"type":"text","value":" (PVC) là yêu cầu lưu trữ của người dùng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi người dùng tạo PVC, Kubernetes sẽ tìm PV phù hợp với yêu cầu và gán chúng với nhau. Nếu không có PV phù hợp, tùy cấu hình, cụm có thể tự động tạo PV đáp ứng yêu cầu."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khi đã gán, PersistentVolumeClaim sẽ \"khóa\" và chỉ được dùng bởi một Pod (tùy access mode). Điều này đảm bảo tài nguyên PV chỉ được pod đó sử dụng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu không có Persistent Volume phù hợp, PVC sẽ ở trạng thái \"Pending\" chờ PV phù hợp."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Về mặt khái niệm, bạn có thể coi PV là ổ đĩa vật lý (lưu trữ thực tế), còn PVC là cách pod yêu cầu sử dụng lưu trữ đó."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bây giờ hãy tạo một claim cho ứng dụng:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"persistentvolumeclaim.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" PersistentVolumeClaim\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"claim "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# tên của volume claim, sẽ dùng trong deployment"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"storageClassName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" my"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"example"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pv "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# tên của persistent volume mà chúng ta claim"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"accessModes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ReadWriteOnce\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"resources"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"requests"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"storage"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" 1Gi"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chỉnh sửa deployment đã giới thiệu trước đó để sử dụng nó:"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"deployment.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# ..."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"persistentVolumeClaim"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"claimName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"claim\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"finder\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"finder"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumeMounts"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"mountPath"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /usr/src/app/files\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"response\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jakousa/dwk"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"response"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"volumeMounts"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shared"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"image\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"mountPath"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /usr/src/app/files"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Và apply cùng với persistentvolume.yaml và persistentvolumeclaim.yaml."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Với service và ingress trước đó, chúng ta có thể truy cập ứng dụng tại "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:8081","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"http://localhost:8081"}]},{"type":"text","value":". Để xác nhận dữ liệu được lưu bền, hãy chạy"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ kubectl delete -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml\n  deployment.apps "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"images-dep\""}]},{"type":"text","value":" đã bị xóa\n$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml\n  deployment.apps/images-dep đã được tạo"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"File vẫn còn nguyên!"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nếu bạn muốn tìm hiểu thêm về việc tự vận hành lưu trữ, có thể tham khảo:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://rook.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Rook"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://openebs.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"OpenEBS"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://longhorn.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Longhorn"}]}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.11: Persisting data"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hãy chia sẻ dữ liệu giữa hai ứng dụng \"Ping-pong\" và \"Log output\" bằng persistent volume. Tạo cả "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"PersistentVolume"}]},{"type":"text","value":" và "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"PersistentVolumeClaim"}]},{"type":"text","value":" rồi chỉnh sửa "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Deployment"}]},{"type":"text","value":" để sử dụng chúng. Vì PersistentVolume thường do quản trị viên cụm quản lý và không gắn với ứng dụng cụ thể nên bạn nên để định nghĩa của chúng riêng biệt, có thể trong một thư mục riêng."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lưu số lượng request gửi đến ứng dụng \"Ping-pong\" vào một file trong volume và xuất ra cùng với timestamp và hash khi gửi request đến ứng dụng \"Log output\". Cuối cùng, hai pod nên chia sẻ một persistent volume giữa hai ứng dụng. Khi truy cập ứng dụng \"Log output\" trên trình duyệt, bạn sẽ thấy:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43.\nPing / Pongs: 3"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.12: Project v0.6"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vì project hiện tại khá nhàm chán, hãy thêm một bức ảnh!"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Mục tiêu là thêm một ảnh theo giờ vào project."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lấy một ảnh ngẫu nhiên từ Lorem Picsum như "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"https://picsum.photos/1200"}]},{"type":"text","value":" và hiển thị trong project. Tìm cách lưu ảnh để giữ nguyên trong 60 phút."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đảm bảo cache ảnh vào volume để API không bị gọi mỗi lần truy cập ứng dụng hoặc container bị crash."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cách tốt nhất để kiểm tra khi container tắt là tắt container, bạn cũng có thể thêm logic cho việc này để kiểm thử."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.13: Project v0.7"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đối với project, chúng ta sẽ cần code thêm để thấy kết quả ở phần tiếp theo."}]},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Thêm một trường nhập liệu. Trường này không nhận todo dài quá 140 ký tự."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Thêm nút gửi. Chưa cần gửi todo ngay."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Thêm danh sách các todo hiện có với một số todo mẫu cứng."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Có thể giống như sau:\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 340px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 125.65217391304348%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/ff807ebf379aa4fd08d98d96b03d969c/a0b58/project-ex-113.webp 230w","/static/ff807ebf379aa4fd08d98d96b03d969c/8ae5a/project-ex-113.webp 340w"],"sizes":["(max-width:","340px)","100vw,","340px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/ff807ebf379aa4fd08d98d96b03d969c/81c8e/project-ex-113.png 230w","/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png 340w"],"sizes":["(max-width:","340px)","100vw,","340px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png","alt":"project ex 113","title":"project ex 113","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]}]}]},"html":"<div><text-box variant='learningObjectives' name='Mục tiêu học tập'><p>Sau phần này bạn</p><ul>\n<li>có thể sử dụng volume để chia sẻ dữ liệu giữa hai container trong một pod</li>\n<li>biết về persistent volume để lưu dữ liệu trên ổ đĩa của một node</li>\n</ul></text-box><p>Có hai điều được biết là khó khăn với Kubernetes. Đầu tiên là mạng. May mắn thay, chúng ta có thể tránh được hầu hết các khó khăn về mạng trừ khi bạn muốn tự thiết lập một cụm riêng. Nếu bạn quan tâm, bạn có thể xem Webinar \"<a href=\"https://www.youtube.com/watch?v=GgCA2USI5iQ\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes and Networks: Why is This So Dang Hard?</a>\" nhưng chúng ta sẽ bỏ qua hầu hết các chủ đề được thảo luận trong video. Điều khó khăn còn lại là <strong>lưu trữ</strong>.</p><p>Trong phần 1, chúng ta sẽ tìm hiểu một phương pháp rất cơ bản để sử dụng lưu trữ và sẽ quay lại chủ đề này sau. Trong khi hầu hết mọi thứ khác trong Kubernetes đều rất linh hoạt, có thể di chuyển giữa các node và sao chép dễ dàng, thì lưu trữ lại không có những khả năng như vậy. \"<a href=\"https://softwareengineeringdaily.com/2019/01/11/why-is-storage-on-kubernetes-is-so-hard/\" target=\"_blank\" rel=\"noopener noreferrer\">Why Is Storage On Kubernetes So Hard?</a>\" cung cấp cho chúng ta một góc nhìn rộng về những khó khăn và các lựa chọn khác nhau để vượt qua chúng.</p><p>Có nhiều loại volume khác nhau và chúng ta sẽ bắt đầu với hai loại.</p><h3 id=\"volume\" style=\"position:relative;\">Volume<a href=\"#volume\" aria-label=\"volume permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Một <a href=\"https://docs.docker.com/storage/volumes/\" target=\"_blank\" rel=\"noopener noreferrer\">volume</a> trong Docker và Docker compose là cách để lưu trữ dữ liệu mà các container sử dụng. Với Kubernetes, <a href=\"https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/\" target=\"_blank\" rel=\"noopener noreferrer\">các volume đơn giản</a> lại không hoàn toàn như vậy.</p><p>Các volume trong Kubernetes, về mặt kỹ thuật là <em>emptyDir</em>, là các hệ thống file chia sẻ <em>bên trong một pod</em>, nghĩa là vòng đời của chúng gắn liền với pod. Khi pod bị xóa thì dữ liệu cũng mất. Ngoài ra, chỉ cần di chuyển pod sang node khác cũng sẽ làm mất dữ liệu trong volume vì không gian lưu trữ được lấy từ node mà pod đang chạy. Vì vậy, bạn chắc chắn không nên dùng <a href=\"https://kubernetes.io/docs/concepts/storage/volumes/#emptydir\" target=\"_blank\" rel=\"noopener noreferrer\">emptyDir</a> để sao lưu cơ sở dữ liệu. Dù có hạn chế, nó vẫn có thể dùng làm cache vì dữ liệu tồn tại giữa các lần khởi động lại container hoặc dùng để chia sẻ file giữa hai container trong một pod.</p><p>Trước khi bắt đầu, chúng ta cần một ứng dụng chia sẻ dữ liệu với ứng dụng khác. Trong trường hợp này, nó sẽ hoạt động như một phương pháp để chia sẻ file log đơn giản với nhau. Chúng ta cần phát triển:</p><ul>\n<li>Ứng dụng 1 sẽ kiểm tra xem /usr/src/app/files/image.jpg có tồn tại không, nếu không thì tải một ảnh ngẫu nhiên và lưu thành image.jpg. Bất kỳ yêu cầu HTTP nào cũng sẽ tạo ảnh mới.</li>\n<li>Ứng dụng 2 sẽ kiểm tra file /usr/src/app/files/image.jpg và hiển thị nó nếu có.</li>\n</ul><p>Hai ứng dụng này dùng chung một deployment để cả hai <strong>nằm trong cùng một pod</strong>. Phiên bản mẫu của tôi có sẵn cho bạn dùng <a href=\"https://github.com/kubernetes-hy/material-example/blob/b9ff709b4af7ca13643635e07df7367b54f5c575/app3/manifests/deployment.yaml\" target=\"_blank\" rel=\"noopener noreferrer\">tại đây</a>. Ví dụ này bao gồm cả ingress và service để truy cập ứng dụng.</p><p><strong>deployment.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> images<span class=\"token punctuation\">-</span>dep\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> images\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> images\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Định nghĩa volume</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>finder\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app3<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>finder<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Gắn volume</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /usr/src/app/files\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>response\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app3<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>response<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Gắn volume</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /usr/src/app/files</code></pre></div><p>Vì việc hiển thị phụ thuộc vào volume nên chúng ta có thể xác nhận nó hoạt động bằng cách truy cập image-response và lấy ảnh. Ingress cung cấp sẵn sử dụng cổng 8081 đã mở <a href=\"http://localhost:8081\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8081</a></p><p>Lưu ý rằng tất cả dữ liệu sẽ mất khi pod bị tắt.</p><exercise name='Exercise 1.10: Even more services'><p>Tách ứng dụng \"Log output\" thành hai container khác nhau trong cùng một pod:</p><p>Một container tạo timestamp mới mỗi 5 giây và lưu vào file.</p><p>Container còn lại đọc file đó và xuất ra cùng với hash cho người dùng xem.</p><p>Bất kỳ ứng dụng nào cũng có thể tạo hash, có thể là reader hoặc writer.</p><p>Bạn có thể thấy <a href=\"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_logs/\" target=\"_blank\" rel=\"noopener noreferrer\">hướng dẫn này</a> hữu ích vì bây giờ có nhiều hơn một container chạy trong pod.</p></exercise><h3 id=\"persistent-volume\" style=\"position:relative;\">Persistent Volume<a href=\"#persistent-volume\" aria-label=\"persistent volume permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Khác với emptyDir, một <a href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/\" target=\"_blank\" rel=\"noopener noreferrer\">Persistent Volume</a> (PV) là thứ mà bạn có thể nghĩ đến khi nói về volume.</p><p>Persistent Volume (PV) là tài nguyên ở cấp cụm, đại diện cho một phần lưu trữ trong cụm được quản trị viên cung cấp hoặc được <a href=\"https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/\" target=\"_blank\" rel=\"noopener noreferrer\">tạo động</a>. PV có thể dựa trên nhiều loại lưu trữ như ổ đĩa cục bộ, NFS, lưu trữ đám mây, v.v.</p><p>PV có vòng đời độc lập với bất kỳ pod nào sử dụng nó. Điều này nghĩa là dữ liệu trong PV có thể tồn tại lâu hơn pod đã gắn nó.</p><p>Khi sử dụng nhà cung cấp đám mây như Google Kubernetes Engine (chúng ta sẽ dùng ở phần 3 và 4), nhà cung cấp đám mây sẽ lo việc lưu trữ và các Persistent Volume mà bạn có thể dùng. Nếu bạn tự vận hành cụm hoặc dùng cụm cục bộ như k3s để phát triển, bạn cần tự lo hệ thống lưu trữ và Persistent Volume.</p><p>Một lựa chọn dễ dàng với K3s là <a href=\"https://kubernetes.io/docs/concepts/storage/volumes/#local\" target=\"_blank\" rel=\"noopener noreferrer\">local</a> PersistentVolume sử dụng một đường dẫn trên node làm nơi lưu trữ. Cách này gắn volume với một node cụ thể và nếu node đó không khả dụng thì lưu trữ cũng không dùng được.</p><p>Vì vậy local Persistent Volume <strong>không</strong> phải là giải pháp cho môi trường production!</p><p>Để <em>PersistentVolume</em> hoạt động, trước tiên bạn cần tạo đường dẫn local trên node mà bạn sẽ gắn nó vào. Vì cụm của chúng ta chạy qua Docker nên hãy tạo thư mục <code class=\"language-text\">/tmp/kube</code> trong container <code class=\"language-text\">k3d-k3s-default-agent-0</code>. Có thể thực hiện đơn giản bằng lệnh <code class=\"language-text\">docker exec k3d-k3s-default-agent-0 mkdir -p /tmp/kube</code></p><p>Định nghĩa Persistent Volume như sau:</p><p><strong>persistentvolume.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> example<span class=\"token punctuation\">-</span>pv\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>example<span class=\"token punctuation\">-</span>pv <span class=\"token comment\"># tên này sẽ dùng để claim volume sau</span>\n  <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 1Gi <span class=\"token comment\"># Có thể là 500Gi. Dùng dung lượng nhỏ để tiết kiệm không gian khi test cục bộ</span>\n  <span class=\"token key atrule\">volumeMode</span><span class=\"token punctuation\">:</span> Filesystem <span class=\"token comment\"># Khai báo sẽ mount vào pod như một thư mục</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteOnce\n  <span class=\"token key atrule\">local</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /tmp/kube\n  <span class=\"token key atrule\">nodeAffinity</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">## Chỉ cần cho local, xác định node nào có thể truy cập</span>\n    <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">nodeSelectorTerms</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> kubernetes.io/hostname\n              <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n              <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> k3d<span class=\"token punctuation\">-</span>k3s<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>agent<span class=\"token punctuation\">-</span><span class=\"token number\">0</span></code></pre></div><p><a href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/\" target=\"_blank\" rel=\"noopener noreferrer\">Persistent Volume Claim</a> (PVC) là yêu cầu lưu trữ của người dùng.</p><p>Khi người dùng tạo PVC, Kubernetes sẽ tìm PV phù hợp với yêu cầu và gán chúng với nhau. Nếu không có PV phù hợp, tùy cấu hình, cụm có thể tự động tạo PV đáp ứng yêu cầu.</p><p>Khi đã gán, PersistentVolumeClaim sẽ \"khóa\" và chỉ được dùng bởi một Pod (tùy access mode). Điều này đảm bảo tài nguyên PV chỉ được pod đó sử dụng.</p><p>Nếu không có Persistent Volume phù hợp, PVC sẽ ở trạng thái \"Pending\" chờ PV phù hợp.</p><p>Về mặt khái niệm, bạn có thể coi PV là ổ đĩa vật lý (lưu trữ thực tế), còn PVC là cách pod yêu cầu sử dụng lưu trữ đó.</p><p>Bây giờ hãy tạo một claim cho ứng dụng:</p><p><strong>persistentvolumeclaim.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>claim <span class=\"token comment\"># tên của volume claim, sẽ dùng trong deployment</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>example<span class=\"token punctuation\">-</span>pv <span class=\"token comment\"># tên của persistent volume mà chúng ta claim</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteOnce\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 1Gi</code></pre></div><p>Chỉnh sửa deployment đã giới thiệu trước đó để sử dụng nó:</p><p><strong>deployment.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ...</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">persistentVolumeClaim</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">claimName</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>claim\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>finder\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app3<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>finder<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n          <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /usr/src/app/files\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">-</span>response\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jakousa/dwk<span class=\"token punctuation\">-</span>app3<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>response<span class=\"token punctuation\">:</span>b7fc18de2376da80ff0cfc72cf581a9f94d10e64\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shared<span class=\"token punctuation\">-</span>image\n          <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /usr/src/app/files</code></pre></div><p>Và apply cùng với persistentvolume.yaml và persistentvolumeclaim.yaml.</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml</code></pre></div><p>Với service và ingress trước đó, chúng ta có thể truy cập ứng dụng tại <a href=\"http://localhost:8081\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8081</a>. Để xác nhận dữ liệu được lưu bền, hãy chạy</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kubectl delete -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml\n  deployment.apps <span class=\"token string\">\"images-dep\"</span> đã bị xóa\n$ kubectl apply -f https://raw.githubusercontent.com/kubernetes-hy/material-example/master/app3/manifests/deployment-persistent.yaml\n  deployment.apps/images-dep đã được tạo</code></pre></div><p>File vẫn còn nguyên!</p><p>Nếu bạn muốn tìm hiểu thêm về việc tự vận hành lưu trữ, có thể tham khảo:</p><ul>\n<li><a href=\"https://rook.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Rook</a></li>\n<li><a href=\"https://openebs.io/\" target=\"_blank\" rel=\"noopener noreferrer\">OpenEBS</a></li>\n<li><a href=\"https://longhorn.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Longhorn</a></li>\n</ul><exercise name='Exercise 1.11: Persisting data'><p>Hãy chia sẻ dữ liệu giữa hai ứng dụng \"Ping-pong\" và \"Log output\" bằng persistent volume. Tạo cả <em>PersistentVolume</em> và <em>PersistentVolumeClaim</em> rồi chỉnh sửa <em>Deployment</em> để sử dụng chúng. Vì PersistentVolume thường do quản trị viên cụm quản lý và không gắn với ứng dụng cụ thể nên bạn nên để định nghĩa của chúng riêng biệt, có thể trong một thư mục riêng.</p><p>Lưu số lượng request gửi đến ứng dụng \"Ping-pong\" vào một file trong volume và xuất ra cùng với timestamp và hash khi gửi request đến ứng dụng \"Log output\". Cuối cùng, hai pod nên chia sẻ một persistent volume giữa hai ứng dụng. Khi truy cập ứng dụng \"Log output\" trên trình duyệt, bạn sẽ thấy:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2020-03-30T12:15:17.705Z: 8523ecb1-c716-4cb6-a044-b9e83bb98e43.\nPing / Pongs: 3</code></pre></div></exercise><exercise name='Exercise 1.12: Project v0.6'><p>Vì project hiện tại khá nhàm chán, hãy thêm một bức ảnh!</p><p>Mục tiêu là thêm một ảnh theo giờ vào project.</p><p>Lấy một ảnh ngẫu nhiên từ Lorem Picsum như <code class=\"language-text\">https://picsum.photos/1200</code> và hiển thị trong project. Tìm cách lưu ảnh để giữ nguyên trong 60 phút.</p><p>Đảm bảo cache ảnh vào volume để API không bị gọi mỗi lần truy cập ứng dụng hoặc container bị crash.</p><p>Cách tốt nhất để kiểm tra khi container tắt là tắt container, bạn cũng có thể thêm logic cho việc này để kiểm thử.</p></exercise><exercise name='Exercise 1.13: Project v0.7'><p>Đối với project, chúng ta sẽ cần code thêm để thấy kết quả ở phần tiếp theo.</p><ol>\n<li>Thêm một trường nhập liệu. Trường này không nhận todo dài quá 140 ký tự.</li>\n<li>Thêm nút gửi. Chưa cần gửi todo ngay.</li>\n<li>Thêm danh sách các todo hiện có với một số todo mẫu cứng.</li>\n</ol><p>Có thể giống như sau:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 340px; margin-bottom: 1rem;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125.65217391304348%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,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&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/ff807ebf379aa4fd08d98d96b03d969c/a0b58/project-ex-113.webp 230w,\n/static/ff807ebf379aa4fd08d98d96b03d969c/8ae5a/project-ex-113.webp 340w\" sizes=\"(max-width: 340px) 100vw, 340px\" type=\"image/webp\">\n        <source srcset=\"/static/ff807ebf379aa4fd08d98d96b03d969c/81c8e/project-ex-113.png 230w,\n/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png 340w\" sizes=\"(max-width: 340px) 100vw, 340px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/ff807ebf379aa4fd08d98d96b03d969c/9f933/project-ex-113.png\" alt=\"project ex 113\" title=\"project ex 113\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span></p></exercise></div>","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"},"fileAbsolutePath":"/home/runner/work/dwk2024/dwk2024/data/part-1/4-introduction-to-storage-vi.md"},"allPages":{"edges":[{"node":{"id":"7e706a38-3828-5118-bdec-3705a319a1b0","frontmatter":{"path":"/faq-vi","title":"Câu hỏi thường gặp"}}},{"node":{"id":"5225f2a2-20f9-50ce-93ac-7b38f3105103","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"e1ed6713-5992-5f7f-95a1-17efd97f57d8","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"52d4cd1d-eb14-54f3-a18a-ef84b67c320d","frontmatter":{"path":"/index-en","title":"Homepage"}}},{"node":{"id":"3102d88f-7297-56fb-af03-27d1079fffd1","frontmatter":{"path":"/","title":"Trang chủ"}}},{"node":{"id":"c92ea568-3384-5ff8-8dfa-b9015597780d","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"5e6b6ee0-b381-53f0-b84c-af378792b131","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"58688080-4aa8-54e6-8b8b-02de1c4f6410","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"04c5ddbd-7839-580f-82da-bc9fdbb49f84","frontmatter":{"path":"/known-problems-solutions","title":"Các vấn đề bạn có thể gặp phải"}}},{"node":{"id":"d9c993b6-f6b4-59a1-b119-f3b7218eec6b","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"8a3ee5be-7557-5fcd-954b-2351e74cd585","frontmatter":{"path":"/part-0/1-intro-vi","title":"Giới thiệu khóa học"}}},{"node":{"id":"23082016-7bbd-5215-8485-4ffccbf3ea1a","frontmatter":{"path":"/part-0/1-intro","title":"Course Introduction"}}},{"node":{"id":"771eaa93-2ef2-5e0f-9e1e-55914c67c4ac","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"fe0342aa-a4c5-5b44-8591-71eb27f1a287","frontmatter":{"path":"/part-1/2-introduction-to-debugging-vi","title":"Giới thiệu về Debugging"}}},{"node":{"id":"1c236933-7ad5-5b61-8c07-07db3822d55a","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"7fc5c062-6b94-53ec-9aaa-adca66ce672e","frontmatter":{"path":"/part-1/5-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"3c788edf-62db-5e86-9366-17b53eda9244","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"46a4a0e4-d131-537d-aa72-5b6726163a7d","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"}}},{"node":{"id":"fd467661-6b24-545f-904c-52f4a7ade6b7","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"56110eda-875d-5bd9-a400-5bd5a009df7f","frontmatter":{"path":"/part-2/5-monitoring-vi","title":"Giám sát"}}},{"node":{"id":"8f3387b0-ec6e-5a86-982a-e52780d911f9","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"06173ac4-c2f8-57df-8dc8-450b5c2bb695","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"8c3d747d-4f87-5a46-99ac-dfd0af5a893b","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"79f1cddb-6995-51c2-bf98-2adc13de9b13","frontmatter":{"path":"/part-2/6-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8ed3365b-b788-5806-8ec5-bec3cb0f94c8","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"8d9fd774-9dbe-5cca-8395-9226fcf82c4a","frontmatter":{"path":"/part-3/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"b98b2895-6c9d-5234-939d-2f547cbf8a06","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"4dd8302d-d170-5d38-8198-4d0947322bbc","frontmatter":{"path":"/part-4/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"0045695d-e541-5acc-b4b8-551023d01733","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"29bec4f5-8a0b-580d-ac84-9dbbd1d7152e","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"a917b24d-df2b-5199-ac98-cd0f7560c63f","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"eb339401-26c8-594c-98fd-2f30a95275cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"}}},{"node":{"id":"2318c18f-86e6-5a4e-958a-d1c38f8615cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"1d8ff75c-065b-565d-9ceb-01b9a276ae7a","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"781bd207-902e-59a2-a752-4958c2c93fb0","frontmatter":{"path":"/part-5/5-summary-vi","title":"Tóm tắt và kết thúc"}}},{"node":{"id":"306c87f3-9adb-5d8b-a3ce-072f8e6cfa43","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"829fd216-f995-5a77-b201-bb971aec73b4","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams-vi","title":"Kubernetes qua ba sơ đồ"}}},{"node":{"id":"98132cca-4dc3-5942-a6f4-1da87bc81a23","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams","title":"Kubernetes in three diagrams"}}},{"node":{"id":"8931bcb7-c40e-5d57-aa80-c4333972fbb8","frontmatter":{"path":"/part-1/3-introduction-to-networking-vi","title":"Giới thiệu về Mạng"}}},{"node":{"id":"90b8e83a-9d55-550a-908a-316708ce7f8c","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"4fe00c0a-bb17-5d4c-8202-750493a755c9","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"}}},{"node":{"id":"6cc3be66-6091-58fc-bcbd-1f27f9473f85","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"b53df746-c24f-57e3-a9f3-d6d621697689","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"}}},{"node":{"id":"d5206d16-d2fe-51fd-8acd-d85ecf0be257","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"15be3d7c-b0b7-5bce-b3bf-8cec39d54630","frontmatter":{"path":"/part-2/3-configuring-applications-vi","title":"Cấu hình ứng dụng"}}},{"node":{"id":"e4534a9d-fb84-5d1f-83f0-35055feb0da7","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"02389078-a12f-561a-8a54-fa99a6950b92","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs-vi","title":"StatefulSet và Job"}}},{"node":{"id":"466aa711-527b-55a0-871b-13468e65d344","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"bea18f34-dcdc-59b8-ba24-3011680a0c58","frontmatter":{"path":"/part-3/1-introduction-to-gke-vi","title":"Giới thiệu về Google Kubernetes Engine"}}},{"node":{"id":"0049e57f-0bc7-5689-9169-43848a972877","frontmatter":{"path":"/part-3/2-deployment-pipeline-vi","title":"Quy trình Triển khai (Deployment Pipeline)"}}},{"node":{"id":"61f18dc7-1abf-5c75-9b54-0cee11c76a40","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"7dfec8c7-8ccb-50da-949d-ebd1de395dc4","frontmatter":{"path":"/part-3/3-gke-features-vi","title":"Các tính năng của GKE"}}},{"node":{"id":"423cbc46-2dfa-57e6-9dc5-761a93729600","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"84db9628-b3df-5ca1-9d3d-5924e02ae549","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"46f9ce68-5ccd-5787-bd59-03852ad6fdcb","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"6df9c7be-f930-5827-a39c-0c1698b23600","frontmatter":{"path":"/part-4/3-gitops-vi","title":"Triển khai GitOps"}}},{"node":{"id":"0e981ec1-99e0-5005-ba9f-4f626a81b7ce","frontmatter":{"path":"/part-5/1-kubernetes-internals-vi","title":"Bên trong Kubernetes"}}},{"node":{"id":"31927db3-2182-55c7-b680-663754461d14","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"da1f8069-17bc-5c8e-9310-117bcedf5acf","frontmatter":{"path":"/part-5/2-custom-resource-definitions-vi","title":"Định nghĩa Tài nguyên Tùy chỉnh (Custom Resource Definitions)"}}},{"node":{"id":"ccefb04a-5790-57f6-869b-d255b2203667","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"68c64f9f-c9a5-544b-bafb-b061665cacd0","frontmatter":{"path":"/part-5/3-service-mesh-vi","title":"Service Mesh"}}},{"node":{"id":"20ceed4e-761d-54d4-9acf-2669eac533c6","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"97ead58a-8493-5fdd-808e-d4a56de573b0","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"6f4f18ce-5aa9-5bb5-9d74-0a631a78e6b3","frontmatter":{"path":"/part-4/2-messaging-systems-vi","title":"Hệ thống nhắn tin"}}},{"node":{"id":"c179c521-bb62-52bd-808b-d4869df5302a","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus-vi","title":"Chiến lược cập nhật và Prometheus"}}},{"node":{"id":"898b0354-f1a2-5664-97de-d84b16018395","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"6981a9d7-619d-51a9-9490-74bc77c0f55b","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}},{"node":{"id":"a17c4c44-7396-543f-b6b4-7adf57808aa8","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}