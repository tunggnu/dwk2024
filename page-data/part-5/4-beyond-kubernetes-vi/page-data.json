{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-5/4-beyond-kubernetes-vi","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mục tiêu học tập"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau phần này bạn có thể"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Liệt kê và so sánh các lựa chọn nền tảng."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Thiết lập một nền tảng serverless (Knative) và triển khai một workload đơn giản"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cuối cùng, vì Kubernetes là một nền tảng, chúng ta sẽ điểm qua một số thành phần xây dựng phổ biến sử dụng Kubernetes."}]},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"element","tagName":"p","properties":{"lang":"en","dir":"ltr"},"children":[{"type":"text","value":"Kubernetes là một nền tảng để xây dựng các nền tảng khác. Nó là điểm khởi đầu tốt hơn; không phải là đích đến cuối cùng."}]},{"type":"text","value":"— Kelsey Hightower (@kelseyhightower) "},{"type":"element","tagName":"a","properties":{"href":"https://twitter.com/kelseyhightower/status/935252923721793536?ref_src=twsrc%5Etfw"},"children":[{"type":"text","value":"November 27, 2017"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.openshift.com/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"OpenShift"}]},{"type":"text","value":" là một Kubernetes \"doanh nghiệp\" ("},{"type":"element","tagName":"a","properties":{"href":"https://developers.redhat.com/products/openshift/overview","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Red Hat OpenShift Overview"}]},{"type":"text","value":"). Nói rằng bạn không có Kubernetes vì bạn dùng OpenShift cũng giống như nói "},{"type":"element","tagName":"a","properties":{"href":"https://www.openshift.com/blog/enterprise-kubernetes-with-openshift-part-one","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"\"Tôi không có động cơ. Tôi có một chiếc xe hơi!\""}]},{"type":"text","value":". Để xem các lựa chọn Kubernetes sẵn sàng cho sản xuất khác, hãy xem "},{"type":"element","tagName":"a","properties":{"href":"https://rancher.com/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Rancher"}]},{"type":"text","value":", có thể bạn đã thấy ở trang này "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/rancher/k3d","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://github.com/rancher/k3d"}]},{"type":"text","value":", và "},{"type":"element","tagName":"a","properties":{"href":"https://cloud.google.com/anthos/gke","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Anthos GKE"}]},{"type":"text","value":", nghe cũng quen thuộc. Tất cả đều là các lựa chọn khi bạn phải quyết định chọn bản phân phối Kubernetes nào hoặc muốn dùng dịch vụ được quản lý."}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 5.05: So sánh nền tảng"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chọn một nhà cung cấp dịch vụ như Rancher và so sánh với một nhà cung cấp khác như OpenShift."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tùy ý quyết định nhà cung cấp nào \"tốt hơn\" và lập luận vì sao nó tốt hơn nhà cung cấp còn lại."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chỉ cần nộp danh sách gạch đầu dòng là đủ."}]}]},{"type":"element","tagName":"h3","properties":{"id":"serverless","style":"position:relative;"},"children":[{"type":"text","value":"Serverless"},{"type":"element","tagName":"a","properties":{"href":"#serverless","ariaLabel":"serverless permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Serverless_computing","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Serverless"}]},{"type":"text","value":" đã trở nên rất phổ biến và dễ hiểu lý do tại sao. Dù là Google Cloud Run, Knative, OpenFaaS, OpenWhisk, Fission hay Kubeless thì chúng đều chạy trên Kubernetes, hoặc ít nhất là có thể chạy trên đó. Nền tảng serverless càng cũ thì càng có khả năng không chạy trên Kubernetes. Vì vậy, nói \"Kubernetes cạnh tranh với serverless\" là không hợp lý."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vì đây không phải là khóa học về serverless nên chúng ta sẽ không đi sâu, nhưng serverless nghe thật hấp dẫn. Đó là lý do tiếp theo chúng ta sẽ thiết lập một nền tảng serverless trên k3d. Ở đây, chúng ta chọn "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Knative"}]},{"type":"text","value":" vì đây là giải pháp mà "},{"type":"element","tagName":"a","properties":{"href":"https://cloud.google.com/blog/products/serverless/knative-based-cloud-run-services-are-ga","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Google Cloud Run"}]},{"type":"text","value":" dựa vào và có vẻ là lựa chọn mã nguồn mở tốt so với các lựa chọn khác. Nó cũng phù hợp với chủ đề \"nền tảng cho nền tảng\" vì bạn có thể dùng nó để tạo nền tảng serverless của riêng mình."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Knative có một "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/knative/specs/blob/main/specs/serving/runtime-contract.md","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"runtime contract"}]},{"type":"text","value":" do cộng đồng hỗ trợ. Nó mô tả các tính năng mà một ứng dụng cần có để chạy đúng với vai trò FaaS. Yêu cầu quan trọng là ứng dụng phải stateless và cấu hình được qua biến môi trường. Đặc tả mã nguồn mở kiểu này giúp dự án được chấp nhận rộng rãi hơn. Ví dụ, "},{"type":"element","tagName":"a","properties":{"href":"https://ahmet.im/blog/cloud-run-is-a-knative/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Google Cloud Run đã triển khai"}]},{"type":"text","value":" cùng hợp đồng này."}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 5.06: Thử Serverless"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cài đặt thành phần Knative Serving vào cụm k3d của bạn."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Để Knative hoạt động trên k3d, bạn cần tạo cụm không có Traefik:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ k3d cluster create --port "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"8082"}]},{"type":"text","value":":30080@agent:0 -p "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"8081"}]},{"type":"text","value":":80@loadbalancer --agents "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" --k3s-arg "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"--disable=traefik@server:0\""}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sau đó làm theo "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/docs/install/yaml-install/serving/install-serving-with-yaml/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"hướng dẫn này"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn có thể gặp tình huống như sau ở bước "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"verify the installation"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ kubectl get pods -n knative-serving\nNAME                                      READY   STATUS             RESTARTS      AGE\nactivator-67855958d-w2ws8                 "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     Running            "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"             64s\nautoscaler-5ff4c5d679-54l28               "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     Running            "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"             64s\nwebhook-5446675b97-2ngh6                  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     CrashLoopBackOff   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"12s ago"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"   64s\nnet-kourier-controller-58b6bf4fbc-g7dlp   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     CrashLoopBackOff   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"10s ago"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"   55s\ncontroller-6d8b579f9-p42dx                "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"/1     CrashLoopBackOff   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"6s ago"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"    64s"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Xem log của pod bị crash để biết cách khắc phục."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tiếp theo, hãy thử các ví dụ trong "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/docs/getting-started/first-service/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Deploying a Knative Service"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/docs/getting-started/first-autoscale/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Autoscaling"}]},{"type":"text","value":" và "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/docs/getting-started/first-traffic-split/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Traffic splitting"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lưu ý bạn có thể truy cập service từ máy host như sau:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"curl"}]},{"type":"text","value":" -H "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Host: hello.default.192.168.240.3.sslip.io\""}]},{"type":"text","value":" http://localhost:8081"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trong đó "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Host"}]},{"type":"text","value":" là URL bạn lấy bằng lệnh sau:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl get ksvc"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 5.07: Triển khai lên Serverless"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Biến ứng dụng Ping-pong thành serverless."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Đọc "},{"type":"element","tagName":"a","properties":{"href":"https://knative.dev/docs/serving/convert-deployment-to-knative-service/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tài liệu này"}]},{"type":"text","value":" có thể hữu ích."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"GỢI Ý: Ứng dụng của bạn nên lắng nghe trên port 8080 hoặc tốt nhất là có biến môi trường "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":" để cấu hình port này."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Bài tập 5.08: Landscape"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Xem sơ đồ CNCF Cloud Native Landscape "},{"type":"element","tagName":"a","properties":{"href":"https://landscape.cncf.io/images/landscape.png","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"png"}]},{"type":"text","value":" (cũng có bản "},{"type":"element","tagName":"a","properties":{"href":"https://landscape.cncf.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"tương tác"}]},{"type":"text","value":")"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Khoanh tròn logo của mọi sản phẩm / dự án bạn đã từng sử dụng. Không nhất thiết phải trong khóa học này. \"Đã sử dụng\" ở đây nghĩa là bạn biết chắc mình đã dùng nó. Sau đó dùng màu khác để khoanh tròn những cái mà thứ bạn dùng phụ thuộc vào, trừ những cái đã khoanh trước đó. Sau đó lập danh sách thông tin về nơi chúng được sử dụng. Bất cứ thứ gì ngoài phạm vi khóa học này có thể ghi là \"ngoài khóa học\"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ví dụ:"}]},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tôi đã dùng "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"HELM"}]},{"type":"text","value":" để cài Prometheus ở phần 2."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tôi đã gián tiếp dùng "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Flannel"}]},{"type":"text","value":" vì k3d (thông qua k3s) sử dụng nó. Nhưng tôi không biết nó hoạt động thế nào."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tôi đã dùng "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Istio"}]},{"type":"text","value":" ngoài khóa học."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Bạn có thể truy vết gián tiếp sâu bao nhiêu tùy thích, như ví dụ k3d -> k3s -> flannel, nhưng hãy dùng lý trí để hình ảnh cuối cùng có ý nghĩa."}]}]}]},"html":"<div><text-box variant='learningObjectives' name='Mục tiêu học tập'><p>Sau phần này bạn có thể</p><ul>\n<li>Liệt kê và so sánh các lựa chọn nền tảng.</li>\n<li>Thiết lập một nền tảng serverless (Knative) và triển khai một workload đơn giản</li>\n</ul></text-box><p>Cuối cùng, vì Kubernetes là một nền tảng, chúng ta sẽ điểm qua một số thành phần xây dựng phổ biến sử dụng Kubernetes.</p><blockquote><p lang=\"en\" dir=\"ltr\">Kubernetes là một nền tảng để xây dựng các nền tảng khác. Nó là điểm khởi đầu tốt hơn; không phải là đích đến cuối cùng.</p>&mdash; Kelsey Hightower (@kelseyhightower) <a href=\"https://twitter.com/kelseyhightower/status/935252923721793536?ref_src=twsrc%5Etfw\">November 27, 2017</a></blockquote><p><a href=\"https://www.openshift.com/\" target=\"_blank\" rel=\"noopener noreferrer\">OpenShift</a> là một Kubernetes \"doanh nghiệp\" (<a href=\"https://developers.redhat.com/products/openshift/overview\" target=\"_blank\" rel=\"noopener noreferrer\">Red Hat OpenShift Overview</a>). Nói rằng bạn không có Kubernetes vì bạn dùng OpenShift cũng giống như nói <a href=\"https://www.openshift.com/blog/enterprise-kubernetes-with-openshift-part-one\" target=\"_blank\" rel=\"noopener noreferrer\">\"Tôi không có động cơ. Tôi có một chiếc xe hơi!\"</a>. Để xem các lựa chọn Kubernetes sẵn sàng cho sản xuất khác, hãy xem <a href=\"https://rancher.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Rancher</a>, có thể bạn đã thấy ở trang này <a href=\"https://github.com/rancher/k3d\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/rancher/k3d</a>, và <a href=\"https://cloud.google.com/anthos/gke\" target=\"_blank\" rel=\"noopener noreferrer\">Anthos GKE</a>, nghe cũng quen thuộc. Tất cả đều là các lựa chọn khi bạn phải quyết định chọn bản phân phối Kubernetes nào hoặc muốn dùng dịch vụ được quản lý.</p><exercise name='Bài tập 5.05: So sánh nền tảng'><p>Chọn một nhà cung cấp dịch vụ như Rancher và so sánh với một nhà cung cấp khác như OpenShift.</p><p>Tùy ý quyết định nhà cung cấp nào \"tốt hơn\" và lập luận vì sao nó tốt hơn nhà cung cấp còn lại.</p><p>Chỉ cần nộp danh sách gạch đầu dòng là đủ.</p></exercise><h3 id=\"serverless\" style=\"position:relative;\">Serverless<a href=\"#serverless\" aria-label=\"serverless permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p><a href=\"https://en.wikipedia.org/wiki/Serverless_computing\" target=\"_blank\" rel=\"noopener noreferrer\">Serverless</a> đã trở nên rất phổ biến và dễ hiểu lý do tại sao. Dù là Google Cloud Run, Knative, OpenFaaS, OpenWhisk, Fission hay Kubeless thì chúng đều chạy trên Kubernetes, hoặc ít nhất là có thể chạy trên đó. Nền tảng serverless càng cũ thì càng có khả năng không chạy trên Kubernetes. Vì vậy, nói \"Kubernetes cạnh tranh với serverless\" là không hợp lý.</p><p>Vì đây không phải là khóa học về serverless nên chúng ta sẽ không đi sâu, nhưng serverless nghe thật hấp dẫn. Đó là lý do tiếp theo chúng ta sẽ thiết lập một nền tảng serverless trên k3d. Ở đây, chúng ta chọn <a href=\"https://knative.dev/\" target=\"_blank\" rel=\"noopener noreferrer\">Knative</a> vì đây là giải pháp mà <a href=\"https://cloud.google.com/blog/products/serverless/knative-based-cloud-run-services-are-ga\" target=\"_blank\" rel=\"noopener noreferrer\">Google Cloud Run</a> dựa vào và có vẻ là lựa chọn mã nguồn mở tốt so với các lựa chọn khác. Nó cũng phù hợp với chủ đề \"nền tảng cho nền tảng\" vì bạn có thể dùng nó để tạo nền tảng serverless của riêng mình.</p><p>Knative có một <a href=\"https://github.com/knative/specs/blob/main/specs/serving/runtime-contract.md\" target=\"_blank\" rel=\"noopener noreferrer\">runtime contract</a> do cộng đồng hỗ trợ. Nó mô tả các tính năng mà một ứng dụng cần có để chạy đúng với vai trò FaaS. Yêu cầu quan trọng là ứng dụng phải stateless và cấu hình được qua biến môi trường. Đặc tả mã nguồn mở kiểu này giúp dự án được chấp nhận rộng rãi hơn. Ví dụ, <a href=\"https://ahmet.im/blog/cloud-run-is-a-knative/\" target=\"_blank\" rel=\"noopener noreferrer\">Google Cloud Run đã triển khai</a> cùng hợp đồng này.</p><exercise name='Bài tập 5.06: Thử Serverless'><p>Cài đặt thành phần Knative Serving vào cụm k3d của bạn.</p><p>Để Knative hoạt động trên k3d, bạn cần tạo cụm không có Traefik:</p><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ k3d cluster create --port <span class=\"token number\">8082</span>:30080@agent:0 -p <span class=\"token number\">8081</span>:80@loadbalancer --agents <span class=\"token number\">2</span> --k3s-arg <span class=\"token string\">\"--disable=traefik@server:0\"</span></code></pre></div><p>Sau đó làm theo <a href=\"https://knative.dev/docs/install/yaml-install/serving/install-serving-with-yaml/\" target=\"_blank\" rel=\"noopener noreferrer\">hướng dẫn này</a>.</p><p>Bạn có thể gặp tình huống như sau ở bước <em>verify the installation</em>:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl get pods -n knative-serving\nNAME                                      READY   STATUS             RESTARTS      AGE\nactivator-67855958d-w2ws8                 <span class=\"token number\">0</span>/1     Running            <span class=\"token number\">0</span>             64s\nautoscaler-5ff4c5d679-54l28               <span class=\"token number\">0</span>/1     Running            <span class=\"token number\">0</span>             64s\nwebhook-5446675b97-2ngh6                  <span class=\"token number\">0</span>/1     CrashLoopBackOff   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span>12s ago<span class=\"token punctuation\">)</span>   64s\nnet-kourier-controller-58b6bf4fbc-g7dlp   <span class=\"token number\">0</span>/1     CrashLoopBackOff   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span>10s ago<span class=\"token punctuation\">)</span>   55s\ncontroller-6d8b579f9-p42dx                <span class=\"token number\">0</span>/1     CrashLoopBackOff   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span>6s ago<span class=\"token punctuation\">)</span>    64s</code></pre></div><p>Xem log của pod bị crash để biết cách khắc phục.</p><p>Tiếp theo, hãy thử các ví dụ trong <a href=\"https://knative.dev/docs/getting-started/first-service/\" target=\"_blank\" rel=\"noopener noreferrer\">Deploying a Knative Service</a>, <a href=\"https://knative.dev/docs/getting-started/first-autoscale/\" target=\"_blank\" rel=\"noopener noreferrer\">Autoscaling</a> và <a href=\"https://knative.dev/docs/getting-started/first-traffic-split/\" target=\"_blank\" rel=\"noopener noreferrer\">Traffic splitting</a>.</p><p>Lưu ý bạn có thể truy cập service từ máy host như sau:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -H <span class=\"token string\">\"Host: hello.default.192.168.240.3.sslip.io\"</span> http://localhost:8081</code></pre></div><p>Trong đó <em>Host</em> là URL bạn lấy bằng lệnh sau:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get ksvc</code></pre></div></exercise><exercise name='Bài tập 5.07: Triển khai lên Serverless'><p>Biến ứng dụng Ping-pong thành serverless.</p><p>Đọc <a href=\"https://knative.dev/docs/serving/convert-deployment-to-knative-service/\" target=\"_blank\" rel=\"noopener noreferrer\">tài liệu này</a> có thể hữu ích.</p><p>GỢI Ý: Ứng dụng của bạn nên lắng nghe trên port 8080 hoặc tốt nhất là có biến môi trường <code class=\"language-text\">PORT</code> để cấu hình port này.</p></exercise><exercise name='Bài tập 5.08: Landscape'><p>Xem sơ đồ CNCF Cloud Native Landscape <a href=\"https://landscape.cncf.io/images/landscape.png\" target=\"_blank\" rel=\"noopener noreferrer\">png</a> (cũng có bản <a href=\"https://landscape.cncf.io/\" target=\"_blank\" rel=\"noopener noreferrer\">tương tác</a>)</p><p>Khoanh tròn logo của mọi sản phẩm / dự án bạn đã từng sử dụng. Không nhất thiết phải trong khóa học này. \"Đã sử dụng\" ở đây nghĩa là bạn biết chắc mình đã dùng nó. Sau đó dùng màu khác để khoanh tròn những cái mà thứ bạn dùng phụ thuộc vào, trừ những cái đã khoanh trước đó. Sau đó lập danh sách thông tin về nơi chúng được sử dụng. Bất cứ thứ gì ngoài phạm vi khóa học này có thể ghi là \"ngoài khóa học\".</p><p>Ví dụ:</p><ol>\n<li>Tôi đã dùng <strong>HELM</strong> để cài Prometheus ở phần 2.</li>\n<li>Tôi đã gián tiếp dùng <strong>Flannel</strong> vì k3d (thông qua k3s) sử dụng nó. Nhưng tôi không biết nó hoạt động thế nào.</li>\n<li>Tôi đã dùng <strong>Istio</strong> ngoài khóa học.</li>\n</ol><p>Bạn có thể truy vết gián tiếp sâu bao nhiêu tùy thích, như ví dụ k3d -> k3s -> flannel, nhưng hãy dùng lý trí để hình ảnh cuối cùng có ý nghĩa.</p></exercise></div>","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"},"fileAbsolutePath":"/home/runner/work/dwk2024/dwk2024/data/part-5/4-beyond-kubernetes-vi.md"},"allPages":{"edges":[{"node":{"id":"7e706a38-3828-5118-bdec-3705a319a1b0","frontmatter":{"path":"/faq-vi","title":"Câu hỏi thường gặp"}}},{"node":{"id":"e1ed6713-5992-5f7f-95a1-17efd97f57d8","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"5225f2a2-20f9-50ce-93ac-7b38f3105103","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"3102d88f-7297-56fb-af03-27d1079fffd1","frontmatter":{"path":"/","title":"Homepage"}}},{"node":{"id":"04c5ddbd-7839-580f-82da-bc9fdbb49f84","frontmatter":{"path":"/known-problems-solutions","title":"Các vấn đề bạn có thể gặp phải"}}},{"node":{"id":"c92ea568-3384-5ff8-8dfa-b9015597780d","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"d9c993b6-f6b4-59a1-b119-f3b7218eec6b","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"5e6b6ee0-b381-53f0-b84c-af378792b131","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"58688080-4aa8-54e6-8b8b-02de1c4f6410","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"8a3ee5be-7557-5fcd-954b-2351e74cd585","frontmatter":{"path":"/part-0/1-intro-vi","title":"Giới thiệu khóa học"}}},{"node":{"id":"23082016-7bbd-5215-8485-4ffccbf3ea1a","frontmatter":{"path":"/part-0/1-intro","title":"Course Introduction"}}},{"node":{"id":"771eaa93-2ef2-5e0f-9e1e-55914c67c4ac","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"fe0342aa-a4c5-5b44-8591-71eb27f1a287","frontmatter":{"path":"/part-1/2-introduction-to-debugging-vi","title":"Giới thiệu về Debugging"}}},{"node":{"id":"1c236933-7ad5-5b61-8c07-07db3822d55a","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"7fc5c062-6b94-53ec-9aaa-adca66ce672e","frontmatter":{"path":"/part-1/5-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8ed3365b-b788-5806-8ec5-bec3cb0f94c8","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"46a4a0e4-d131-537d-aa72-5b6726163a7d","frontmatter":{"path":"/part-2/1-networking-between-pods-vi","title":"Kết nối mạng giữa các pod"}}},{"node":{"id":"3c788edf-62db-5e86-9366-17b53eda9244","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"fd467661-6b24-545f-904c-52f4a7ade6b7","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"56110eda-875d-5bd9-a400-5bd5a009df7f","frontmatter":{"path":"/part-2/5-monitoring-vi","title":"Giám sát"}}},{"node":{"id":"79f1cddb-6995-51c2-bf98-2adc13de9b13","frontmatter":{"path":"/part-2/6-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"8f3387b0-ec6e-5a86-982a-e52780d911f9","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"06173ac4-c2f8-57df-8dc8-450b5c2bb695","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"8c3d747d-4f87-5a46-99ac-dfd0af5a893b","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"8d9fd774-9dbe-5cca-8395-9226fcf82c4a","frontmatter":{"path":"/part-3/4-summary","title":"Tóm tắt"}}},{"node":{"id":"b98b2895-6c9d-5234-939d-2f547cbf8a06","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"29bec4f5-8a0b-580d-ac84-9dbbd1d7152e","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"781bd207-902e-59a2-a752-4958c2c93fb0","frontmatter":{"path":"/part-5/5-summary-vi","title":"Tóm tắt và kết thúc"}}},{"node":{"id":"2318c18f-86e6-5a4e-958a-d1c38f8615cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"eb339401-26c8-594c-98fd-2f30a95275cd","frontmatter":{"path":"/part-5/4-beyond-kubernetes-vi","title":"Vượt ra ngoài Kubernetes"}}},{"node":{"id":"1d8ff75c-065b-565d-9ceb-01b9a276ae7a","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"306c87f3-9adb-5d8b-a3ce-072f8e6cfa43","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"4dd8302d-d170-5d38-8198-4d0947322bbc","frontmatter":{"path":"/part-4/4-summary-vi","title":"Tóm tắt"}}},{"node":{"id":"0045695d-e541-5acc-b4b8-551023d01733","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"829fd216-f995-5a77-b201-bb971aec73b4","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams-vi","title":"Kubernetes qua ba sơ đồ"}}},{"node":{"id":"98132cca-4dc3-5942-a6f4-1da87bc81a23","frontmatter":{"path":"/part-0/2-kubernetes-in-three-diagrams","title":"Kubernetes in three diagrams"}}},{"node":{"id":"90b8e83a-9d55-550a-908a-316708ce7f8c","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"8931bcb7-c40e-5d57-aa80-c4333972fbb8","frontmatter":{"path":"/part-1/3-introduction-to-networking-vi","title":"Giới thiệu về Mạng"}}},{"node":{"id":"4fe00c0a-bb17-5d4c-8202-750493a755c9","frontmatter":{"path":"/part-1/4-introduction-to-storage-vi","title":"Giới thiệu về Lưu trữ"}}},{"node":{"id":"6cc3be66-6091-58fc-bcbd-1f27f9473f85","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"b53df746-c24f-57e3-a9f3-d6d621697689","frontmatter":{"path":"/part-2/2-organizing-a-cluster-vi","title":"Tổ chức một cụm"}}},{"node":{"id":"02389078-a12f-561a-8a54-fa99a6950b92","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs-vi","title":"StatefulSet và Job"}}},{"node":{"id":"15be3d7c-b0b7-5bce-b3bf-8cec39d54630","frontmatter":{"path":"/part-2/3-configuring-applications-vi","title":"Cấu hình ứng dụng"}}},{"node":{"id":"e4534a9d-fb84-5d1f-83f0-35055feb0da7","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"d5206d16-d2fe-51fd-8acd-d85ecf0be257","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"466aa711-527b-55a0-871b-13468e65d344","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"bea18f34-dcdc-59b8-ba24-3011680a0c58","frontmatter":{"path":"/part-3/1-introduction-to-gke-vi","title":"Giới thiệu về Google Kubernetes Engine"}}},{"node":{"id":"84db9628-b3df-5ca1-9d3d-5924e02ae549","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"0049e57f-0bc7-5689-9169-43848a972877","frontmatter":{"path":"/part-3/2-deployment-pipeline-vi","title":"Quy trình Triển khai (Deployment Pipeline)"}}},{"node":{"id":"7dfec8c7-8ccb-50da-949d-ebd1de395dc4","frontmatter":{"path":"/part-3/3-gke-features-vi","title":"Các tính năng của GKE"}}},{"node":{"id":"61f18dc7-1abf-5c75-9b54-0cee11c76a40","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"0e981ec1-99e0-5005-ba9f-4f626a81b7ce","frontmatter":{"path":"/part-5/1-kubernetes-internals-vi","title":"Bên trong Kubernetes"}}},{"node":{"id":"31927db3-2182-55c7-b680-663754461d14","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"da1f8069-17bc-5c8e-9310-117bcedf5acf","frontmatter":{"path":"/part-5/2-custom-resource-definitions-vi","title":"Định nghĩa Tài nguyên Tùy chỉnh (Custom Resource Definitions)"}}},{"node":{"id":"20ceed4e-761d-54d4-9acf-2669eac533c6","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"ccefb04a-5790-57f6-869b-d255b2203667","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"423cbc46-2dfa-57e6-9dc5-761a93729600","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"68c64f9f-c9a5-544b-bafb-b061665cacd0","frontmatter":{"path":"/part-5/3-service-mesh-vi","title":"Service Mesh"}}},{"node":{"id":"6df9c7be-f930-5827-a39c-0c1698b23600","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"46f9ce68-5ccd-5787-bd59-03852ad6fdcb","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"a917b24d-df2b-5199-ac98-cd0f7560c63f","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"97ead58a-8493-5fdd-808e-d4a56de573b0","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"c179c521-bb62-52bd-808b-d4869df5302a","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Chiến lược cập nhật và Prometheus"}}},{"node":{"id":"6f4f18ce-5aa9-5bb5-9d74-0a631a78e6b3","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Hệ thống nhắn tin"}}},{"node":{"id":"898b0354-f1a2-5664-97de-d84b16018395","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"6981a9d7-619d-51a9-9490-74bc77c0f55b","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}},{"node":{"id":"a17c4c44-7396-543f-b6b4-7adf57808aa8","frontmatter":{"path":"/part-1/1-first-deploy-vi","title":"Triển khai đầu tiên"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}